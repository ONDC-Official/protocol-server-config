BAP:
  flows:
    - summary: Metro - Station Code Based Flow
      id: metro-flow-1
      domain: ONDC:TRV11
      shouldDispaly: true
      sessionData:
        version: 2.0.0
        collectedBy: BAP
        bankAccountNumber: '123456789'
        virtualPaymentAddress: adasd@okiciic
        bankCode: fj3jf9ij3f02
      protocol:
        search_route:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: messageId
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.intent.fulfillment.vehicle.category
              value: data.vehicleCategaory || session.vehicleCategaory
            - beckn_key: message.intent.payment.tags
              value: data.paymentTagsSearch
              compute: buildTags(data.paymentTagsSearch)
        search_trip:
          sessionData:
            - beckn_key: currentTransactionId
              value: newTranscationId
            - beckn_key: transactionIds
              value: '[...session.transactionIds, newTranscationId]'
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: data.bpp_id
            - beckn_key: context.bpp_uri
              value: data.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: messageId
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.intent.fulfillment.stops[0].type
              value: startPoint
              check: data?.startStop
            - beckn_key: message.intent.fulfillment.stops[0].location.descriptor.code
              value: data?.startStop
            - beckn_key: message.intent.fulfillment.stops[1].type
              value: endPoint
              check: data?.endStop
            - beckn_key: message.intent.fulfillment.stops[1].location.descriptor.code
              value: data?.endStop
            - beckn_key: message.intent.fulfillment.vehicle.category
              value: data.vehicleCategaory || session.vehicleCategaory
            - beckn_key: message.intent.payment.tags
              value: data.paymentTags || session.paymentTagsSearch
              compute: buildTags(data.paymentTags || session.paymentTagsSearch)
        select:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: messageId
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: data.itemId
            - beckn_key: message.order.items[0].quantity.selected.count
              value: parseInt(data.quantity)
            - beckn_key: message.order.provider.id
              value: data.providerId
        init:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: messageId
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: session.itemId
            - beckn_key: message.order.items[0].quantity.selected.count
              value: session.quantitySelected
            - beckn_key: message.order.provider.id
              value: session.providerId
            - beckn_key: message.order.billing.name
              value: data.name
            - beckn_key: message.order.billing.email
              value: data.email
            - beckn_key: message.order.billing.phone
              value: data.phone
            - beckn_key: message.order.payments[0].collected_by
              value: session.collectedBy
            - beckn_key: message.order.payments[0].status
              value: data.paymentStatus
            - beckn_key: message.order.payments[0].type
              value: data.paymentType
            - beckn_key: message.order.payments[0].params.bank_code
              value: session.bankCode
            - beckn_key: message.order.payments[0].params.bank_account_number
              value: session.bankAccountNumber
            - beckn_key: message.order.payments[0].params.virtual_payment_address
              value: session.virtualPaymentAddress
            - beckn_key: message.order.payments[0].tags
              value: data.paymentTagsInit
              compute: buildTags(data.paymentTagsInit)
        confirm:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: messageId
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: session.itemId
            - beckn_key: message.order.items[0].quantity.selected.count
              value: session.quantitySelected
            - beckn_key: message.order.provider.id
              value: session.providerId
            - beckn_key: message.order.billing.name
              value: session.name
            - beckn_key: message.order.billing.email
              value: session.email
            - beckn_key: message.order.billing.phone
              value: session.phone
            - beckn_key: message.order.payments[0].id
              value: data.paymentId
            - beckn_key: message.order.payments[0].collected_by
              value: session.collectedBy
            - beckn_key: message.order.payments[0].status
              value: data.paymentStatusConfirm
            - beckn_key: message.order.payments[0].type
              value: data.paymentTypeConfirm
            - beckn_key: message.order.payments[0].params.transaction_id
              value: data.paymentTranscationId
            - beckn_key: message.order.payments[0].params.currency
              value: data.currency
            - beckn_key: message.order.payments[0].params.amount
              value: data.amount
            - beckn_key: message.order.payments[0].tags
              value: data.paymentTagsConfirm
              compute: buildTags(data.paymentTagsConfirm)
        status:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: messageId
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order_id
              value: data.orderId
        on_search_route:
          mapping:
            - business_key: name
              extractionPath: message.catalog.descriptor.name
            - business_key: bpp_id
              extractionPath: context.bpp_id
            - business_key: bpp_uri
              extractionPath: context.bpp_uri
            - business_key: location
              extractionPath: >-
                message.catalog.providers[].fulfillments[].stops[]{locationName:
                location.descriptor.code}
            - business_key: error
              extractionPath: error
        on_search_trip:
          mapping:
            - business_key: name
              extractionPath: message.catalog.descriptor.name
            - business_key: bpp_id
              extractionPath: context.bpp_id
            - business_key: bpp_uri
              extractionPath: context.bpp_uri
            - business_key: items
              extractionPath: >-
                message.catalog.providers[]{providerId: id}.items[]{id: id,
                name: descriptor.name}
            - business_key: error
              extractionPath: error
        on_select:
          mapping:
            - business_key: breakup
              extractionPath: >-
                message.order.quote.breakup[]{type: title, totalPrice:
                price.value, UOP: price.currency}
            - business_key: error
              extractionPath: error
        on_init:
          sessionData:
            - business_key: paymentID
              extractionPath: 'message.order.payments[]{id: id}'
            - business_key: totalPrice
              extractionPath: message.order.quote.price
          mapping:
            - business_key: paymentDetails
              extractionPath: 'message.order.payments[]{id: id, type: type, status: status}'
            - business_key: totalPrice
              extractionPath: message.order.quote.price
            - business_key: error
              extractionPath: error
        on_confirm:
          mapping:
            - business_key: orderId
              extractionPath: message.order.id
            - business_key: status
              extractionPath: message.order.status
            - business_key: QR code
              extractionPath: >-
                message.order.fulfillments[]{providerId: id}.stops[?(type ===
                "START")]{token: authorization.token, status:
                authorization.status}
            - business_key: error
              extractionPath: error
        on_status:
          mapping:
            - business_key: status
              extractionPath: message.order.status
            - business_key: error
              extractionPath: error
      calls:
        - config: search_route
          mode: ASYNC
        - config: search_trip
          mode: SYNC
        - config: select
          mode: ASYNC
        - config: init
          mode: SYNC
        - config: confirm
          mode: ASYNC
        - config: status
          mode: SYNC
        - config: on_search_route
          endpoint: mapper/ondc
          mode: ASYNC
        - config: on_search_trip
          endpoint: mapper/ondc
          mode: SYNC
        - config: on_select
          endpoint: mapper/ondc
          mode: ASYNC
        - config: on_init
          endpoint: mapper/ondc
          mode: SYNC
        - config: on_confirm
          endpoint: mapper/ondc
          mode: ASYNC
        - config: on_status
          endpoint: mapper/ondc
          mode: SYNC
      schema: &ref_443
        search:
          type: object
          properties:
            context:
              allOf:
                - description: >-
                    Every API call in beckn protocol has a context. It provides
                    a high-level overview to the receiver about the nature of
                    the intended transaction. Typically, it is the BAP that sets
                    the transaction context based on the consumer's location and
                    action on their UI. But sometimes, during unsolicited
                    callbacks, the BPP also sets the transaction context but it
                    is usually the same as the context of a previous full-cycle,
                    request-callback interaction between the BAP and the BPP.
                    The context object contains four types of fields.
                    <ol><li>Demographic information about the transaction using
                    fields like `domain`, `country`, and
                    `region`.</li><li>Addressing details like the sending and
                    receiving platform's ID and API
                    URL.</li><li>Interoperability information like the protocol
                    version that implemented by the sender
                    and,</li><li>Transaction details like the method being
                    called at the receiver's endpoint, the transaction_id that
                    represents an end-to-end user session at the BAP, a message
                    ID to pair requests with callbacks, a timestamp to capture
                    sending times, a ttl to specifiy the validity of the
                    request, and a key to encrypt information if
                    necessary.</li></ol> This object must be passed in every
                    interaction between a BAP and a BPP. In HTTP/S
                    implementations, it is not necessary to send the context
                    during the synchronous response. However, in asynchronous
                    protocols, the context must be sent during all interactions,
                  type: object
                  additionalProperties: false
                  properties:
                    domain:
                      description: Domain code that is relevant to this transaction context
                      allOf:
                        - type: string
                          description: >-
                            Standard code representing the domain. The standard
                            is usually published as part of the network policy.
                            Furthermore, the network facilitator should also
                            provide a mechanism to provide the supported domains
                            of a network.
                    location:
                      description: >-
                        The location where the transaction is intended to be
                        fulfilled.
                      allOf:
                        - &ref_16
                          description: The physical location of something
                          type: object
                          additionalProperties: false
                          properties:
                            id: &ref_17
                              type: string
                            descriptor: &ref_4
                              description: Physical description of something.
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  type: string
                                code:
                                  type: string
                                short_desc:
                                  type: string
                                long_desc:
                                  type: string
                                additional_desc:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    content_type:
                                      type: string
                                      enum:
                                        - text/plain
                                        - text/html
                                        - application/json
                                media:
                                  type: array
                                  items: &ref_26
                                    description: >-
                                      This object contains a url to a media
                                      file.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      mimetype:
                                        description: >-
                                          indicates the nature and format of the
                                          document, file, or assortment of bytes.
                                          MIME types are defined and standardized
                                          in IETF's RFC 6838
                                        type: string
                                      url:
                                        description: The URL of the file
                                        type: string
                                        format: uri
                                      signature:
                                        description: >-
                                          The digital signature of the file signed
                                          by the sender
                                        type: string
                                      dsa:
                                        description: The signing algorithm used by the sender
                                        type: string
                                images:
                                  type: array
                                  items: &ref_9
                                    description: Describes an image
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      url:
                                        description: >-
                                          URL to the image. This can be a data url
                                          or an remote url
                                        type: string
                                        format: uri
                                      size_type:
                                        description: >-
                                          The size of the image. The network
                                          policy can define the default dimensions
                                          of each type
                                        type: string
                                        enum:
                                          - xs
                                          - sm
                                          - md
                                          - lg
                                          - xl
                                          - custom
                                      width:
                                        description: Width of the image in pixels
                                        type: string
                                      height:
                                        description: Height of the image in pixels
                                        type: string
                            map_url:
                              description: >-
                                The url to the map of the location. This can be
                                a globally recognized map url or the one
                                specified by the network policy.
                              type: string
                              format: uri
                            gps:
                              description: The GPS co-ordinates of this location.
                              allOf:
                                - &ref_0
                                  description: Describes a GPS coordinate
                                  type: string
                                  pattern: >-
                                    ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                            address:
                              description: The address of this location.
                              allOf:
                                - &ref_13
                                  description: Describes a postal address.
                                  type: string
                            city:
                              description: The city this location is, or is located within
                              allOf:
                                - &ref_15
                                  description: Describes a city
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      description: Name of the city
                                      type: string
                                    code:
                                      description: City code
                                      type: string
                            district:
                              description: The state this location is, or is located within
                              type: string
                            state:
                              description: The state this location is, or is located within
                              allOf:
                                - &ref_14
                                  description: >-
                                    A bounded geopolitical region of governance
                                    inside a country.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the state
                                    code:
                                      type: string
                                      description: >-
                                        State code as per country or
                                        international standards
                            country:
                              description: >-
                                The country this location is, or is located
                                within
                              allOf:
                                - description: Describes a country
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the country
                                    code:
                                      type: string
                                      description: >-
                                        Country code as per ISO 3166-1 and ISO
                                        3166-2 format
                            area_code:
                              type: string
                            circle:
                              description: >-
                                Describes a circular region of a specified
                                radius centered at a specified GPS coordinate.
                              type: object
                              additionalProperties: false
                              properties:
                                gps: *ref_0
                                radius: &ref_19
                                  description: Describes a scalar
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - CONSTANT
                                        - VARIABLE
                                    value: &ref_1
                                      description: >-
                                        Describes a numerical value in decimal
                                        form
                                      type: string
                                      pattern: '[+-]?([0-9]*[.])?[0-9]+'
                                    estimated_value: *ref_1
                                    computed_value: *ref_1
                                    range:
                                      type: object
                                      properties:
                                        min: *ref_1
                                        max: *ref_1
                                    unit:
                                      type: string
                            polygon:
                              description: The boundary polygon of this location
                              type: string
                            3dspace:
                              description: >-
                                The three dimensional region describing this
                                location
                              type: string
                            rating:
                              description: The rating of this location
                              allOf:
                                - &ref_5
                                  description: >-
                                    Rating value given to the object. This can
                                    be a single value or can also contain an
                                    inequality operator like gt, gte, lt, lte.
                                    This can also contain an inequality
                                    expression containing logical operators like
                                    && and ||.
                                  type: string
                    action:
                      description: >-
                        The Beckn protocol method being called by the sender and
                        executed at the receiver.
                      type: string
                    version:
                      type: string
                      description: >-
                        Version of transaction protocol being used by the
                        sender.
                    bap_id:
                      description: Subscriber ID of the BAP
                      allOf:
                        - &ref_2
                          description: >-
                            A globally unique identifier of the platform,
                            Typically it is the fully qualified domain name
                            (FQDN) of the platform.
                          type: string
                    bap_uri:
                      description: >-
                        Subscriber URL of the BAP for accepting callbacks from
                        BPPs.
                      allOf:
                        - &ref_3
                          description: >-
                            The callback URL of the Subscriber. This should
                            necessarily contain the same domain name as set in
                            `subscriber_id``.
                          type: string
                          format: uri
                    bpp_id:
                      description: Subscriber ID of the BPP
                      allOf:
                        - *ref_2
                    bpp_uri:
                      description: Subscriber URL of the BPP for accepting calls from BAPs.
                      allOf:
                        - *ref_3
                    transaction_id:
                      description: >-
                        This is a unique value which persists across all API
                        calls from `search` through `confirm`. This is done to
                        indicate an active user session across multiple
                        requests. The BPPs can use this value to push
                        personalized recommendations, and dynamic offerings
                        related to an ongoing transaction despite being unaware
                        of the user active on the BAP.
                      type: string
                      format: uuid
                    message_id:
                      description: >-
                        This is a unique value which persists during a request /
                        callback cycle. Since beckn protocol APIs are
                        asynchronous, BAPs need a common value to match an
                        incoming callback from a BPP to an earlier call. This
                        value can also be used to ignore duplicate messages
                        coming from the BPP. It is recommended to generate a
                        fresh message_id for every new interaction. When sending
                        unsolicited callbacks, BPPs must generate a new
                        message_id.
                      type: string
                      format: uuid
                    timestamp:
                      description: Time of request generation in RFC3339 format
                      type: string
                      format: date-time
                    key:
                      description: The encryption public key of the sender
                      type: string
                    ttl:
                      description: >-
                        The duration in ISO8601 format after timestamp for which
                        this message holds valid
                      type: string
                - properties:
                    action:
                      enum:
                        - search
            message:
              type: object
              properties:
                intent:
                  description: >-
                    The intent to buy or avail a product or a service. The BAP
                    can declare the intent of the consumer containing
                    <ul><li>What they want (A product, service,
                    offer)</li><li>Who they want (A seller, service provider,
                    agent etc)</li><li>Where they want it and where they want it
                    from</li><li>When they want it (start and end time of
                    fulfillment</li><li>How they want to pay for
                    it</li></ul><br>This has properties like
                    descriptor,provider,fulfillment,payment,category,offer,item,tags<br>This
                    is typically used by the BAP to send the purpose of the
                    user's search to the BPP. This will be used by the BPP to
                    find products or services it offers that may match the
                    user's intent.<br>For example, in Mobility, the mobility
                    consumer declares a mobility intent. In this case, the
                    mobility consumer declares information that describes
                    various aspects of their journey like,<ul><li>Where would
                    they like to begin their journey
                    (intent.fulfillment.start.location)</li><li>Where would they
                    like to end their journey
                    (intent.fulfillment.end.location)</li><li>When would they
                    like to begin their journey
                    (intent.fulfillment.start.time)</li><li>When would they like
                    to end their journey
                    (intent.fulfillment.end.time)</li><li>Who is the transport
                    service provider they would like to avail services from
                    (intent.provider)</li><li>Who is traveling (This is not
                    recommended in public networks)
                    (intent.fulfillment.customer)</li><li>What kind of fare
                    product would they like to purchase
                    (intent.item)</li><li>What add-on services would they like
                    to avail</li><li>What offers would they like to apply on
                    their booking (intent.offer)</li><li>What category of
                    services would they like to avail
                    (intent.category)</li><li>What additional luggage are they
                    carrying</li><li>How would they like to pay for their
                    journey (intent.payment)</li></ul><br>For example, in health
                    domain, a consumer declares the intent for a lab booking the
                    describes various aspects of their booking
                    like,<ul><li>Where would they like to get their scan/test
                    done (intent.fulfillment.start.location)</li><li>When would
                    they like to get their scan/test done
                    (intent.fulfillment.start.time)</li><li>When would they like
                    to get the results of their test/scan
                    (intent.fulfillment.end.time)</li><li>Who is the service
                    provider they would like to avail services from
                    (intent.provider)</li><li>Who is getting the test/scan
                    (intent.fulfillment.customer)</li><li>What kind of test/scan
                    would they like to purchase (intent.item)</li><li>What
                    category of services would they like to avail
                    (intent.category)</li><li>How would they like to pay for
                    their journey (intent.payment)</li></ul>
                  type: object
                  additionalProperties: false
                  properties:
                    descriptor:
                      description: >-
                        A raw description of the search intent. Free text search
                        strings, raw audio, etc can be sent in this object.
                      allOf:
                        - *ref_4
                    provider:
                      description: >-
                        The provider from which the customer wants to place to
                        the order from
                      allOf:
                        - description: Describes the catalog of a business.
                          type: object
                          properties:
                            id:
                              type: string
                              description: Id of the provider
                            descriptor: *ref_4
                            category_id:
                              type: string
                              description: >-
                                Category Id of the provider at the BPP-level
                                catalog
                            rating: *ref_5
                            time: &ref_8
                              description: >-
                                Describes time in its various forms. It can be a
                                single point in time; duration; or a structured
                                timetable of operations<br>This has properties
                                like label, time stamp,duration,range, days,
                                schedule
                              type: object
                              additionalProperties: false
                              properties:
                                label:
                                  type: string
                                timestamp:
                                  type: string
                                  format: date-time
                                duration: &ref_6
                                  description: Describes duration as per ISO8601 format
                                  type: string
                                range:
                                  type: object
                                  properties:
                                    start:
                                      type: string
                                      format: date-time
                                    end:
                                      type: string
                                      format: date-time
                                days:
                                  type: string
                                  description: >-
                                    comma separated values representing days of
                                    the week
                                schedule:
                                  description: >-
                                    Describes schedule as a repeating time
                                    period used to describe a regularly
                                    recurring event. At a minimum a schedule
                                    will specify frequency which describes the
                                    interval between occurrences of the event.
                                    Additional information can be provided to
                                    specify the schedule more precisely. This
                                    includes identifying the timestamps(s) of
                                    when the event will take place. Schedules
                                    may also have holidays to exclude a specific
                                    day from the schedule.<br>This has
                                    properties like frequency, holidays, times
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    frequency: *ref_6
                                    holidays:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                                    times:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                            categories:
                              type: array
                              items: &ref_30
                                description: >-
                                  A label under which a collection of items can
                                  be grouped.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_7
                                    description: ID of the category
                                    type: string
                                  parent_category_id: *ref_7
                                  descriptor: *ref_4
                                  time: *ref_8
                                  ttl:
                                    description: >-
                                      Time to live for an instance of this
                                      schema
                                  tags:
                                    type: array
                                    items: &ref_10
                                      description: >-
                                        A collection of tag objects with group
                                        level attributes. For detailed
                                        documentation on the Tags and Tag Groups
                                        schema go to
                                        https://github.com/beckn/protocol-specifications/discussions/316
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        display:
                                          description: >-
                                            Indicates the display properties of the
                                            tag group. If display is set to false,
                                            then the group will not be displayed. If
                                            it is set to true, it should be
                                            displayed. However, group-level display
                                            properties can be overriden by
                                            individual tag-level display property.
                                            As this schema is purely for catalog
                                            display purposes, it is not recommended
                                            to send this value during search.
                                          type: boolean
                                          default: true
                                        descriptor:
                                          description: >-
                                            Description of the TagGroup, can be used
                                            to store detailed information.
                                          allOf:
                                            - *ref_4
                                        list:
                                          description: >-
                                            An array of Tag objects listed under
                                            this group. This property can be set by
                                            BAPs during search to narrow the
                                            `search` and achieve more relevant
                                            results. When received during
                                            `on_search`, BAPs must render this list
                                            under the heading described by the
                                            `name` property of this schema.
                                          type: array
                                          items:
                                            description: >-
                                              Describes a tag. This is used to contain
                                              extended metadata. This object can be
                                              added as a property to any schema to
                                              describe extended attributes. For BAPs,
                                              tags can be sent during search to
                                              optimize and filter search results. BPPs
                                              can use tags to index their catalog to
                                              allow better search functionality. Tags
                                              are sent by the BPP as part of the
                                              catalog response in the `on_search`
                                              callback. Tags are also meant for
                                              display purposes. Upon receiving a tag,
                                              BAPs are meant to render them as
                                              name-value pairs. This is particularly
                                              useful when rendering tabular
                                              information about a product or service.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor:
                                                description: >-
                                                  Description of the Tag, can be used to
                                                  store detailed information.
                                                allOf:
                                                  - *ref_4
                                              value:
                                                description: >-
                                                  The value of the tag. This set by the
                                                  BPP and rendered as-is by the BAP.
                                                type: string
                                              display:
                                                description: >-
                                                  This value indicates if the tag is
                                                  intended for display purposes. If set to
                                                  `true`, then this tag must be displayed.
                                                  If it is set to `false`, it should not
                                                  be displayed. This value can override
                                                  the group display value.
                                                type: boolean
                            fulfillments:
                              type: array
                              items: &ref_28
                                description: >-
                                  Describes how a an order will be
                                  rendered/fulfilled to the end-customer
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_22
                                    description: >-
                                      Unique reference ID to the fulfillment of
                                      an order
                                    type: string
                                  type:
                                    description: >-
                                      A code that describes the mode of
                                      fulfillment. This is typically set when
                                      there are multiple ways an order can be
                                      fulfilled. For example, a retail order can
                                      be fulfilled either via store pickup or a
                                      home delivery. Similarly, a medical
                                      consultation can be provided either
                                      in-person or via tele-consultation. The
                                      network policy must publish standard
                                      fulfillment type codes for the different
                                      modes of fulfillment.
                                    type: string
                                  rateable:
                                    description: >-
                                      Whether the fulfillment can be rated or
                                      not
                                    type: boolean
                                  rating:
                                    description: >-
                                      The rating value of the fulfullment
                                      service.
                                    allOf:
                                      - *ref_5
                                  state:
                                    description: >-
                                      The current state of fulfillment. The BPP
                                      must set this value whenever the state of
                                      the order fulfillment changes and fire an
                                      unsolicited `on_status` call.
                                    allOf:
                                      - &ref_25
                                        description: Describes the state of fulfillment
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          descriptor: *ref_4
                                          updated_at:
                                            type: string
                                            format: date-time
                                          updated_by:
                                            type: string
                                            description: ID of entity which changed the state
                                  tracking:
                                    type: boolean
                                    description: >-
                                      Indicates whether the fulfillment allows
                                      tracking
                                    default: false
                                  customer:
                                    description: >-
                                      The person that will ultimately receive
                                      the order
                                    allOf:
                                      - description: >-
                                          Describes a customer buying/availing a
                                          product or a service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: &ref_11
                                            description: Describes a person as any individual
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              id:
                                                type: string
                                                description: Describes the identity of the person
                                              url:
                                                description: Profile url of the person
                                                type: string
                                                format: uri
                                              name:
                                                description: the name of the person
                                                type: string
                                              image: *ref_9
                                              age:
                                                description: Age of the person
                                                allOf:
                                                  - *ref_6
                                              dob:
                                                description: Date of birth of the person
                                                type: string
                                                format: date
                                              gender:
                                                type: string
                                                description: >-
                                                  Gender of something, typically a Person,
                                                  but possibly also fictional characters,
                                                  animals, etc. While Male and Female may
                                                  be used, text strings are also
                                                  acceptable for people who do not
                                                  identify as a binary gender.Allowed
                                                  values for this field can be published
                                                  in the network policy
                                              creds:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a credential of an entity -
                                                    Person or Organization
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    id:
                                                      type: string
                                                    type:
                                                      type: string
                                                      default: VerifiableCredential
                                                    url:
                                                      description: URL of the credential
                                                      type: string
                                                      format: uri
                                              languages:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a language known to the
                                                    person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              skills:
                                                type: array
                                                items:
                                                  description: Describes a skill of the person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              tags:
                                                type: array
                                                items: *ref_10
                                          contact: &ref_12
                                            description: >-
                                              Describes the contact information of an
                                              entity
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              phone:
                                                type: string
                                              email:
                                                type: string
                                              jcard:
                                                type: object
                                                description: >-
                                                  A Jcard object as per
                                                  draft-ietf-jcardcal-jcard-03
                                                  specification
                                  agent:
                                    description: >-
                                      The agent that is currently handling the
                                      fulfillment of the order
                                    allOf:
                                      - description: >-
                                          Describes the direct performer, driver
                                          or executor that fulfills an order. It
                                          is usually a person. But in some rare
                                          cases, it could be a non-living entity
                                          like a drone, or a bot. Some examples of
                                          agents are Doctor in the healthcare
                                          sector, a driver in the mobility sector,
                                          or a delivery person in the logistics
                                          sector. This object can be set at any
                                          stage of the order lifecycle. This can
                                          be set at the discovery stage when the
                                          BPP wants to provide details on the
                                          agent fulfilling the order, like in
                                          healthcare, where the doctor's name
                                          appears during search. This object can
                                          also used to search for a particular
                                          person that the customer wants
                                          fulfilling an order. Sometimes, this
                                          object gets instantiated after the order
                                          is confirmed, like in the case of
                                          on-demand taxis, where the driver is
                                          assigned after the user confirms the
                                          ride.
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: *ref_11
                                          contact: *ref_12
                                          organization: &ref_20
                                            description: >-
                                              An organization. Usually a recognized
                                              business entity.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor: *ref_4
                                              address:
                                                description: The postal address of the organization
                                                allOf:
                                                  - *ref_13
                                              state:
                                                description: >-
                                                  The state where the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_14
                                              city:
                                                description: >-
                                                  The city where the the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_15
                                              contact: *ref_12
                                          rating: *ref_5
                                  contact: *ref_12
                                  vehicle:
                                    description: >-
                                      Describes a vehicle is a device that is
                                      designed or used to transport people or
                                      cargo over land, water, air, or through
                                      space.<br>This has properties like
                                      category, capacity, make, model,
                                      size,variant,color,energy_type,registration
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      category:
                                        type: string
                                      capacity:
                                        type: integer
                                      make:
                                        type: string
                                      model:
                                        type: string
                                      size:
                                        type: string
                                      variant:
                                        type: string
                                      color:
                                        type: string
                                      energy_type:
                                        type: string
                                      registration:
                                        type: string
                                      wheels_count:
                                        type: string
                                      cargo_volumne:
                                        type: string
                                      wheelchair_access:
                                        type: string
                                      code:
                                        type: string
                                      emission_standard:
                                        type: string
                                  stops:
                                    description: >-
                                      The list of logical stops encountered
                                      during the fulfillment of an order.
                                    type: array
                                    items:
                                      description: >-
                                        A logical point in space and time during
                                        the fulfillment of an order.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          type: string
                                        parent_stop_id:
                                          type: string
                                        location:
                                          description: Location of the stop
                                          allOf:
                                            - *ref_16
                                        type:
                                          description: >-
                                            The type of stop. Allowed values of this
                                            property can be defined by the network
                                            policy.
                                          type: string
                                        time:
                                          description: Timings applicable at the stop.
                                          allOf:
                                            - *ref_8
                                        instructions:
                                          description: >-
                                            Instructions that need to be followed at
                                            the stop
                                          allOf:
                                            - *ref_4
                                        contact:
                                          description: Contact details of the stop
                                          allOf:
                                            - *ref_12
                                        person:
                                          description: >-
                                            The details of the person present at the
                                            stop
                                          allOf:
                                            - *ref_11
                                        authorization:
                                          description: >-
                                            Describes an authorization mechanism
                                            used to start or end the fulfillment of
                                            an order. For example, in the mobility
                                            sector, the driver may require a
                                            one-time password to initiate the ride.
                                            In the healthcare sector, a patient may
                                            need to provide a password to open a
                                            video conference link during a
                                            teleconsultation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            type:
                                              description: >-
                                                Type of authorization mechanism used.
                                                The allowed values for this field can be
                                                published as part of the network policy.
                                              type: string
                                            token:
                                              description: >-
                                                Token used for authorization. This is
                                                typically generated at the BPP. The BAP
                                                can send this value to the user via any
                                                channel that it uses to authenticate the
                                                user like SMS, Email, Push notification,
                                                or in-app rendering.
                                              type: string
                                            valid_from:
                                              description: >-
                                                Timestamp in RFC3339 format from which
                                                token is valid
                                              type: string
                                              format: date-time
                                            valid_to:
                                              description: >-
                                                Timestamp in RFC3339 format until which
                                                token is valid
                                              type: string
                                              format: date-time
                                            status:
                                              description: Status of the token
                                              type: string
                                  path:
                                    description: >-
                                      The physical path taken by the agent that
                                      can be rendered on a map. The allowed
                                      format of this property can be set by the
                                      network.
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_10
                            payments:
                              type: array
                              items: &ref_29
                                description: >-
                                  Describes the terms of settlement between the
                                  BAP and the BPP for a single transaction. When
                                  instantiated, this object contains <ol><li>the
                                  amount that has to be settled,</li><li>The
                                  payment destination destination
                                  details</li><li>When the settlement should
                                  happen, and</li><li>A transaction reference
                                  ID</li></ol>. During a transaction, the BPP
                                  reserves the right to decide the terms of
                                  payment. However, the BAP can send its terms
                                  to the BPP first. If the BPP does not agree to
                                  those terms, it must overwrite the terms and
                                  return them to the BAP. If overridden, the BAP
                                  must either agree to the terms sent by the BPP
                                  in order to preserve the provider's autonomy,
                                  or abort the transaction. In case of such
                                  disagreements, the BAP and the BPP can perform
                                  offline negotiations on the payment terms.
                                  Once an agreement is reached, the BAP and BPP
                                  can resume transactions.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_23
                                    description: >-
                                      ID of the payment term that can be
                                      referred at an item or an order level in a
                                      catalog
                                    type: string
                                  collected_by:
                                    description: >-
                                      This field indicates who is the collector
                                      of payment. The BAP can set this value to
                                      'bap' if it wants to collect the payment
                                      first and  settle it to the BPP. If the
                                      BPP agrees to those terms, the BPP should
                                      not send the payment url. Alternatively,
                                      the BPP can set this field with the value
                                      'bpp' if it wants the payment to be made
                                      directly.
                                    type: string
                                  url:
                                    type: string
                                    description: >-
                                      A payment url to be called by the BAP. If
                                      empty, then the payment is to be done
                                      offline. The details of payment should be
                                      present in the params object. If tl_method
                                      = http/get, then the payment details will
                                      be sent as url params. Two url param
                                      values, ```$transaction_id``` and
                                      ```$amount``` are mandatory.
                                    format: uri
                                  tl_method:
                                    type: string
                                  params:
                                    type: object
                                    properties:
                                      transaction_id:
                                        type: string
                                        description: >-
                                          The reference transaction ID associated
                                          with a payment activity
                                      amount:
                                        type: string
                                      currency:
                                        type: string
                                      bank_code:
                                        type: string
                                      bank_account_number:
                                        type: string
                                      virtual_payment_address:
                                        type: string
                                      source_bank_code:
                                        type: string
                                      source_bank_account_number:
                                        type: string
                                      source_virtual_payment_address:
                                        type: string
                                  type:
                                    type: string
                                    enum:
                                      - PRE-ORDER
                                      - PRE-FULFILLMENT
                                      - ON-FULFILLMENT
                                      - POST-FULFILLMENT
                                      - ON-ORDER
                                  status:
                                    type: string
                                    enum:
                                      - PAID
                                      - NOT-PAID
                                  time: *ref_8
                                  tags:
                                    type: array
                                    items: *ref_10
                            locations:
                              type: array
                              items: *ref_16
                            offers:
                              type: array
                              items: &ref_31
                                description: >-
                                  An offer associated with a catalog. This is
                                  typically used to promote a particular product
                                  and enable more purchases.
                                type: object
                                additionalProperties: false
                                properties:
                                  id:
                                    type: string
                                  descriptor: *ref_4
                                  location_ids:
                                    type: array
                                    items: *ref_17
                                  category_ids:
                                    type: array
                                    items: *ref_7
                                  item_ids:
                                    type: array
                                    items: &ref_18
                                      description: ID of the item.
                                      type: string
                                  time: *ref_8
                                  tags:
                                    type: array
                                    items: *ref_10
                            items:
                              type: array
                              items: &ref_32
                                description: >-
                                  Describes a product or a service offered to
                                  the end consumer by the provider. In the
                                  mobility sector, it can represent a fare
                                  product like one way journey. In the logistics
                                  sector, it can represent the delivery service
                                  offering. In the retail domain it can
                                  represent a product like a grocery item.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: *ref_18
                                  parent_item_id:
                                    description: ID of the item, this item is a variant of
                                    allOf:
                                      - *ref_18
                                  parent_item_quantity:
                                    description: >-
                                      The number of units of the parent item
                                      this item is a multiple of
                                    allOf:
                                      - &ref_21
                                        description: Describes the count or amount of an item
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          allocated:
                                            description: >-
                                              This represents the exact quantity
                                              allocated for purchase of the item.
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_19
                                          available:
                                            description: >-
                                              This represents the exact quantity
                                              available for purchase of the item. The
                                              buyer can only purchase multiples of
                                              this
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_19
                                          maximum:
                                            description: >-
                                              This represents the maximum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                              measure: *ref_19
                                          minimum:
                                            description: >-
                                              This represents the minimum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_19
                                          selected:
                                            description: >-
                                              This represents the quantity selected
                                              for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_19
                                          unitized:
                                            description: >-
                                              This represents the quantity available
                                              in a single unit of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                                maximum: 1
                                              measure: *ref_19
                                  descriptor:
                                    description: Physical description of the item
                                    allOf:
                                      - *ref_4
                                  creator:
                                    description: The creator of this item
                                    allOf:
                                      - *ref_20
                                  price:
                                    description: >-
                                      The price of this item, if it has
                                      intrinsic value
                                    allOf:
                                      - &ref_24
                                        description: >-
                                          Describes the price of a product or
                                          service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          currency:
                                            type: string
                                          value: *ref_1
                                          estimated_value: *ref_1
                                          computed_value: *ref_1
                                          listed_value: *ref_1
                                          offered_value: *ref_1
                                          minimum_value: *ref_1
                                          maximum_value: *ref_1
                                  quantity:
                                    description: The selling quantity of the item
                                    allOf:
                                      - *ref_21
                                  category_ids:
                                    description: Categories this item can be listed under
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_7
                                  fulfillment_ids:
                                    description: >-
                                      Modes through which this item can be
                                      fulfilled
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_22
                                  location_ids:
                                    description: >-
                                      Provider Locations this item is available
                                      in
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_17
                                  payment_ids:
                                    description: >-
                                      Payment modalities through which this item
                                      can be ordered
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_23
                                  add_ons:
                                    type: array
                                    items:
                                      description: >-
                                        Describes an additional item offered as
                                        a value-addition to a product or
                                        service. This does not exist
                                        independently in a catalog and is always
                                        associated with an item.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          description: Provider-defined ID of the add-on
                                          type: string
                                        descriptor: *ref_4
                                        price: *ref_24
                                        quantity: *ref_21
                                  cancellation_terms:
                                    description: Cancellation terms of this item
                                    type: array
                                    items:
                                      description: >-
                                        Describes the cancellation terms of an
                                        item or an order. This can be referenced
                                        at an item or order level. Item-level
                                        cancellation terms can override the
                                        terms at the order level.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_25
                                        reason_required:
                                          description: >-
                                            Indicates whether a reason is required
                                            to cancel the order
                                          type: boolean
                                        cancel_by:
                                          description: >-
                                            Information related to the time of
                                            cancellation.
                                          allOf:
                                            - *ref_8
                                        cancellation_fee:
                                          description: A fee applied on a particular entity
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            percentage:
                                              description: Percentage of a value
                                              allOf:
                                                - *ref_1
                                            amount:
                                              description: A fixed value
                                              allOf:
                                                - *ref_24
                                        xinput: &ref_27
                                          description: >-
                                            Contains any additional or extended
                                            inputs required to confirm an order.
                                            This is typically a Form Input.
                                            Sometimes, selection of catalog elements
                                            is not enough for the BPP to confirm an
                                            order. For example, to confirm a flight
                                            ticket, the airline requires details of
                                            the passengers along with information on
                                            baggage, identity, in addition to the
                                            class of ticket. Similarly, a logistics
                                            company may require details on the
                                            nature of shipment in order to confirm
                                            the shipping. A recruiting firm may
                                            require additional details on the
                                            applicant in order to confirm a job
                                            application. For all such purposes, the
                                            BPP can choose to send this object
                                            attached to any object in the catalog
                                            that is required to be sent while
                                            placing the order. This object can
                                            typically be sent at an item level or at
                                            the order level. The item level XInput
                                            will override the Order level XInput as
                                            it indicates a special requirement of
                                            information for that particular item.
                                            Hence the BAP must render a separate
                                            form for the Item and another form at
                                            the Order level before confirmation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            form:
                                              description: Describes a form
                                              type: object
                                              additionalProperties: false
                                              properties:
                                                url:
                                                  description: >-
                                                    The URL from where the form can be
                                                    fetched. The content fetched from the
                                                    url must be processed as per the
                                                    mime_type specified in this object. Once
                                                    fetched, the rendering platform can
                                                    choosed to render the form as-is as an
                                                    embeddable element; or process it
                                                    further to blend with the theme of the
                                                    application. In case the interface is
                                                    non-visual, the the render can process
                                                    the form data and reproduce it as per
                                                    the standard specified in the form.
                                                  type: string
                                                  format: uri
                                                data:
                                                  description: The form submission data
                                                  type: object
                                                  additionalProperties:
                                                    type: string
                                                mime_type:
                                                  description: >-
                                                    This field indicates the nature and
                                                    format of the form received by querying
                                                    the url. MIME types are defined and
                                                    standardized in IETF's RFC 6838.
                                                  type: string
                                                  enum:
                                                    - text/html
                                                    - application/xml
                                                submission_id:
                                                  type: string
                                                  format: uuid
                                            required:
                                              description: >-
                                                Indicates whether the form data is
                                                mandatorily required by the BPP to
                                                confirm the order.
                                              type: boolean
                                        external_ref: *ref_26
                                  refund_terms:
                                    description: Refund terms of this item
                                    type: array
                                    items:
                                      description: Refund term of an item or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_14
                                        refund_eligible:
                                          description: >-
                                            Indicates if cancellation will result in
                                            a refund
                                          type: boolean
                                        refund_within:
                                          description: >-
                                            Time within which refund will be
                                            processed after successful cancellation.
                                          allOf:
                                            - *ref_8
                                        refund_amount: *ref_24
                                  replacement_terms:
                                    description: >-
                                      Terms that are applicable be met when this
                                      item is replaced
                                    type: array
                                    items:
                                      description: >-
                                        The replacement policy of an item or an
                                        order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_14
                                        replace_within:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to replace
                                            the item before a certain date-time,
                                            failing which they will not be eligible
                                            for replacement
                                          allOf:
                                            - *ref_8
                                        external_ref: *ref_26
                                  return_terms:
                                    description: >-
                                      Terms that are applicable when this item
                                      is returned
                                    type: array
                                    items:
                                      description: >-
                                        Describes the return policy of an item
                                        or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term IETF''s applicable.
                                          allOf:
                                            - *ref_14
                                        return_eligible:
                                          description: >-
                                            Indicates whether the item is eligible
                                            for return
                                          type: boolean
                                        return_time:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to return
                                            the item to the origin before a certain
                                            date-time, failing which they will not
                                            be eligible for refund.
                                          allOf:
                                            - *ref_8
                                        return_location:
                                          description: >-
                                            The location where the item or order
                                            must / will be returned to
                                          allOf:
                                            - *ref_16
                                        fulfillment_managed_by:
                                          description: The entity that will perform the return
                                          type: string
                                          enum:
                                            - CONSUMER
                                            - PROVIDER
                                  xinput:
                                    description: >-
                                      Additional input required from the
                                      customer to purchase / avail this item
                                    allOf:
                                      - *ref_27
                                  time:
                                    description: >-
                                      Temporal attributes of this item. This
                                      property is used when the item exists on
                                      the catalog only for a limited period of
                                      time.
                                    allOf:
                                      - *ref_8
                                  rateable:
                                    description: Whether this item can be rated
                                    type: boolean
                                  rating:
                                    description: The rating of the item
                                    allOf:
                                      - *ref_5
                                  matched:
                                    description: >-
                                      Whether this item is an exact match of the
                                      request
                                    type: boolean
                                  related:
                                    description: >-
                                      Whether this item is a related item to the
                                      exactly matched item
                                    type: boolean
                                  recommended:
                                    description: >-
                                      Whether this item is a recommended item to
                                      a response
                                    type: boolean
                                  ttl:
                                    description: >-
                                      Time to live in seconds for an instance of
                                      this schema
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_10
                            exp:
                              type: string
                              description: Time after which catalog has to be refreshed
                              format: date-time
                            rateable:
                              description: Whether this provider can be rated or not
                              type: boolean
                            ttl:
                              description: >-
                                The time-to-live in seconds, for this object.
                                This can be overriden at deeper levels. A value
                                of -1 indicates that this object is not
                                cacheable.
                              type: string
                            tags:
                              type: array
                              items: *ref_10
                    fulfillment:
                      description: Details on how the customer wants their order fulfilled
                      allOf:
                        - *ref_28
                    payment:
                      description: Details on how the customer wants to pay for the order
                      allOf:
                        - *ref_29
                    category:
                      description: Details on the item category
                      allOf:
                        - *ref_30
                    offer:
                      description: details on the offer the customer wants to avail
                      allOf:
                        - *ref_31
                    item:
                      description: Details of the item that the consumer wants to order
                      allOf:
                        - *ref_32
                    tags:
                      type: array
                      items: *ref_10
          required:
            - context
            - message
        on_search:
          type: object
          properties:
            context:
              allOf:
                - description: >-
                    Every API call in beckn protocol has a context. It provides
                    a high-level overview to the receiver about the nature of
                    the intended transaction. Typically, it is the BAP that sets
                    the transaction context based on the consumer's location and
                    action on their UI. But sometimes, during unsolicited
                    callbacks, the BPP also sets the transaction context but it
                    is usually the same as the context of a previous full-cycle,
                    request-callback interaction between the BAP and the BPP.
                    The context object contains four types of fields.
                    <ol><li>Demographic information about the transaction using
                    fields like `domain`, `country`, and
                    `region`.</li><li>Addressing details like the sending and
                    receiving platform's ID and API
                    URL.</li><li>Interoperability information like the protocol
                    version that implemented by the sender
                    and,</li><li>Transaction details like the method being
                    called at the receiver's endpoint, the transaction_id that
                    represents an end-to-end user session at the BAP, a message
                    ID to pair requests with callbacks, a timestamp to capture
                    sending times, a ttl to specifiy the validity of the
                    request, and a key to encrypt information if
                    necessary.</li></ol> This object must be passed in every
                    interaction between a BAP and a BPP. In HTTP/S
                    implementations, it is not necessary to send the context
                    during the synchronous response. However, in asynchronous
                    protocols, the context must be sent during all interactions,
                  type: object
                  additionalProperties: false
                  properties:
                    domain:
                      description: Domain code that is relevant to this transaction context
                      allOf:
                        - type: string
                          description: >-
                            Standard code representing the domain. The standard
                            is usually published as part of the network policy.
                            Furthermore, the network facilitator should also
                            provide a mechanism to provide the supported domains
                            of a network.
                    location:
                      description: >-
                        The location where the transaction is intended to be
                        fulfilled.
                      allOf:
                        - &ref_45
                          description: The physical location of something
                          type: object
                          additionalProperties: false
                          properties:
                            id: &ref_49
                              type: string
                            descriptor: &ref_37
                              description: Physical description of something.
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  type: string
                                code:
                                  type: string
                                short_desc:
                                  type: string
                                long_desc:
                                  type: string
                                additional_desc:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    content_type:
                                      type: string
                                      enum:
                                        - text/plain
                                        - text/html
                                        - application/json
                                media:
                                  type: array
                                  items: &ref_62
                                    description: >-
                                      This object contains a url to a media
                                      file.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      mimetype:
                                        description: >-
                                          indicates the nature and format of the
                                          document, file, or assortment of bytes.
                                          MIME types are defined and standardized
                                          in IETF's RFC 6838
                                        type: string
                                      url:
                                        description: The URL of the file
                                        type: string
                                        format: uri
                                      signature:
                                        description: >-
                                          The digital signature of the file signed
                                          by the sender
                                        type: string
                                      dsa:
                                        description: The signing algorithm used by the sender
                                        type: string
                                images:
                                  type: array
                                  items: &ref_39
                                    description: Describes an image
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      url:
                                        description: >-
                                          URL to the image. This can be a data url
                                          or an remote url
                                        type: string
                                        format: uri
                                      size_type:
                                        description: >-
                                          The size of the image. The network
                                          policy can define the default dimensions
                                          of each type
                                        type: string
                                        enum:
                                          - xs
                                          - sm
                                          - md
                                          - lg
                                          - xl
                                          - custom
                                      width:
                                        description: Width of the image in pixels
                                        type: string
                                      height:
                                        description: Height of the image in pixels
                                        type: string
                            map_url:
                              description: >-
                                The url to the map of the location. This can be
                                a globally recognized map url or the one
                                specified by the network policy.
                              type: string
                              format: uri
                            gps:
                              description: The GPS co-ordinates of this location.
                              allOf:
                                - &ref_33
                                  description: Describes a GPS coordinate
                                  type: string
                                  pattern: >-
                                    ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                            address:
                              description: The address of this location.
                              allOf:
                                - &ref_42
                                  description: Describes a postal address.
                                  type: string
                            city:
                              description: The city this location is, or is located within
                              allOf:
                                - &ref_44
                                  description: Describes a city
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      description: Name of the city
                                      type: string
                                    code:
                                      description: City code
                                      type: string
                            district:
                              description: The state this location is, or is located within
                              type: string
                            state:
                              description: The state this location is, or is located within
                              allOf:
                                - &ref_43
                                  description: >-
                                    A bounded geopolitical region of governance
                                    inside a country.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the state
                                    code:
                                      type: string
                                      description: >-
                                        State code as per country or
                                        international standards
                            country:
                              description: >-
                                The country this location is, or is located
                                within
                              allOf:
                                - description: Describes a country
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the country
                                    code:
                                      type: string
                                      description: >-
                                        Country code as per ISO 3166-1 and ISO
                                        3166-2 format
                            area_code:
                              type: string
                            circle:
                              description: >-
                                Describes a circular region of a specified
                                radius centered at a specified GPS coordinate.
                              type: object
                              additionalProperties: false
                              properties:
                                gps: *ref_33
                                radius: &ref_55
                                  description: Describes a scalar
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - CONSTANT
                                        - VARIABLE
                                    value: &ref_34
                                      description: >-
                                        Describes a numerical value in decimal
                                        form
                                      type: string
                                      pattern: '[+-]?([0-9]*[.])?[0-9]+'
                                    estimated_value: *ref_34
                                    computed_value: *ref_34
                                    range:
                                      type: object
                                      properties:
                                        min: *ref_34
                                        max: *ref_34
                                    unit:
                                      type: string
                            polygon:
                              description: The boundary polygon of this location
                              type: string
                            3dspace:
                              description: >-
                                The three dimensional region describing this
                                location
                              type: string
                            rating:
                              description: The rating of this location
                              allOf:
                                - &ref_38
                                  description: >-
                                    Rating value given to the object. This can
                                    be a single value or can also contain an
                                    inequality operator like gt, gte, lt, lte.
                                    This can also contain an inequality
                                    expression containing logical operators like
                                    && and ||.
                                  type: string
                    action:
                      description: >-
                        The Beckn protocol method being called by the sender and
                        executed at the receiver.
                      type: string
                    version:
                      type: string
                      description: >-
                        Version of transaction protocol being used by the
                        sender.
                    bap_id:
                      description: Subscriber ID of the BAP
                      allOf:
                        - &ref_35
                          description: >-
                            A globally unique identifier of the platform,
                            Typically it is the fully qualified domain name
                            (FQDN) of the platform.
                          type: string
                    bap_uri:
                      description: >-
                        Subscriber URL of the BAP for accepting callbacks from
                        BPPs.
                      allOf:
                        - &ref_36
                          description: >-
                            The callback URL of the Subscriber. This should
                            necessarily contain the same domain name as set in
                            `subscriber_id``.
                          type: string
                          format: uri
                    bpp_id:
                      description: Subscriber ID of the BPP
                      allOf:
                        - *ref_35
                    bpp_uri:
                      description: Subscriber URL of the BPP for accepting calls from BAPs.
                      allOf:
                        - *ref_36
                    transaction_id:
                      description: >-
                        This is a unique value which persists across all API
                        calls from `search` through `confirm`. This is done to
                        indicate an active user session across multiple
                        requests. The BPPs can use this value to push
                        personalized recommendations, and dynamic offerings
                        related to an ongoing transaction despite being unaware
                        of the user active on the BAP.
                      type: string
                      format: uuid
                    message_id:
                      description: >-
                        This is a unique value which persists during a request /
                        callback cycle. Since beckn protocol APIs are
                        asynchronous, BAPs need a common value to match an
                        incoming callback from a BPP to an earlier call. This
                        value can also be used to ignore duplicate messages
                        coming from the BPP. It is recommended to generate a
                        fresh message_id for every new interaction. When sending
                        unsolicited callbacks, BPPs must generate a new
                        message_id.
                      type: string
                      format: uuid
                    timestamp:
                      description: Time of request generation in RFC3339 format
                      type: string
                      format: date-time
                    key:
                      description: The encryption public key of the sender
                      type: string
                    ttl:
                      description: >-
                        The duration in ISO8601 format after timestamp for which
                        this message holds valid
                      type: string
                - type: object
                  properties:
                    action:
                      enum:
                        - on_search
                  required:
                    - action
            message:
              type: object
              properties:
                catalog:
                  description: >-
                    Describes the products or services offered by a BPP. This is
                    typically sent as the response to a search intent from a
                    BAP. The payment terms, offers and terms of fulfillment
                    supported by the BPP can also be included here. The BPP can
                    show hierarchical nature of products/services in its catalog
                    using the parent_category_id in categories. The BPP can also
                    send a ttl (time to live) in the context which is the
                    duration for which a BAP can cache the catalog and use the
                    cached catalog.  <br>This has properties like
                    bbp/descriptor,bbp/categories,bbp/fulfillments,bbp/payments,bbp/offers,bbp/providers
                    and exp<br>This is used in the following
                    situations.<br><ul><li>This is typically used in the
                    discovery stage when the BPP sends the details of the
                    products and services it offers as response to a search
                    intent from the BAP. </li></ul>
                  type: object
                  additionalProperties: false
                  properties:
                    descriptor: *ref_37
                    fulfillments:
                      description: >-
                        Fulfillment modes offered at the BPP level. This is used
                        when a BPP itself offers fulfillments on behalf of the
                        providers it has onboarded.
                      type: array
                      items: &ref_51
                        description: >-
                          Describes how a an order will be rendered/fulfilled to
                          the end-customer
                        type: object
                        additionalProperties: false
                        properties:
                          id: &ref_58
                            description: Unique reference ID to the fulfillment of an order
                            type: string
                          type:
                            description: >-
                              A code that describes the mode of fulfillment.
                              This is typically set when there are multiple ways
                              an order can be fulfilled. For example, a retail
                              order can be fulfilled either via store pickup or
                              a home delivery. Similarly, a medical consultation
                              can be provided either in-person or via
                              tele-consultation. The network policy must publish
                              standard fulfillment type codes for the different
                              modes of fulfillment.
                            type: string
                          rateable:
                            description: Whether the fulfillment can be rated or not
                            type: boolean
                          rating:
                            description: The rating value of the fulfullment service.
                            allOf:
                              - *ref_38
                          state:
                            description: >-
                              The current state of fulfillment. The BPP must set
                              this value whenever the state of the order
                              fulfillment changes and fire an unsolicited
                              `on_status` call.
                            allOf:
                              - &ref_61
                                description: Describes the state of fulfillment
                                type: object
                                additionalProperties: false
                                properties:
                                  descriptor: *ref_37
                                  updated_at:
                                    type: string
                                    format: date-time
                                  updated_by:
                                    type: string
                                    description: ID of entity which changed the state
                          tracking:
                            type: boolean
                            description: Indicates whether the fulfillment allows tracking
                            default: false
                          customer:
                            description: The person that will ultimately receive the order
                            allOf:
                              - description: >-
                                  Describes a customer buying/availing a product
                                  or a service
                                type: object
                                additionalProperties: false
                                properties:
                                  person: &ref_40
                                    description: Describes a person as any individual
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      id:
                                        type: string
                                        description: Describes the identity of the person
                                      url:
                                        description: Profile url of the person
                                        type: string
                                        format: uri
                                      name:
                                        description: the name of the person
                                        type: string
                                      image: *ref_39
                                      age:
                                        description: Age of the person
                                        allOf:
                                          - &ref_46
                                            description: Describes duration as per ISO8601 format
                                            type: string
                                      dob:
                                        description: Date of birth of the person
                                        type: string
                                        format: date
                                      gender:
                                        type: string
                                        description: >-
                                          Gender of something, typically a Person,
                                          but possibly also fictional characters,
                                          animals, etc. While Male and Female may
                                          be used, text strings are also
                                          acceptable for people who do not
                                          identify as a binary gender.Allowed
                                          values for this field can be published
                                          in the network policy
                                      creds:
                                        type: array
                                        items:
                                          description: >-
                                            Describes a credential of an entity -
                                            Person or Organization
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            id:
                                              type: string
                                            type:
                                              type: string
                                              default: VerifiableCredential
                                            url:
                                              description: URL of the credential
                                              type: string
                                              format: uri
                                      languages:
                                        type: array
                                        items:
                                          description: >-
                                            Describes a language known to the
                                            person.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            code:
                                              type: string
                                            name:
                                              type: string
                                      skills:
                                        type: array
                                        items:
                                          description: Describes a skill of the person.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            code:
                                              type: string
                                            name:
                                              type: string
                                      tags:
                                        type: array
                                        items: &ref_47
                                          description: >-
                                            A collection of tag objects with group
                                            level attributes. For detailed
                                            documentation on the Tags and Tag Groups
                                            schema go to
                                            https://github.com/beckn/protocol-specifications/discussions/316
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            display:
                                              description: >-
                                                Indicates the display properties of the
                                                tag group. If display is set to false,
                                                then the group will not be displayed. If
                                                it is set to true, it should be
                                                displayed. However, group-level display
                                                properties can be overriden by
                                                individual tag-level display property.
                                                As this schema is purely for catalog
                                                display purposes, it is not recommended
                                                to send this value during search.
                                              type: boolean
                                              default: true
                                            descriptor:
                                              description: >-
                                                Description of the TagGroup, can be used
                                                to store detailed information.
                                              allOf:
                                                - *ref_37
                                            list:
                                              description: >-
                                                An array of Tag objects listed under
                                                this group. This property can be set by
                                                BAPs during search to narrow the
                                                `search` and achieve more relevant
                                                results. When received during
                                                `on_search`, BAPs must render this list
                                                under the heading described by the
                                                `name` property of this schema.
                                              type: array
                                              items:
                                                description: >-
                                                  Describes a tag. This is used to contain
                                                  extended metadata. This object can be
                                                  added as a property to any schema to
                                                  describe extended attributes. For BAPs,
                                                  tags can be sent during search to
                                                  optimize and filter search results. BPPs
                                                  can use tags to index their catalog to
                                                  allow better search functionality. Tags
                                                  are sent by the BPP as part of the
                                                  catalog response in the `on_search`
                                                  callback. Tags are also meant for
                                                  display purposes. Upon receiving a tag,
                                                  BAPs are meant to render them as
                                                  name-value pairs. This is particularly
                                                  useful when rendering tabular
                                                  information about a product or service.
                                                type: object
                                                additionalProperties: false
                                                properties:
                                                  descriptor:
                                                    description: >-
                                                      Description of the Tag, can be used to
                                                      store detailed information.
                                                    allOf:
                                                      - *ref_37
                                                  value:
                                                    description: >-
                                                      The value of the tag. This set by the
                                                      BPP and rendered as-is by the BAP.
                                                    type: string
                                                  display:
                                                    description: >-
                                                      This value indicates if the tag is
                                                      intended for display purposes. If set to
                                                      `true`, then this tag must be displayed.
                                                      If it is set to `false`, it should not
                                                      be displayed. This value can override
                                                      the group display value.
                                                    type: boolean
                                  contact: &ref_41
                                    description: >-
                                      Describes the contact information of an
                                      entity
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      phone:
                                        type: string
                                      email:
                                        type: string
                                      jcard:
                                        type: object
                                        description: >-
                                          A Jcard object as per
                                          draft-ietf-jcardcal-jcard-03
                                          specification
                          agent:
                            description: >-
                              The agent that is currently handling the
                              fulfillment of the order
                            allOf:
                              - description: >-
                                  Describes the direct performer, driver or
                                  executor that fulfills an order. It is usually
                                  a person. But in some rare cases, it could be
                                  a non-living entity like a drone, or a bot.
                                  Some examples of agents are Doctor in the
                                  healthcare sector, a driver in the mobility
                                  sector, or a delivery person in the logistics
                                  sector. This object can be set at any stage of
                                  the order lifecycle. This can be set at the
                                  discovery stage when the BPP wants to provide
                                  details on the agent fulfilling the order,
                                  like in healthcare, where the doctor's name
                                  appears during search. This object can also
                                  used to search for a particular person that
                                  the customer wants fulfilling an order.
                                  Sometimes, this object gets instantiated after
                                  the order is confirmed, like in the case of
                                  on-demand taxis, where the driver is assigned
                                  after the user confirms the ride.
                                type: object
                                additionalProperties: false
                                properties:
                                  person: *ref_40
                                  contact: *ref_41
                                  organization: &ref_56
                                    description: >-
                                      An organization. Usually a recognized
                                      business entity.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      descriptor: *ref_37
                                      address:
                                        description: The postal address of the organization
                                        allOf:
                                          - *ref_42
                                      state:
                                        description: >-
                                          The state where the organization's
                                          address is registered
                                        allOf:
                                          - *ref_43
                                      city:
                                        description: >-
                                          The city where the the organization's
                                          address is registered
                                        allOf:
                                          - *ref_44
                                      contact: *ref_41
                                  rating: *ref_38
                          contact: *ref_41
                          vehicle:
                            description: >-
                              Describes a vehicle is a device that is designed
                              or used to transport people or cargo over land,
                              water, air, or through space.<br>This has
                              properties like category, capacity, make, model,
                              size,variant,color,energy_type,registration
                            type: object
                            additionalProperties: false
                            properties:
                              category:
                                type: string
                              capacity:
                                type: integer
                              make:
                                type: string
                              model:
                                type: string
                              size:
                                type: string
                              variant:
                                type: string
                              color:
                                type: string
                              energy_type:
                                type: string
                              registration:
                                type: string
                              wheels_count:
                                type: string
                              cargo_volumne:
                                type: string
                              wheelchair_access:
                                type: string
                              code:
                                type: string
                              emission_standard:
                                type: string
                          stops:
                            description: >-
                              The list of logical stops encountered during the
                              fulfillment of an order.
                            type: array
                            items:
                              description: >-
                                A logical point in space and time during the
                                fulfillment of an order.
                              type: object
                              additionalProperties: false
                              properties:
                                id:
                                  type: string
                                parent_stop_id:
                                  type: string
                                location:
                                  description: Location of the stop
                                  allOf:
                                    - *ref_45
                                type:
                                  description: >-
                                    The type of stop. Allowed values of this
                                    property can be defined by the network
                                    policy.
                                  type: string
                                time:
                                  description: Timings applicable at the stop.
                                  allOf:
                                    - &ref_48
                                      description: >-
                                        Describes time in its various forms. It
                                        can be a single point in time; duration;
                                        or a structured timetable of
                                        operations<br>This has properties like
                                        label, time stamp,duration,range, days,
                                        schedule
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        label:
                                          type: string
                                        timestamp:
                                          type: string
                                          format: date-time
                                        duration: *ref_46
                                        range:
                                          type: object
                                          properties:
                                            start:
                                              type: string
                                              format: date-time
                                            end:
                                              type: string
                                              format: date-time
                                        days:
                                          type: string
                                          description: >-
                                            comma separated values representing days
                                            of the week
                                        schedule:
                                          description: >-
                                            Describes schedule as a repeating time
                                            period used to describe a regularly
                                            recurring event. At a minimum a schedule
                                            will specify frequency which describes
                                            the interval between occurrences of the
                                            event. Additional information can be
                                            provided to specify the schedule more
                                            precisely. This includes identifying the
                                            timestamps(s) of when the event will
                                            take place. Schedules may also have
                                            holidays to exclude a specific day from
                                            the schedule.<br>This has properties
                                            like frequency, holidays, times
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            frequency: *ref_46
                                            holidays:
                                              type: array
                                              items:
                                                type: string
                                                format: date-time
                                            times:
                                              type: array
                                              items:
                                                type: string
                                                format: date-time
                                instructions:
                                  description: >-
                                    Instructions that need to be followed at the
                                    stop
                                  allOf:
                                    - *ref_37
                                contact:
                                  description: Contact details of the stop
                                  allOf:
                                    - *ref_41
                                person:
                                  description: >-
                                    The details of the person present at the
                                    stop
                                  allOf:
                                    - *ref_40
                                authorization:
                                  description: >-
                                    Describes an authorization mechanism used to
                                    start or end the fulfillment of an order.
                                    For example, in the mobility sector, the
                                    driver may require a one-time password to
                                    initiate the ride. In the healthcare sector,
                                    a patient may need to provide a password to
                                    open a video conference link during a
                                    teleconsultation.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      description: >-
                                        Type of authorization mechanism used.
                                        The allowed values for this field can be
                                        published as part of the network policy.
                                      type: string
                                    token:
                                      description: >-
                                        Token used for authorization. This is
                                        typically generated at the BPP. The BAP
                                        can send this value to the user via any
                                        channel that it uses to authenticate the
                                        user like SMS, Email, Push notification,
                                        or in-app rendering.
                                      type: string
                                    valid_from:
                                      description: >-
                                        Timestamp in RFC3339 format from which
                                        token is valid
                                      type: string
                                      format: date-time
                                    valid_to:
                                      description: >-
                                        Timestamp in RFC3339 format until which
                                        token is valid
                                      type: string
                                      format: date-time
                                    status:
                                      description: Status of the token
                                      type: string
                          path:
                            description: >-
                              The physical path taken by the agent that can be
                              rendered on a map. The allowed format of this
                              property can be set by the network.
                            type: string
                          tags:
                            type: array
                            items: *ref_47
                    payments:
                      description: >-
                        Payment terms offered by the BPP for all transactions.
                        This can be overriden at the provider level.
                      type: array
                      items: &ref_52
                        description: >-
                          Describes the terms of settlement between the BAP and
                          the BPP for a single transaction. When instantiated,
                          this object contains <ol><li>the amount that has to be
                          settled,</li><li>The payment destination destination
                          details</li><li>When the settlement should happen,
                          and</li><li>A transaction reference ID</li></ol>.
                          During a transaction, the BPP reserves the right to
                          decide the terms of payment. However, the BAP can send
                          its terms to the BPP first. If the BPP does not agree
                          to those terms, it must overwrite the terms and return
                          them to the BAP. If overridden, the BAP must either
                          agree to the terms sent by the BPP in order to
                          preserve the provider's autonomy, or abort the
                          transaction. In case of such disagreements, the BAP
                          and the BPP can perform offline negotiations on the
                          payment terms. Once an agreement is reached, the BAP
                          and BPP can resume transactions.
                        type: object
                        additionalProperties: false
                        properties:
                          id: &ref_59
                            description: >-
                              ID of the payment term that can be referred at an
                              item or an order level in a catalog
                            type: string
                          collected_by:
                            description: >-
                              This field indicates who is the collector of
                              payment. The BAP can set this value to 'bap' if it
                              wants to collect the payment first and  settle it
                              to the BPP. If the BPP agrees to those terms, the
                              BPP should not send the payment url.
                              Alternatively, the BPP can set this field with the
                              value 'bpp' if it wants the payment to be made
                              directly.
                            type: string
                          url:
                            type: string
                            description: >-
                              A payment url to be called by the BAP. If empty,
                              then the payment is to be done offline. The
                              details of payment should be present in the params
                              object. If tl_method = http/get, then the payment
                              details will be sent as url params. Two url param
                              values, ```$transaction_id``` and ```$amount```
                              are mandatory.
                            format: uri
                          tl_method:
                            type: string
                          params:
                            type: object
                            properties:
                              transaction_id:
                                type: string
                                description: >-
                                  The reference transaction ID associated with a
                                  payment activity
                              amount:
                                type: string
                              currency:
                                type: string
                              bank_code:
                                type: string
                              bank_account_number:
                                type: string
                              virtual_payment_address:
                                type: string
                              source_bank_code:
                                type: string
                              source_bank_account_number:
                                type: string
                              source_virtual_payment_address:
                                type: string
                          type:
                            type: string
                            enum:
                              - PRE-ORDER
                              - PRE-FULFILLMENT
                              - ON-FULFILLMENT
                              - POST-FULFILLMENT
                              - ON-ORDER
                          status:
                            type: string
                            enum:
                              - PAID
                              - NOT-PAID
                          time: *ref_48
                          tags:
                            type: array
                            items: *ref_47
                    offers:
                      description: >-
                        Offers at the BPP-level. This is common across all
                        providers onboarded by the BPP.
                      type: array
                      items: &ref_53
                        description: >-
                          An offer associated with a catalog. This is typically
                          used to promote a particular product and enable more
                          purchases.
                        type: object
                        additionalProperties: false
                        properties:
                          id:
                            type: string
                          descriptor: *ref_37
                          location_ids:
                            type: array
                            items: *ref_49
                          category_ids:
                            type: array
                            items: &ref_50
                              description: ID of the category
                              type: string
                          item_ids:
                            type: array
                            items: &ref_54
                              description: ID of the item.
                              type: string
                          time: *ref_48
                          tags:
                            type: array
                            items: *ref_47
                    providers:
                      type: array
                      items:
                        description: Describes the catalog of a business.
                        type: object
                        properties:
                          id:
                            type: string
                            description: Id of the provider
                          descriptor: *ref_37
                          category_id:
                            type: string
                            description: >-
                              Category Id of the provider at the BPP-level
                              catalog
                          rating: *ref_38
                          time: *ref_48
                          categories:
                            type: array
                            items:
                              description: >-
                                A label under which a collection of items can be
                                grouped.
                              type: object
                              additionalProperties: false
                              properties:
                                id: *ref_50
                                parent_category_id: *ref_50
                                descriptor: *ref_37
                                time: *ref_48
                                ttl:
                                  description: Time to live for an instance of this schema
                                tags:
                                  type: array
                                  items: *ref_47
                          fulfillments:
                            type: array
                            items: *ref_51
                          payments:
                            type: array
                            items: *ref_52
                          locations:
                            type: array
                            items: *ref_45
                          offers:
                            type: array
                            items: *ref_53
                          items:
                            type: array
                            items:
                              description: >-
                                Describes a product or a service offered to the
                                end consumer by the provider. In the mobility
                                sector, it can represent a fare product like one
                                way journey. In the logistics sector, it can
                                represent the delivery service offering. In the
                                retail domain it can represent a product like a
                                grocery item.
                              type: object
                              additionalProperties: false
                              properties:
                                id: *ref_54
                                parent_item_id:
                                  description: ID of the item, this item is a variant of
                                  allOf:
                                    - *ref_54
                                parent_item_quantity:
                                  description: >-
                                    The number of units of the parent item this
                                    item is a multiple of
                                  allOf:
                                    - &ref_57
                                      description: Describes the count or amount of an item
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        allocated:
                                          description: >-
                                            This represents the exact quantity
                                            allocated for purchase of the item.
                                          type: object
                                          properties:
                                            count:
                                              type: integer
                                              minimum: 0
                                            measure: *ref_55
                                        available:
                                          description: >-
                                            This represents the exact quantity
                                            available for purchase of the item. The
                                            buyer can only purchase multiples of
                                            this
                                          type: object
                                          properties:
                                            count:
                                              type: integer
                                              minimum: 0
                                            measure: *ref_55
                                        maximum:
                                          description: >-
                                            This represents the maximum quantity
                                            allowed for purchase of the item
                                          type: object
                                          properties:
                                            count:
                                              type: integer
                                              minimum: 1
                                            measure: *ref_55
                                        minimum:
                                          description: >-
                                            This represents the minimum quantity
                                            allowed for purchase of the item
                                          type: object
                                          properties:
                                            count:
                                              type: integer
                                              minimum: 0
                                            measure: *ref_55
                                        selected:
                                          description: >-
                                            This represents the quantity selected
                                            for purchase of the item
                                          type: object
                                          properties:
                                            count:
                                              type: integer
                                              minimum: 0
                                            measure: *ref_55
                                        unitized:
                                          description: >-
                                            This represents the quantity available
                                            in a single unit of the item
                                          type: object
                                          properties:
                                            count:
                                              type: integer
                                              minimum: 1
                                              maximum: 1
                                            measure: *ref_55
                                descriptor:
                                  description: Physical description of the item
                                  allOf:
                                    - *ref_37
                                creator:
                                  description: The creator of this item
                                  allOf:
                                    - *ref_56
                                price:
                                  description: >-
                                    The price of this item, if it has intrinsic
                                    value
                                  allOf:
                                    - &ref_60
                                      description: >-
                                        Describes the price of a product or
                                        service
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        currency:
                                          type: string
                                        value: *ref_34
                                        estimated_value: *ref_34
                                        computed_value: *ref_34
                                        listed_value: *ref_34
                                        offered_value: *ref_34
                                        minimum_value: *ref_34
                                        maximum_value: *ref_34
                                quantity:
                                  description: The selling quantity of the item
                                  allOf:
                                    - *ref_57
                                category_ids:
                                  description: Categories this item can be listed under
                                  type: array
                                  items:
                                    allOf:
                                      - *ref_50
                                fulfillment_ids:
                                  description: >-
                                    Modes through which this item can be
                                    fulfilled
                                  type: array
                                  items:
                                    allOf:
                                      - *ref_58
                                location_ids:
                                  description: Provider Locations this item is available in
                                  type: array
                                  items:
                                    allOf:
                                      - *ref_49
                                payment_ids:
                                  description: >-
                                    Payment modalities through which this item
                                    can be ordered
                                  type: array
                                  items:
                                    allOf:
                                      - *ref_59
                                add_ons:
                                  type: array
                                  items:
                                    description: >-
                                      Describes an additional item offered as a
                                      value-addition to a product or service.
                                      This does not exist independently in a
                                      catalog and is always associated with an
                                      item.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      id:
                                        description: Provider-defined ID of the add-on
                                        type: string
                                      descriptor: *ref_37
                                      price: *ref_60
                                      quantity: *ref_57
                                cancellation_terms:
                                  description: Cancellation terms of this item
                                  type: array
                                  items:
                                    description: >-
                                      Describes the cancellation terms of an
                                      item or an order. This can be referenced
                                      at an item or order level. Item-level
                                      cancellation terms can override the terms
                                      at the order level.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      fulfillment_state:
                                        description: >-
                                          The state of fulfillment during which
                                          this term is applicable.
                                        allOf:
                                          - *ref_61
                                      reason_required:
                                        description: >-
                                          Indicates whether a reason is required
                                          to cancel the order
                                        type: boolean
                                      cancel_by:
                                        description: >-
                                          Information related to the time of
                                          cancellation.
                                        allOf:
                                          - *ref_48
                                      cancellation_fee:
                                        description: A fee applied on a particular entity
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          percentage:
                                            description: Percentage of a value
                                            allOf:
                                              - *ref_34
                                          amount:
                                            description: A fixed value
                                            allOf:
                                              - *ref_60
                                      xinput: &ref_63
                                        description: >-
                                          Contains any additional or extended
                                          inputs required to confirm an order.
                                          This is typically a Form Input.
                                          Sometimes, selection of catalog elements
                                          is not enough for the BPP to confirm an
                                          order. For example, to confirm a flight
                                          ticket, the airline requires details of
                                          the passengers along with information on
                                          baggage, identity, in addition to the
                                          class of ticket. Similarly, a logistics
                                          company may require details on the
                                          nature of shipment in order to confirm
                                          the shipping. A recruiting firm may
                                          require additional details on the
                                          applicant in order to confirm a job
                                          application. For all such purposes, the
                                          BPP can choose to send this object
                                          attached to any object in the catalog
                                          that is required to be sent while
                                          placing the order. This object can
                                          typically be sent at an item level or at
                                          the order level. The item level XInput
                                          will override the Order level XInput as
                                          it indicates a special requirement of
                                          information for that particular item.
                                          Hence the BAP must render a separate
                                          form for the Item and another form at
                                          the Order level before confirmation.
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          form:
                                            description: Describes a form
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              url:
                                                description: >-
                                                  The URL from where the form can be
                                                  fetched. The content fetched from the
                                                  url must be processed as per the
                                                  mime_type specified in this object. Once
                                                  fetched, the rendering platform can
                                                  choosed to render the form as-is as an
                                                  embeddable element; or process it
                                                  further to blend with the theme of the
                                                  application. In case the interface is
                                                  non-visual, the the render can process
                                                  the form data and reproduce it as per
                                                  the standard specified in the form.
                                                type: string
                                                format: uri
                                              data:
                                                description: The form submission data
                                                type: object
                                                additionalProperties:
                                                  type: string
                                              mime_type:
                                                description: >-
                                                  This field indicates the nature and
                                                  format of the form received by querying
                                                  the url. MIME types are defined and
                                                  standardized in IETF's RFC 6838.
                                                type: string
                                                enum:
                                                  - text/html
                                                  - application/xml
                                              submission_id:
                                                type: string
                                                format: uuid
                                          required:
                                            description: >-
                                              Indicates whether the form data is
                                              mandatorily required by the BPP to
                                              confirm the order.
                                            type: boolean
                                      external_ref: *ref_62
                                refund_terms:
                                  description: Refund terms of this item
                                  type: array
                                  items:
                                    description: Refund term of an item or an order
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      fulfillment_state:
                                        description: >-
                                          The state of fulfillment during which
                                          this term is applicable.
                                        allOf:
                                          - *ref_43
                                      refund_eligible:
                                        description: >-
                                          Indicates if cancellation will result in
                                          a refund
                                        type: boolean
                                      refund_within:
                                        description: >-
                                          Time within which refund will be
                                          processed after successful cancellation.
                                        allOf:
                                          - *ref_48
                                      refund_amount: *ref_60
                                replacement_terms:
                                  description: >-
                                    Terms that are applicable be met when this
                                    item is replaced
                                  type: array
                                  items:
                                    description: >-
                                      The replacement policy of an item or an
                                      order
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      fulfillment_state:
                                        description: >-
                                          The state of fulfillment during which
                                          this term is applicable.
                                        allOf:
                                          - *ref_43
                                      replace_within:
                                        description: >-
                                          Applicable only for buyer managed
                                          returns where the buyer has to replace
                                          the item before a certain date-time,
                                          failing which they will not be eligible
                                          for replacement
                                        allOf:
                                          - *ref_48
                                      external_ref: *ref_62
                                return_terms:
                                  description: >-
                                    Terms that are applicable when this item is
                                    returned
                                  type: array
                                  items:
                                    description: >-
                                      Describes the return policy of an item or
                                      an order
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      fulfillment_state:
                                        description: >-
                                          The state of fulfillment during which
                                          this term IETF''s applicable.
                                        allOf:
                                          - *ref_43
                                      return_eligible:
                                        description: >-
                                          Indicates whether the item is eligible
                                          for return
                                        type: boolean
                                      return_time:
                                        description: >-
                                          Applicable only for buyer managed
                                          returns where the buyer has to return
                                          the item to the origin before a certain
                                          date-time, failing which they will not
                                          be eligible for refund.
                                        allOf:
                                          - *ref_48
                                      return_location:
                                        description: >-
                                          The location where the item or order
                                          must / will be returned to
                                        allOf:
                                          - *ref_45
                                      fulfillment_managed_by:
                                        description: The entity that will perform the return
                                        type: string
                                        enum:
                                          - CONSUMER
                                          - PROVIDER
                                xinput:
                                  description: >-
                                    Additional input required from the customer
                                    to purchase / avail this item
                                  allOf:
                                    - *ref_63
                                time:
                                  description: >-
                                    Temporal attributes of this item. This
                                    property is used when the item exists on the
                                    catalog only for a limited period of time.
                                  allOf:
                                    - *ref_48
                                rateable:
                                  description: Whether this item can be rated
                                  type: boolean
                                rating:
                                  description: The rating of the item
                                  allOf:
                                    - *ref_38
                                matched:
                                  description: >-
                                    Whether this item is an exact match of the
                                    request
                                  type: boolean
                                related:
                                  description: >-
                                    Whether this item is a related item to the
                                    exactly matched item
                                  type: boolean
                                recommended:
                                  description: >-
                                    Whether this item is a recommended item to a
                                    response
                                  type: boolean
                                ttl:
                                  description: >-
                                    Time to live in seconds for an instance of
                                    this schema
                                  type: string
                                tags:
                                  type: array
                                  items: *ref_47
                          exp:
                            type: string
                            description: Time after which catalog has to be refreshed
                            format: date-time
                          rateable:
                            description: Whether this provider can be rated or not
                            type: boolean
                          ttl:
                            description: >-
                              The time-to-live in seconds, for this object. This
                              can be overriden at deeper levels. A value of -1
                              indicates that this object is not cacheable.
                            type: string
                          tags:
                            type: array
                            items: *ref_47
                    exp:
                      description: Timestamp after which catalog will expire
                      type: string
                      format: date-time
                    ttl:
                      description: Duration in seconds after which this catalog will expire
                      type: string
              required:
                - catalog
            error:
              description: >-
                Describes an error object that is returned by a BAP, BPP or BG
                as a response or callback to an action by another network
                participant. This object is sent when any request received by a
                network participant is unacceptable. This object can be sent
                either during Ack or with the callback.
              type: object
              additionalProperties: false
              properties:
                code:
                  type: string
                  description: >-
                    Standard error code. For full list of error codes, refer to
                    docs/protocol-drafts/BECKN-005-ERROR-CODES-DRAFT-01.md of
                    this repo"
                paths:
                  type: string
                  description: >-
                    Path to json schema generating the error. Used only during
                    json schema validation errors
                message:
                  type: string
                  description: >-
                    Human readable message describing the error. Used mainly for
                    logging. Not recommended to be shown to the user.
          required:
            - context
        select:
          type: object
          properties:
            context:
              allOf:
                - description: >-
                    Every API call in beckn protocol has a context. It provides
                    a high-level overview to the receiver about the nature of
                    the intended transaction. Typically, it is the BAP that sets
                    the transaction context based on the consumer's location and
                    action on their UI. But sometimes, during unsolicited
                    callbacks, the BPP also sets the transaction context but it
                    is usually the same as the context of a previous full-cycle,
                    request-callback interaction between the BAP and the BPP.
                    The context object contains four types of fields.
                    <ol><li>Demographic information about the transaction using
                    fields like `domain`, `country`, and
                    `region`.</li><li>Addressing details like the sending and
                    receiving platform's ID and API
                    URL.</li><li>Interoperability information like the protocol
                    version that implemented by the sender
                    and,</li><li>Transaction details like the method being
                    called at the receiver's endpoint, the transaction_id that
                    represents an end-to-end user session at the BAP, a message
                    ID to pair requests with callbacks, a timestamp to capture
                    sending times, a ttl to specifiy the validity of the
                    request, and a key to encrypt information if
                    necessary.</li></ol> This object must be passed in every
                    interaction between a BAP and a BPP. In HTTP/S
                    implementations, it is not necessary to send the context
                    during the synchronous response. However, in asynchronous
                    protocols, the context must be sent during all interactions,
                  type: object
                  additionalProperties: false
                  properties:
                    domain:
                      description: Domain code that is relevant to this transaction context
                      allOf:
                        - type: string
                          description: >-
                            Standard code representing the domain. The standard
                            is usually published as part of the network policy.
                            Furthermore, the network facilitator should also
                            provide a mechanism to provide the supported domains
                            of a network.
                    location:
                      description: >-
                        The location where the transaction is intended to be
                        fulfilled.
                      allOf:
                        - &ref_80
                          description: The physical location of something
                          type: object
                          additionalProperties: false
                          properties:
                            id: &ref_81
                              type: string
                            descriptor: &ref_68
                              description: Physical description of something.
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  type: string
                                code:
                                  type: string
                                short_desc:
                                  type: string
                                long_desc:
                                  type: string
                                additional_desc:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    content_type:
                                      type: string
                                      enum:
                                        - text/plain
                                        - text/html
                                        - application/json
                                media:
                                  type: array
                                  items: &ref_90
                                    description: >-
                                      This object contains a url to a media
                                      file.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      mimetype:
                                        description: >-
                                          indicates the nature and format of the
                                          document, file, or assortment of bytes.
                                          MIME types are defined and standardized
                                          in IETF's RFC 6838
                                        type: string
                                      url:
                                        description: The URL of the file
                                        type: string
                                        format: uri
                                      signature:
                                        description: >-
                                          The digital signature of the file signed
                                          by the sender
                                        type: string
                                      dsa:
                                        description: The signing algorithm used by the sender
                                        type: string
                                images:
                                  type: array
                                  items: &ref_73
                                    description: Describes an image
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      url:
                                        description: >-
                                          URL to the image. This can be a data url
                                          or an remote url
                                        type: string
                                        format: uri
                                      size_type:
                                        description: >-
                                          The size of the image. The network
                                          policy can define the default dimensions
                                          of each type
                                        type: string
                                        enum:
                                          - xs
                                          - sm
                                          - md
                                          - lg
                                          - xl
                                          - custom
                                      width:
                                        description: Width of the image in pixels
                                        type: string
                                      height:
                                        description: Height of the image in pixels
                                        type: string
                            map_url:
                              description: >-
                                The url to the map of the location. This can be
                                a globally recognized map url or the one
                                specified by the network policy.
                              type: string
                              format: uri
                            gps:
                              description: The GPS co-ordinates of this location.
                              allOf:
                                - &ref_64
                                  description: Describes a GPS coordinate
                                  type: string
                                  pattern: >-
                                    ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                            address:
                              description: The address of this location.
                              allOf:
                                - &ref_77
                                  description: Describes a postal address.
                                  type: string
                            city:
                              description: The city this location is, or is located within
                              allOf:
                                - &ref_79
                                  description: Describes a city
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      description: Name of the city
                                      type: string
                                    code:
                                      description: City code
                                      type: string
                            district:
                              description: The state this location is, or is located within
                              type: string
                            state:
                              description: The state this location is, or is located within
                              allOf:
                                - &ref_78
                                  description: >-
                                    A bounded geopolitical region of governance
                                    inside a country.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the state
                                    code:
                                      type: string
                                      description: >-
                                        State code as per country or
                                        international standards
                            country:
                              description: >-
                                The country this location is, or is located
                                within
                              allOf:
                                - description: Describes a country
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the country
                                    code:
                                      type: string
                                      description: >-
                                        Country code as per ISO 3166-1 and ISO
                                        3166-2 format
                            area_code:
                              type: string
                            circle:
                              description: >-
                                Describes a circular region of a specified
                                radius centered at a specified GPS coordinate.
                              type: object
                              additionalProperties: false
                              properties:
                                gps: *ref_64
                                radius: &ref_83
                                  description: Describes a scalar
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - CONSTANT
                                        - VARIABLE
                                    value: &ref_65
                                      description: >-
                                        Describes a numerical value in decimal
                                        form
                                      type: string
                                      pattern: '[+-]?([0-9]*[.])?[0-9]+'
                                    estimated_value: *ref_65
                                    computed_value: *ref_65
                                    range:
                                      type: object
                                      properties:
                                        min: *ref_65
                                        max: *ref_65
                                    unit:
                                      type: string
                            polygon:
                              description: The boundary polygon of this location
                              type: string
                            3dspace:
                              description: >-
                                The three dimensional region describing this
                                location
                              type: string
                            rating:
                              description: The rating of this location
                              allOf:
                                - &ref_69
                                  description: >-
                                    Rating value given to the object. This can
                                    be a single value or can also contain an
                                    inequality operator like gt, gte, lt, lte.
                                    This can also contain an inequality
                                    expression containing logical operators like
                                    && and ||.
                                  type: string
                    action:
                      description: >-
                        The Beckn protocol method being called by the sender and
                        executed at the receiver.
                      type: string
                    version:
                      type: string
                      description: >-
                        Version of transaction protocol being used by the
                        sender.
                    bap_id:
                      description: Subscriber ID of the BAP
                      allOf:
                        - &ref_66
                          description: >-
                            A globally unique identifier of the platform,
                            Typically it is the fully qualified domain name
                            (FQDN) of the platform.
                          type: string
                    bap_uri:
                      description: >-
                        Subscriber URL of the BAP for accepting callbacks from
                        BPPs.
                      allOf:
                        - &ref_67
                          description: >-
                            The callback URL of the Subscriber. This should
                            necessarily contain the same domain name as set in
                            `subscriber_id``.
                          type: string
                          format: uri
                    bpp_id:
                      description: Subscriber ID of the BPP
                      allOf:
                        - *ref_66
                    bpp_uri:
                      description: Subscriber URL of the BPP for accepting calls from BAPs.
                      allOf:
                        - *ref_67
                    transaction_id:
                      description: >-
                        This is a unique value which persists across all API
                        calls from `search` through `confirm`. This is done to
                        indicate an active user session across multiple
                        requests. The BPPs can use this value to push
                        personalized recommendations, and dynamic offerings
                        related to an ongoing transaction despite being unaware
                        of the user active on the BAP.
                      type: string
                      format: uuid
                    message_id:
                      description: >-
                        This is a unique value which persists during a request /
                        callback cycle. Since beckn protocol APIs are
                        asynchronous, BAPs need a common value to match an
                        incoming callback from a BPP to an earlier call. This
                        value can also be used to ignore duplicate messages
                        coming from the BPP. It is recommended to generate a
                        fresh message_id for every new interaction. When sending
                        unsolicited callbacks, BPPs must generate a new
                        message_id.
                      type: string
                      format: uuid
                    timestamp:
                      description: Time of request generation in RFC3339 format
                      type: string
                      format: date-time
                    key:
                      description: The encryption public key of the sender
                      type: string
                    ttl:
                      description: >-
                        The duration in ISO8601 format after timestamp for which
                        this message holds valid
                      type: string
                - type: object
                  properties:
                    action:
                      enum:
                        - select
                  required:
                    - action
            message:
              type: object
              properties:
                order:
                  description: >-
                    Describes a legal purchase order. It contains the complete
                    details of the legal contract created between the buyer and
                    the seller.
                  type: object
                  additionalProperties: false
                  properties:
                    id:
                      type: string
                      description: >-
                        Human-readable ID of the order. This is generated at the
                        BPP layer. The BPP can either generate order id within
                        its system or forward the order ID created at the
                        provider level.
                    ref_order_ids:
                      description: >-
                        A list of order IDs to link this order to previous
                        orders.
                      type: array
                      items:
                        type: string
                        description: ID of a previous order
                    status:
                      description: >-
                        Status of the order. Allowed values can be defined by
                        the network policy
                      type: string
                    type:
                      description: >-
                        This is used to indicate the type of order being created
                        to BPPs. Sometimes orders can be linked to previous
                        orders, like a replacement order in a retail domain. A
                        follow-up consultation in healthcare domain. A single
                        order part of a subscription order. The list of order
                        types can be standardized at the network level.
                      type: string
                      default: DEFAULT
                      enum:
                        - DRAFT
                        - DEFAULT
                    provider:
                      description: >-
                        Details of the provider whose catalog items have been
                        selected.
                      allOf:
                        - description: Describes the catalog of a business.
                          type: object
                          properties:
                            id:
                              type: string
                              description: Id of the provider
                            descriptor: *ref_68
                            category_id:
                              type: string
                              description: >-
                                Category Id of the provider at the BPP-level
                                catalog
                            rating: *ref_69
                            time: &ref_72
                              description: >-
                                Describes time in its various forms. It can be a
                                single point in time; duration; or a structured
                                timetable of operations<br>This has properties
                                like label, time stamp,duration,range, days,
                                schedule
                              type: object
                              additionalProperties: false
                              properties:
                                label:
                                  type: string
                                timestamp:
                                  type: string
                                  format: date-time
                                duration: &ref_70
                                  description: Describes duration as per ISO8601 format
                                  type: string
                                range:
                                  type: object
                                  properties:
                                    start:
                                      type: string
                                      format: date-time
                                    end:
                                      type: string
                                      format: date-time
                                days:
                                  type: string
                                  description: >-
                                    comma separated values representing days of
                                    the week
                                schedule:
                                  description: >-
                                    Describes schedule as a repeating time
                                    period used to describe a regularly
                                    recurring event. At a minimum a schedule
                                    will specify frequency which describes the
                                    interval between occurrences of the event.
                                    Additional information can be provided to
                                    specify the schedule more precisely. This
                                    includes identifying the timestamps(s) of
                                    when the event will take place. Schedules
                                    may also have holidays to exclude a specific
                                    day from the schedule.<br>This has
                                    properties like frequency, holidays, times
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    frequency: *ref_70
                                    holidays:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                                    times:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                            categories:
                              type: array
                              items:
                                description: >-
                                  A label under which a collection of items can
                                  be grouped.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_71
                                    description: ID of the category
                                    type: string
                                  parent_category_id: *ref_71
                                  descriptor: *ref_68
                                  time: *ref_72
                                  ttl:
                                    description: >-
                                      Time to live for an instance of this
                                      schema
                                  tags:
                                    type: array
                                    items: &ref_74
                                      description: >-
                                        A collection of tag objects with group
                                        level attributes. For detailed
                                        documentation on the Tags and Tag Groups
                                        schema go to
                                        https://github.com/beckn/protocol-specifications/discussions/316
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        display:
                                          description: >-
                                            Indicates the display properties of the
                                            tag group. If display is set to false,
                                            then the group will not be displayed. If
                                            it is set to true, it should be
                                            displayed. However, group-level display
                                            properties can be overriden by
                                            individual tag-level display property.
                                            As this schema is purely for catalog
                                            display purposes, it is not recommended
                                            to send this value during search.
                                          type: boolean
                                          default: true
                                        descriptor:
                                          description: >-
                                            Description of the TagGroup, can be used
                                            to store detailed information.
                                          allOf:
                                            - *ref_68
                                        list:
                                          description: >-
                                            An array of Tag objects listed under
                                            this group. This property can be set by
                                            BAPs during search to narrow the
                                            `search` and achieve more relevant
                                            results. When received during
                                            `on_search`, BAPs must render this list
                                            under the heading described by the
                                            `name` property of this schema.
                                          type: array
                                          items:
                                            description: >-
                                              Describes a tag. This is used to contain
                                              extended metadata. This object can be
                                              added as a property to any schema to
                                              describe extended attributes. For BAPs,
                                              tags can be sent during search to
                                              optimize and filter search results. BPPs
                                              can use tags to index their catalog to
                                              allow better search functionality. Tags
                                              are sent by the BPP as part of the
                                              catalog response in the `on_search`
                                              callback. Tags are also meant for
                                              display purposes. Upon receiving a tag,
                                              BAPs are meant to render them as
                                              name-value pairs. This is particularly
                                              useful when rendering tabular
                                              information about a product or service.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor:
                                                description: >-
                                                  Description of the Tag, can be used to
                                                  store detailed information.
                                                allOf:
                                                  - *ref_68
                                              value:
                                                description: >-
                                                  The value of the tag. This set by the
                                                  BPP and rendered as-is by the BAP.
                                                type: string
                                              display:
                                                description: >-
                                                  This value indicates if the tag is
                                                  intended for display purposes. If set to
                                                  `true`, then this tag must be displayed.
                                                  If it is set to `false`, it should not
                                                  be displayed. This value can override
                                                  the group display value.
                                                type: boolean
                            fulfillments:
                              type: array
                              items: &ref_95
                                description: >-
                                  Describes how a an order will be
                                  rendered/fulfilled to the end-customer
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_86
                                    description: >-
                                      Unique reference ID to the fulfillment of
                                      an order
                                    type: string
                                  type:
                                    description: >-
                                      A code that describes the mode of
                                      fulfillment. This is typically set when
                                      there are multiple ways an order can be
                                      fulfilled. For example, a retail order can
                                      be fulfilled either via store pickup or a
                                      home delivery. Similarly, a medical
                                      consultation can be provided either
                                      in-person or via tele-consultation. The
                                      network policy must publish standard
                                      fulfillment type codes for the different
                                      modes of fulfillment.
                                    type: string
                                  rateable:
                                    description: >-
                                      Whether the fulfillment can be rated or
                                      not
                                    type: boolean
                                  rating:
                                    description: >-
                                      The rating value of the fulfullment
                                      service.
                                    allOf:
                                      - *ref_69
                                  state:
                                    description: >-
                                      The current state of fulfillment. The BPP
                                      must set this value whenever the state of
                                      the order fulfillment changes and fire an
                                      unsolicited `on_status` call.
                                    allOf:
                                      - &ref_89
                                        description: Describes the state of fulfillment
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          descriptor: *ref_68
                                          updated_at:
                                            type: string
                                            format: date-time
                                          updated_by:
                                            type: string
                                            description: ID of entity which changed the state
                                  tracking:
                                    type: boolean
                                    description: >-
                                      Indicates whether the fulfillment allows
                                      tracking
                                    default: false
                                  customer:
                                    description: >-
                                      The person that will ultimately receive
                                      the order
                                    allOf:
                                      - description: >-
                                          Describes a customer buying/availing a
                                          product or a service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: &ref_75
                                            description: Describes a person as any individual
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              id:
                                                type: string
                                                description: Describes the identity of the person
                                              url:
                                                description: Profile url of the person
                                                type: string
                                                format: uri
                                              name:
                                                description: the name of the person
                                                type: string
                                              image: *ref_73
                                              age:
                                                description: Age of the person
                                                allOf:
                                                  - *ref_70
                                              dob:
                                                description: Date of birth of the person
                                                type: string
                                                format: date
                                              gender:
                                                type: string
                                                description: >-
                                                  Gender of something, typically a Person,
                                                  but possibly also fictional characters,
                                                  animals, etc. While Male and Female may
                                                  be used, text strings are also
                                                  acceptable for people who do not
                                                  identify as a binary gender.Allowed
                                                  values for this field can be published
                                                  in the network policy
                                              creds:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a credential of an entity -
                                                    Person or Organization
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    id:
                                                      type: string
                                                    type:
                                                      type: string
                                                      default: VerifiableCredential
                                                    url:
                                                      description: URL of the credential
                                                      type: string
                                                      format: uri
                                              languages:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a language known to the
                                                    person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              skills:
                                                type: array
                                                items:
                                                  description: Describes a skill of the person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              tags:
                                                type: array
                                                items: *ref_74
                                          contact: &ref_76
                                            description: >-
                                              Describes the contact information of an
                                              entity
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              phone:
                                                type: string
                                              email:
                                                type: string
                                              jcard:
                                                type: object
                                                description: >-
                                                  A Jcard object as per
                                                  draft-ietf-jcardcal-jcard-03
                                                  specification
                                  agent:
                                    description: >-
                                      The agent that is currently handling the
                                      fulfillment of the order
                                    allOf:
                                      - description: >-
                                          Describes the direct performer, driver
                                          or executor that fulfills an order. It
                                          is usually a person. But in some rare
                                          cases, it could be a non-living entity
                                          like a drone, or a bot. Some examples of
                                          agents are Doctor in the healthcare
                                          sector, a driver in the mobility sector,
                                          or a delivery person in the logistics
                                          sector. This object can be set at any
                                          stage of the order lifecycle. This can
                                          be set at the discovery stage when the
                                          BPP wants to provide details on the
                                          agent fulfilling the order, like in
                                          healthcare, where the doctor's name
                                          appears during search. This object can
                                          also used to search for a particular
                                          person that the customer wants
                                          fulfilling an order. Sometimes, this
                                          object gets instantiated after the order
                                          is confirmed, like in the case of
                                          on-demand taxis, where the driver is
                                          assigned after the user confirms the
                                          ride.
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: *ref_75
                                          contact: *ref_76
                                          organization: &ref_84
                                            description: >-
                                              An organization. Usually a recognized
                                              business entity.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor: *ref_68
                                              address:
                                                description: The postal address of the organization
                                                allOf:
                                                  - *ref_77
                                              state:
                                                description: >-
                                                  The state where the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_78
                                              city:
                                                description: >-
                                                  The city where the the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_79
                                              contact: *ref_76
                                          rating: *ref_69
                                  contact: *ref_76
                                  vehicle:
                                    description: >-
                                      Describes a vehicle is a device that is
                                      designed or used to transport people or
                                      cargo over land, water, air, or through
                                      space.<br>This has properties like
                                      category, capacity, make, model,
                                      size,variant,color,energy_type,registration
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      category:
                                        type: string
                                      capacity:
                                        type: integer
                                      make:
                                        type: string
                                      model:
                                        type: string
                                      size:
                                        type: string
                                      variant:
                                        type: string
                                      color:
                                        type: string
                                      energy_type:
                                        type: string
                                      registration:
                                        type: string
                                      wheels_count:
                                        type: string
                                      cargo_volumne:
                                        type: string
                                      wheelchair_access:
                                        type: string
                                      code:
                                        type: string
                                      emission_standard:
                                        type: string
                                  stops:
                                    description: >-
                                      The list of logical stops encountered
                                      during the fulfillment of an order.
                                    type: array
                                    items:
                                      description: >-
                                        A logical point in space and time during
                                        the fulfillment of an order.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          type: string
                                        parent_stop_id:
                                          type: string
                                        location:
                                          description: Location of the stop
                                          allOf:
                                            - *ref_80
                                        type:
                                          description: >-
                                            The type of stop. Allowed values of this
                                            property can be defined by the network
                                            policy.
                                          type: string
                                        time:
                                          description: Timings applicable at the stop.
                                          allOf:
                                            - *ref_72
                                        instructions:
                                          description: >-
                                            Instructions that need to be followed at
                                            the stop
                                          allOf:
                                            - *ref_68
                                        contact:
                                          description: Contact details of the stop
                                          allOf:
                                            - *ref_76
                                        person:
                                          description: >-
                                            The details of the person present at the
                                            stop
                                          allOf:
                                            - *ref_75
                                        authorization:
                                          description: >-
                                            Describes an authorization mechanism
                                            used to start or end the fulfillment of
                                            an order. For example, in the mobility
                                            sector, the driver may require a
                                            one-time password to initiate the ride.
                                            In the healthcare sector, a patient may
                                            need to provide a password to open a
                                            video conference link during a
                                            teleconsultation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            type:
                                              description: >-
                                                Type of authorization mechanism used.
                                                The allowed values for this field can be
                                                published as part of the network policy.
                                              type: string
                                            token:
                                              description: >-
                                                Token used for authorization. This is
                                                typically generated at the BPP. The BAP
                                                can send this value to the user via any
                                                channel that it uses to authenticate the
                                                user like SMS, Email, Push notification,
                                                or in-app rendering.
                                              type: string
                                            valid_from:
                                              description: >-
                                                Timestamp in RFC3339 format from which
                                                token is valid
                                              type: string
                                              format: date-time
                                            valid_to:
                                              description: >-
                                                Timestamp in RFC3339 format until which
                                                token is valid
                                              type: string
                                              format: date-time
                                            status:
                                              description: Status of the token
                                              type: string
                                  path:
                                    description: >-
                                      The physical path taken by the agent that
                                      can be rendered on a map. The allowed
                                      format of this property can be set by the
                                      network.
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_74
                            payments:
                              type: array
                              items: &ref_100
                                description: >-
                                  Describes the terms of settlement between the
                                  BAP and the BPP for a single transaction. When
                                  instantiated, this object contains <ol><li>the
                                  amount that has to be settled,</li><li>The
                                  payment destination destination
                                  details</li><li>When the settlement should
                                  happen, and</li><li>A transaction reference
                                  ID</li></ol>. During a transaction, the BPP
                                  reserves the right to decide the terms of
                                  payment. However, the BAP can send its terms
                                  to the BPP first. If the BPP does not agree to
                                  those terms, it must overwrite the terms and
                                  return them to the BAP. If overridden, the BAP
                                  must either agree to the terms sent by the BPP
                                  in order to preserve the provider's autonomy,
                                  or abort the transaction. In case of such
                                  disagreements, the BAP and the BPP can perform
                                  offline negotiations on the payment terms.
                                  Once an agreement is reached, the BAP and BPP
                                  can resume transactions.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_87
                                    description: >-
                                      ID of the payment term that can be
                                      referred at an item or an order level in a
                                      catalog
                                    type: string
                                  collected_by:
                                    description: >-
                                      This field indicates who is the collector
                                      of payment. The BAP can set this value to
                                      'bap' if it wants to collect the payment
                                      first and  settle it to the BPP. If the
                                      BPP agrees to those terms, the BPP should
                                      not send the payment url. Alternatively,
                                      the BPP can set this field with the value
                                      'bpp' if it wants the payment to be made
                                      directly.
                                    type: string
                                  url:
                                    type: string
                                    description: >-
                                      A payment url to be called by the BAP. If
                                      empty, then the payment is to be done
                                      offline. The details of payment should be
                                      present in the params object. If tl_method
                                      = http/get, then the payment details will
                                      be sent as url params. Two url param
                                      values, ```$transaction_id``` and
                                      ```$amount``` are mandatory.
                                    format: uri
                                  tl_method:
                                    type: string
                                  params:
                                    type: object
                                    properties:
                                      transaction_id:
                                        type: string
                                        description: >-
                                          The reference transaction ID associated
                                          with a payment activity
                                      amount:
                                        type: string
                                      currency:
                                        type: string
                                      bank_code:
                                        type: string
                                      bank_account_number:
                                        type: string
                                      virtual_payment_address:
                                        type: string
                                      source_bank_code:
                                        type: string
                                      source_bank_account_number:
                                        type: string
                                      source_virtual_payment_address:
                                        type: string
                                  type:
                                    type: string
                                    enum:
                                      - PRE-ORDER
                                      - PRE-FULFILLMENT
                                      - ON-FULFILLMENT
                                      - POST-FULFILLMENT
                                      - ON-ORDER
                                  status:
                                    type: string
                                    enum:
                                      - PAID
                                      - NOT-PAID
                                  time: *ref_72
                                  tags:
                                    type: array
                                    items: *ref_74
                            locations:
                              type: array
                              items: *ref_80
                            offers:
                              type: array
                              items: &ref_94
                                description: >-
                                  An offer associated with a catalog. This is
                                  typically used to promote a particular product
                                  and enable more purchases.
                                type: object
                                additionalProperties: false
                                properties:
                                  id:
                                    type: string
                                  descriptor: *ref_68
                                  location_ids:
                                    type: array
                                    items: *ref_81
                                  category_ids:
                                    type: array
                                    items: *ref_71
                                  item_ids:
                                    type: array
                                    items: &ref_82
                                      description: ID of the item.
                                      type: string
                                  time: *ref_72
                                  tags:
                                    type: array
                                    items: *ref_74
                            items:
                              type: array
                              items: &ref_92
                                description: >-
                                  Describes a product or a service offered to
                                  the end consumer by the provider. In the
                                  mobility sector, it can represent a fare
                                  product like one way journey. In the logistics
                                  sector, it can represent the delivery service
                                  offering. In the retail domain it can
                                  represent a product like a grocery item.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: *ref_82
                                  parent_item_id:
                                    description: ID of the item, this item is a variant of
                                    allOf:
                                      - *ref_82
                                  parent_item_quantity:
                                    description: >-
                                      The number of units of the parent item
                                      this item is a multiple of
                                    allOf:
                                      - &ref_85
                                        description: Describes the count or amount of an item
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          allocated:
                                            description: >-
                                              This represents the exact quantity
                                              allocated for purchase of the item.
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_83
                                          available:
                                            description: >-
                                              This represents the exact quantity
                                              available for purchase of the item. The
                                              buyer can only purchase multiples of
                                              this
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_83
                                          maximum:
                                            description: >-
                                              This represents the maximum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                              measure: *ref_83
                                          minimum:
                                            description: >-
                                              This represents the minimum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_83
                                          selected:
                                            description: >-
                                              This represents the quantity selected
                                              for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_83
                                          unitized:
                                            description: >-
                                              This represents the quantity available
                                              in a single unit of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                                maximum: 1
                                              measure: *ref_83
                                  descriptor:
                                    description: Physical description of the item
                                    allOf:
                                      - *ref_68
                                  creator:
                                    description: The creator of this item
                                    allOf:
                                      - *ref_84
                                  price:
                                    description: >-
                                      The price of this item, if it has
                                      intrinsic value
                                    allOf:
                                      - &ref_88
                                        description: >-
                                          Describes the price of a product or
                                          service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          currency:
                                            type: string
                                          value: *ref_65
                                          estimated_value: *ref_65
                                          computed_value: *ref_65
                                          listed_value: *ref_65
                                          offered_value: *ref_65
                                          minimum_value: *ref_65
                                          maximum_value: *ref_65
                                  quantity:
                                    description: The selling quantity of the item
                                    allOf:
                                      - *ref_85
                                  category_ids:
                                    description: Categories this item can be listed under
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_71
                                  fulfillment_ids:
                                    description: >-
                                      Modes through which this item can be
                                      fulfilled
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_86
                                  location_ids:
                                    description: >-
                                      Provider Locations this item is available
                                      in
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_81
                                  payment_ids:
                                    description: >-
                                      Payment modalities through which this item
                                      can be ordered
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_87
                                  add_ons:
                                    type: array
                                    items: &ref_93
                                      description: >-
                                        Describes an additional item offered as
                                        a value-addition to a product or
                                        service. This does not exist
                                        independently in a catalog and is always
                                        associated with an item.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          description: Provider-defined ID of the add-on
                                          type: string
                                        descriptor: *ref_68
                                        price: *ref_88
                                        quantity: *ref_85
                                  cancellation_terms:
                                    description: Cancellation terms of this item
                                    type: array
                                    items: &ref_96
                                      description: >-
                                        Describes the cancellation terms of an
                                        item or an order. This can be referenced
                                        at an item or order level. Item-level
                                        cancellation terms can override the
                                        terms at the order level.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_89
                                        reason_required:
                                          description: >-
                                            Indicates whether a reason is required
                                            to cancel the order
                                          type: boolean
                                        cancel_by:
                                          description: >-
                                            Information related to the time of
                                            cancellation.
                                          allOf:
                                            - *ref_72
                                        cancellation_fee:
                                          description: A fee applied on a particular entity
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            percentage:
                                              description: Percentage of a value
                                              allOf:
                                                - *ref_65
                                            amount:
                                              description: A fixed value
                                              allOf:
                                                - *ref_88
                                        xinput: &ref_91
                                          description: >-
                                            Contains any additional or extended
                                            inputs required to confirm an order.
                                            This is typically a Form Input.
                                            Sometimes, selection of catalog elements
                                            is not enough for the BPP to confirm an
                                            order. For example, to confirm a flight
                                            ticket, the airline requires details of
                                            the passengers along with information on
                                            baggage, identity, in addition to the
                                            class of ticket. Similarly, a logistics
                                            company may require details on the
                                            nature of shipment in order to confirm
                                            the shipping. A recruiting firm may
                                            require additional details on the
                                            applicant in order to confirm a job
                                            application. For all such purposes, the
                                            BPP can choose to send this object
                                            attached to any object in the catalog
                                            that is required to be sent while
                                            placing the order. This object can
                                            typically be sent at an item level or at
                                            the order level. The item level XInput
                                            will override the Order level XInput as
                                            it indicates a special requirement of
                                            information for that particular item.
                                            Hence the BAP must render a separate
                                            form for the Item and another form at
                                            the Order level before confirmation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            form:
                                              description: Describes a form
                                              type: object
                                              additionalProperties: false
                                              properties:
                                                url:
                                                  description: >-
                                                    The URL from where the form can be
                                                    fetched. The content fetched from the
                                                    url must be processed as per the
                                                    mime_type specified in this object. Once
                                                    fetched, the rendering platform can
                                                    choosed to render the form as-is as an
                                                    embeddable element; or process it
                                                    further to blend with the theme of the
                                                    application. In case the interface is
                                                    non-visual, the the render can process
                                                    the form data and reproduce it as per
                                                    the standard specified in the form.
                                                  type: string
                                                  format: uri
                                                data:
                                                  description: The form submission data
                                                  type: object
                                                  additionalProperties:
                                                    type: string
                                                mime_type:
                                                  description: >-
                                                    This field indicates the nature and
                                                    format of the form received by querying
                                                    the url. MIME types are defined and
                                                    standardized in IETF's RFC 6838.
                                                  type: string
                                                  enum:
                                                    - text/html
                                                    - application/xml
                                                submission_id:
                                                  type: string
                                                  format: uuid
                                            required:
                                              description: >-
                                                Indicates whether the form data is
                                                mandatorily required by the BPP to
                                                confirm the order.
                                              type: boolean
                                        external_ref: *ref_90
                                  refund_terms:
                                    description: Refund terms of this item
                                    type: array
                                    items: &ref_97
                                      description: Refund term of an item or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_78
                                        refund_eligible:
                                          description: >-
                                            Indicates if cancellation will result in
                                            a refund
                                          type: boolean
                                        refund_within:
                                          description: >-
                                            Time within which refund will be
                                            processed after successful cancellation.
                                          allOf:
                                            - *ref_72
                                        refund_amount: *ref_88
                                  replacement_terms:
                                    description: >-
                                      Terms that are applicable be met when this
                                      item is replaced
                                    type: array
                                    items: &ref_98
                                      description: >-
                                        The replacement policy of an item or an
                                        order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_78
                                        replace_within:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to replace
                                            the item before a certain date-time,
                                            failing which they will not be eligible
                                            for replacement
                                          allOf:
                                            - *ref_72
                                        external_ref: *ref_90
                                  return_terms:
                                    description: >-
                                      Terms that are applicable when this item
                                      is returned
                                    type: array
                                    items: &ref_99
                                      description: >-
                                        Describes the return policy of an item
                                        or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term IETF''s applicable.
                                          allOf:
                                            - *ref_78
                                        return_eligible:
                                          description: >-
                                            Indicates whether the item is eligible
                                            for return
                                          type: boolean
                                        return_time:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to return
                                            the item to the origin before a certain
                                            date-time, failing which they will not
                                            be eligible for refund.
                                          allOf:
                                            - *ref_72
                                        return_location:
                                          description: >-
                                            The location where the item or order
                                            must / will be returned to
                                          allOf:
                                            - *ref_80
                                        fulfillment_managed_by:
                                          description: The entity that will perform the return
                                          type: string
                                          enum:
                                            - CONSUMER
                                            - PROVIDER
                                  xinput:
                                    description: >-
                                      Additional input required from the
                                      customer to purchase / avail this item
                                    allOf:
                                      - *ref_91
                                  time:
                                    description: >-
                                      Temporal attributes of this item. This
                                      property is used when the item exists on
                                      the catalog only for a limited period of
                                      time.
                                    allOf:
                                      - *ref_72
                                  rateable:
                                    description: Whether this item can be rated
                                    type: boolean
                                  rating:
                                    description: The rating of the item
                                    allOf:
                                      - *ref_69
                                  matched:
                                    description: >-
                                      Whether this item is an exact match of the
                                      request
                                    type: boolean
                                  related:
                                    description: >-
                                      Whether this item is a related item to the
                                      exactly matched item
                                    type: boolean
                                  recommended:
                                    description: >-
                                      Whether this item is a recommended item to
                                      a response
                                    type: boolean
                                  ttl:
                                    description: >-
                                      Time to live in seconds for an instance of
                                      this schema
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_74
                            exp:
                              type: string
                              description: Time after which catalog has to be refreshed
                              format: date-time
                            rateable:
                              description: Whether this provider can be rated or not
                              type: boolean
                            ttl:
                              description: >-
                                The time-to-live in seconds, for this object.
                                This can be overriden at deeper levels. A value
                                of -1 indicates that this object is not
                                cacheable.
                              type: string
                            tags:
                              type: array
                              items: *ref_74
                    items:
                      description: The items purchased / availed in this order
                      type: array
                      items: *ref_92
                    add_ons:
                      description: The add-ons purchased / availed in this order
                      type: array
                      items: *ref_93
                    offers:
                      description: The offers applied in this order
                      type: array
                      items: *ref_94
                    billing:
                      description: The billing details of this order
                      allOf:
                        - description: >-
                            Describes the billing details of an entity.<br>This
                            has properties like
                            name,organization,address,email,phone,time,tax_number,
                            created_at,updated_at
                          type: object
                          additionalProperties: false
                          properties:
                            name:
                              description: Name of the billable entity
                              type: string
                            organization:
                              description: Details of the organization being billed.
                              allOf:
                                - *ref_84
                            address:
                              description: The address of the billable entity
                              allOf:
                                - *ref_77
                            state:
                              description: >-
                                The state where the billable entity resides.
                                This is important for state-level tax
                                calculation
                              allOf:
                                - *ref_78
                            city:
                              description: The city where the billable entity resides.
                              allOf:
                                - *ref_79
                            email:
                              description: Email address where the bill is sent to
                              type: string
                              format: email
                            phone:
                              description: Phone number of the billable entity
                              type: string
                            time:
                              description: Details regarding the billing period
                              allOf:
                                - *ref_72
                            tax_id:
                              description: >-
                                ID of the billable entity as recognized by the
                                taxation authority
                              type: string
                    fulfillments:
                      description: The fulfillments involved in completing this order
                      type: array
                      items: *ref_95
                    cancellation:
                      description: The cancellation details of this order
                      allOf:
                        - description: Describes a cancellation event
                          type: object
                          additionalProperties: false
                          properties:
                            time:
                              description: >-
                                Date-time when the order was cancelled by the
                                buyer
                              type: string
                              format: date-time
                            cancelled_by:
                              type: string
                              enum:
                                - CONSUMER
                                - PROVIDER
                            reason:
                              description: The reason for cancellation
                              allOf:
                                - description: Describes a selectable option
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    id:
                                      type: string
                                    descriptor: *ref_68
                            additional_description:
                              description: >-
                                Any additional information regarding the nature
                                of cancellation
                              allOf:
                                - *ref_68
                    cancellation_terms:
                      description: Cancellation terms of this item
                      type: array
                      items: *ref_96
                    documents:
                      type: array
                      items:
                        description: Documnents associated to the order
                        type: object
                        additionalProperties: false
                        properties:
                          descriptor: *ref_68
                          mime_type:
                            description: >-
                              This field indicates the nature and format of the
                              form received by querying the url. MIME types are
                              defined and standardized in IETF's RFC 6838.
                            type: string
                            enum:
                              - text/html
                              - application/html
                              - application/xml
                              - application/pdf
                          url:
                            description: >-
                              The URL from where the form can be fetched. The
                              content fetched from the url must be processed as
                              per the mime_type specified in this object.
                            type: string
                            format: uri
                    refund_terms:
                      description: Refund terms of this item
                      type: array
                      items: *ref_97
                    replacement_terms:
                      description: Replacement terms of this item
                      type: array
                      items: *ref_98
                    return_terms:
                      description: Return terms of this item
                      type: array
                      items: *ref_99
                    quote:
                      description: The mutually agreed upon quotation for this order.
                      allOf:
                        - description: >-
                            Describes a quote. It is the estimated price of
                            products or services from the BPP.<br>This has
                            properties like price, breakup, ttl
                          type: object
                          additionalProperties: false
                          properties:
                            id:
                              description: ID of the quote.
                              type: string
                              format: uuid
                            price:
                              description: The total quoted price
                              allOf:
                                - *ref_88
                            breakup:
                              description: the breakup of the total quoted price
                              type: array
                              items:
                                type: object
                                properties:
                                  item: *ref_92
                                  title:
                                    type: string
                                  price: *ref_88
                            ttl: *ref_70
                    payments:
                      description: The terms of settlement for this order
                      type: array
                      items: *ref_100
                    created_at:
                      description: The date-time of creation of this order
                      type: string
                      format: date-time
                    updated_at:
                      description: The date-time of updated of this order
                      type: string
                      format: date-time
                    xinput:
                      description: >-
                        Additional input required from the customer to confirm
                        this order
                      allOf:
                        - *ref_91
                    tags:
                      type: array
                      items: *ref_74
              required:
                - order
          required:
            - context
            - message
        on_select:
          type: object
          properties:
            context:
              allOf:
                - description: >-
                    Every API call in beckn protocol has a context. It provides
                    a high-level overview to the receiver about the nature of
                    the intended transaction. Typically, it is the BAP that sets
                    the transaction context based on the consumer's location and
                    action on their UI. But sometimes, during unsolicited
                    callbacks, the BPP also sets the transaction context but it
                    is usually the same as the context of a previous full-cycle,
                    request-callback interaction between the BAP and the BPP.
                    The context object contains four types of fields.
                    <ol><li>Demographic information about the transaction using
                    fields like `domain`, `country`, and
                    `region`.</li><li>Addressing details like the sending and
                    receiving platform's ID and API
                    URL.</li><li>Interoperability information like the protocol
                    version that implemented by the sender
                    and,</li><li>Transaction details like the method being
                    called at the receiver's endpoint, the transaction_id that
                    represents an end-to-end user session at the BAP, a message
                    ID to pair requests with callbacks, a timestamp to capture
                    sending times, a ttl to specifiy the validity of the
                    request, and a key to encrypt information if
                    necessary.</li></ol> This object must be passed in every
                    interaction between a BAP and a BPP. In HTTP/S
                    implementations, it is not necessary to send the context
                    during the synchronous response. However, in asynchronous
                    protocols, the context must be sent during all interactions,
                  type: object
                  additionalProperties: false
                  properties:
                    domain:
                      description: Domain code that is relevant to this transaction context
                      allOf:
                        - type: string
                          description: >-
                            Standard code representing the domain. The standard
                            is usually published as part of the network policy.
                            Furthermore, the network facilitator should also
                            provide a mechanism to provide the supported domains
                            of a network.
                    location:
                      description: >-
                        The location where the transaction is intended to be
                        fulfilled.
                      allOf:
                        - &ref_117
                          description: The physical location of something
                          type: object
                          additionalProperties: false
                          properties:
                            id: &ref_118
                              type: string
                            descriptor: &ref_105
                              description: Physical description of something.
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  type: string
                                code:
                                  type: string
                                short_desc:
                                  type: string
                                long_desc:
                                  type: string
                                additional_desc:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    content_type:
                                      type: string
                                      enum:
                                        - text/plain
                                        - text/html
                                        - application/json
                                media:
                                  type: array
                                  items: &ref_127
                                    description: >-
                                      This object contains a url to a media
                                      file.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      mimetype:
                                        description: >-
                                          indicates the nature and format of the
                                          document, file, or assortment of bytes.
                                          MIME types are defined and standardized
                                          in IETF's RFC 6838
                                        type: string
                                      url:
                                        description: The URL of the file
                                        type: string
                                        format: uri
                                      signature:
                                        description: >-
                                          The digital signature of the file signed
                                          by the sender
                                        type: string
                                      dsa:
                                        description: The signing algorithm used by the sender
                                        type: string
                                images:
                                  type: array
                                  items: &ref_110
                                    description: Describes an image
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      url:
                                        description: >-
                                          URL to the image. This can be a data url
                                          or an remote url
                                        type: string
                                        format: uri
                                      size_type:
                                        description: >-
                                          The size of the image. The network
                                          policy can define the default dimensions
                                          of each type
                                        type: string
                                        enum:
                                          - xs
                                          - sm
                                          - md
                                          - lg
                                          - xl
                                          - custom
                                      width:
                                        description: Width of the image in pixels
                                        type: string
                                      height:
                                        description: Height of the image in pixels
                                        type: string
                            map_url:
                              description: >-
                                The url to the map of the location. This can be
                                a globally recognized map url or the one
                                specified by the network policy.
                              type: string
                              format: uri
                            gps:
                              description: The GPS co-ordinates of this location.
                              allOf:
                                - &ref_101
                                  description: Describes a GPS coordinate
                                  type: string
                                  pattern: >-
                                    ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                            address:
                              description: The address of this location.
                              allOf:
                                - &ref_114
                                  description: Describes a postal address.
                                  type: string
                            city:
                              description: The city this location is, or is located within
                              allOf:
                                - &ref_116
                                  description: Describes a city
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      description: Name of the city
                                      type: string
                                    code:
                                      description: City code
                                      type: string
                            district:
                              description: The state this location is, or is located within
                              type: string
                            state:
                              description: The state this location is, or is located within
                              allOf:
                                - &ref_115
                                  description: >-
                                    A bounded geopolitical region of governance
                                    inside a country.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the state
                                    code:
                                      type: string
                                      description: >-
                                        State code as per country or
                                        international standards
                            country:
                              description: >-
                                The country this location is, or is located
                                within
                              allOf:
                                - description: Describes a country
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the country
                                    code:
                                      type: string
                                      description: >-
                                        Country code as per ISO 3166-1 and ISO
                                        3166-2 format
                            area_code:
                              type: string
                            circle:
                              description: >-
                                Describes a circular region of a specified
                                radius centered at a specified GPS coordinate.
                              type: object
                              additionalProperties: false
                              properties:
                                gps: *ref_101
                                radius: &ref_120
                                  description: Describes a scalar
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - CONSTANT
                                        - VARIABLE
                                    value: &ref_102
                                      description: >-
                                        Describes a numerical value in decimal
                                        form
                                      type: string
                                      pattern: '[+-]?([0-9]*[.])?[0-9]+'
                                    estimated_value: *ref_102
                                    computed_value: *ref_102
                                    range:
                                      type: object
                                      properties:
                                        min: *ref_102
                                        max: *ref_102
                                    unit:
                                      type: string
                            polygon:
                              description: The boundary polygon of this location
                              type: string
                            3dspace:
                              description: >-
                                The three dimensional region describing this
                                location
                              type: string
                            rating:
                              description: The rating of this location
                              allOf:
                                - &ref_106
                                  description: >-
                                    Rating value given to the object. This can
                                    be a single value or can also contain an
                                    inequality operator like gt, gte, lt, lte.
                                    This can also contain an inequality
                                    expression containing logical operators like
                                    && and ||.
                                  type: string
                    action:
                      description: >-
                        The Beckn protocol method being called by the sender and
                        executed at the receiver.
                      type: string
                    version:
                      type: string
                      description: >-
                        Version of transaction protocol being used by the
                        sender.
                    bap_id:
                      description: Subscriber ID of the BAP
                      allOf:
                        - &ref_103
                          description: >-
                            A globally unique identifier of the platform,
                            Typically it is the fully qualified domain name
                            (FQDN) of the platform.
                          type: string
                    bap_uri:
                      description: >-
                        Subscriber URL of the BAP for accepting callbacks from
                        BPPs.
                      allOf:
                        - &ref_104
                          description: >-
                            The callback URL of the Subscriber. This should
                            necessarily contain the same domain name as set in
                            `subscriber_id``.
                          type: string
                          format: uri
                    bpp_id:
                      description: Subscriber ID of the BPP
                      allOf:
                        - *ref_103
                    bpp_uri:
                      description: Subscriber URL of the BPP for accepting calls from BAPs.
                      allOf:
                        - *ref_104
                    transaction_id:
                      description: >-
                        This is a unique value which persists across all API
                        calls from `search` through `confirm`. This is done to
                        indicate an active user session across multiple
                        requests. The BPPs can use this value to push
                        personalized recommendations, and dynamic offerings
                        related to an ongoing transaction despite being unaware
                        of the user active on the BAP.
                      type: string
                      format: uuid
                    message_id:
                      description: >-
                        This is a unique value which persists during a request /
                        callback cycle. Since beckn protocol APIs are
                        asynchronous, BAPs need a common value to match an
                        incoming callback from a BPP to an earlier call. This
                        value can also be used to ignore duplicate messages
                        coming from the BPP. It is recommended to generate a
                        fresh message_id for every new interaction. When sending
                        unsolicited callbacks, BPPs must generate a new
                        message_id.
                      type: string
                      format: uuid
                    timestamp:
                      description: Time of request generation in RFC3339 format
                      type: string
                      format: date-time
                    key:
                      description: The encryption public key of the sender
                      type: string
                    ttl:
                      description: >-
                        The duration in ISO8601 format after timestamp for which
                        this message holds valid
                      type: string
                - type: object
                  properties:
                    action:
                      enum:
                        - on_select
                  required:
                    - action
            message:
              type: object
              properties:
                order:
                  description: >-
                    Describes a legal purchase order. It contains the complete
                    details of the legal contract created between the buyer and
                    the seller.
                  type: object
                  additionalProperties: false
                  properties:
                    id:
                      type: string
                      description: >-
                        Human-readable ID of the order. This is generated at the
                        BPP layer. The BPP can either generate order id within
                        its system or forward the order ID created at the
                        provider level.
                    ref_order_ids:
                      description: >-
                        A list of order IDs to link this order to previous
                        orders.
                      type: array
                      items:
                        type: string
                        description: ID of a previous order
                    status:
                      description: >-
                        Status of the order. Allowed values can be defined by
                        the network policy
                      type: string
                    type:
                      description: >-
                        This is used to indicate the type of order being created
                        to BPPs. Sometimes orders can be linked to previous
                        orders, like a replacement order in a retail domain. A
                        follow-up consultation in healthcare domain. A single
                        order part of a subscription order. The list of order
                        types can be standardized at the network level.
                      type: string
                      default: DEFAULT
                      enum:
                        - DRAFT
                        - DEFAULT
                    provider:
                      description: >-
                        Details of the provider whose catalog items have been
                        selected.
                      allOf:
                        - description: Describes the catalog of a business.
                          type: object
                          properties:
                            id:
                              type: string
                              description: Id of the provider
                            descriptor: *ref_105
                            category_id:
                              type: string
                              description: >-
                                Category Id of the provider at the BPP-level
                                catalog
                            rating: *ref_106
                            time: &ref_109
                              description: >-
                                Describes time in its various forms. It can be a
                                single point in time; duration; or a structured
                                timetable of operations<br>This has properties
                                like label, time stamp,duration,range, days,
                                schedule
                              type: object
                              additionalProperties: false
                              properties:
                                label:
                                  type: string
                                timestamp:
                                  type: string
                                  format: date-time
                                duration: &ref_107
                                  description: Describes duration as per ISO8601 format
                                  type: string
                                range:
                                  type: object
                                  properties:
                                    start:
                                      type: string
                                      format: date-time
                                    end:
                                      type: string
                                      format: date-time
                                days:
                                  type: string
                                  description: >-
                                    comma separated values representing days of
                                    the week
                                schedule:
                                  description: >-
                                    Describes schedule as a repeating time
                                    period used to describe a regularly
                                    recurring event. At a minimum a schedule
                                    will specify frequency which describes the
                                    interval between occurrences of the event.
                                    Additional information can be provided to
                                    specify the schedule more precisely. This
                                    includes identifying the timestamps(s) of
                                    when the event will take place. Schedules
                                    may also have holidays to exclude a specific
                                    day from the schedule.<br>This has
                                    properties like frequency, holidays, times
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    frequency: *ref_107
                                    holidays:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                                    times:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                            categories:
                              type: array
                              items:
                                description: >-
                                  A label under which a collection of items can
                                  be grouped.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_108
                                    description: ID of the category
                                    type: string
                                  parent_category_id: *ref_108
                                  descriptor: *ref_105
                                  time: *ref_109
                                  ttl:
                                    description: >-
                                      Time to live for an instance of this
                                      schema
                                  tags:
                                    type: array
                                    items: &ref_111
                                      description: >-
                                        A collection of tag objects with group
                                        level attributes. For detailed
                                        documentation on the Tags and Tag Groups
                                        schema go to
                                        https://github.com/beckn/protocol-specifications/discussions/316
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        display:
                                          description: >-
                                            Indicates the display properties of the
                                            tag group. If display is set to false,
                                            then the group will not be displayed. If
                                            it is set to true, it should be
                                            displayed. However, group-level display
                                            properties can be overriden by
                                            individual tag-level display property.
                                            As this schema is purely for catalog
                                            display purposes, it is not recommended
                                            to send this value during search.
                                          type: boolean
                                          default: true
                                        descriptor:
                                          description: >-
                                            Description of the TagGroup, can be used
                                            to store detailed information.
                                          allOf:
                                            - *ref_105
                                        list:
                                          description: >-
                                            An array of Tag objects listed under
                                            this group. This property can be set by
                                            BAPs during search to narrow the
                                            `search` and achieve more relevant
                                            results. When received during
                                            `on_search`, BAPs must render this list
                                            under the heading described by the
                                            `name` property of this schema.
                                          type: array
                                          items:
                                            description: >-
                                              Describes a tag. This is used to contain
                                              extended metadata. This object can be
                                              added as a property to any schema to
                                              describe extended attributes. For BAPs,
                                              tags can be sent during search to
                                              optimize and filter search results. BPPs
                                              can use tags to index their catalog to
                                              allow better search functionality. Tags
                                              are sent by the BPP as part of the
                                              catalog response in the `on_search`
                                              callback. Tags are also meant for
                                              display purposes. Upon receiving a tag,
                                              BAPs are meant to render them as
                                              name-value pairs. This is particularly
                                              useful when rendering tabular
                                              information about a product or service.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor:
                                                description: >-
                                                  Description of the Tag, can be used to
                                                  store detailed information.
                                                allOf:
                                                  - *ref_105
                                              value:
                                                description: >-
                                                  The value of the tag. This set by the
                                                  BPP and rendered as-is by the BAP.
                                                type: string
                                              display:
                                                description: >-
                                                  This value indicates if the tag is
                                                  intended for display purposes. If set to
                                                  `true`, then this tag must be displayed.
                                                  If it is set to `false`, it should not
                                                  be displayed. This value can override
                                                  the group display value.
                                                type: boolean
                            fulfillments:
                              type: array
                              items: &ref_132
                                description: >-
                                  Describes how a an order will be
                                  rendered/fulfilled to the end-customer
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_123
                                    description: >-
                                      Unique reference ID to the fulfillment of
                                      an order
                                    type: string
                                  type:
                                    description: >-
                                      A code that describes the mode of
                                      fulfillment. This is typically set when
                                      there are multiple ways an order can be
                                      fulfilled. For example, a retail order can
                                      be fulfilled either via store pickup or a
                                      home delivery. Similarly, a medical
                                      consultation can be provided either
                                      in-person or via tele-consultation. The
                                      network policy must publish standard
                                      fulfillment type codes for the different
                                      modes of fulfillment.
                                    type: string
                                  rateable:
                                    description: >-
                                      Whether the fulfillment can be rated or
                                      not
                                    type: boolean
                                  rating:
                                    description: >-
                                      The rating value of the fulfullment
                                      service.
                                    allOf:
                                      - *ref_106
                                  state:
                                    description: >-
                                      The current state of fulfillment. The BPP
                                      must set this value whenever the state of
                                      the order fulfillment changes and fire an
                                      unsolicited `on_status` call.
                                    allOf:
                                      - &ref_126
                                        description: Describes the state of fulfillment
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          descriptor: *ref_105
                                          updated_at:
                                            type: string
                                            format: date-time
                                          updated_by:
                                            type: string
                                            description: ID of entity which changed the state
                                  tracking:
                                    type: boolean
                                    description: >-
                                      Indicates whether the fulfillment allows
                                      tracking
                                    default: false
                                  customer:
                                    description: >-
                                      The person that will ultimately receive
                                      the order
                                    allOf:
                                      - description: >-
                                          Describes a customer buying/availing a
                                          product or a service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: &ref_112
                                            description: Describes a person as any individual
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              id:
                                                type: string
                                                description: Describes the identity of the person
                                              url:
                                                description: Profile url of the person
                                                type: string
                                                format: uri
                                              name:
                                                description: the name of the person
                                                type: string
                                              image: *ref_110
                                              age:
                                                description: Age of the person
                                                allOf:
                                                  - *ref_107
                                              dob:
                                                description: Date of birth of the person
                                                type: string
                                                format: date
                                              gender:
                                                type: string
                                                description: >-
                                                  Gender of something, typically a Person,
                                                  but possibly also fictional characters,
                                                  animals, etc. While Male and Female may
                                                  be used, text strings are also
                                                  acceptable for people who do not
                                                  identify as a binary gender.Allowed
                                                  values for this field can be published
                                                  in the network policy
                                              creds:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a credential of an entity -
                                                    Person or Organization
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    id:
                                                      type: string
                                                    type:
                                                      type: string
                                                      default: VerifiableCredential
                                                    url:
                                                      description: URL of the credential
                                                      type: string
                                                      format: uri
                                              languages:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a language known to the
                                                    person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              skills:
                                                type: array
                                                items:
                                                  description: Describes a skill of the person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              tags:
                                                type: array
                                                items: *ref_111
                                          contact: &ref_113
                                            description: >-
                                              Describes the contact information of an
                                              entity
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              phone:
                                                type: string
                                              email:
                                                type: string
                                              jcard:
                                                type: object
                                                description: >-
                                                  A Jcard object as per
                                                  draft-ietf-jcardcal-jcard-03
                                                  specification
                                  agent:
                                    description: >-
                                      The agent that is currently handling the
                                      fulfillment of the order
                                    allOf:
                                      - description: >-
                                          Describes the direct performer, driver
                                          or executor that fulfills an order. It
                                          is usually a person. But in some rare
                                          cases, it could be a non-living entity
                                          like a drone, or a bot. Some examples of
                                          agents are Doctor in the healthcare
                                          sector, a driver in the mobility sector,
                                          or a delivery person in the logistics
                                          sector. This object can be set at any
                                          stage of the order lifecycle. This can
                                          be set at the discovery stage when the
                                          BPP wants to provide details on the
                                          agent fulfilling the order, like in
                                          healthcare, where the doctor's name
                                          appears during search. This object can
                                          also used to search for a particular
                                          person that the customer wants
                                          fulfilling an order. Sometimes, this
                                          object gets instantiated after the order
                                          is confirmed, like in the case of
                                          on-demand taxis, where the driver is
                                          assigned after the user confirms the
                                          ride.
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: *ref_112
                                          contact: *ref_113
                                          organization: &ref_121
                                            description: >-
                                              An organization. Usually a recognized
                                              business entity.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor: *ref_105
                                              address:
                                                description: The postal address of the organization
                                                allOf:
                                                  - *ref_114
                                              state:
                                                description: >-
                                                  The state where the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_115
                                              city:
                                                description: >-
                                                  The city where the the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_116
                                              contact: *ref_113
                                          rating: *ref_106
                                  contact: *ref_113
                                  vehicle:
                                    description: >-
                                      Describes a vehicle is a device that is
                                      designed or used to transport people or
                                      cargo over land, water, air, or through
                                      space.<br>This has properties like
                                      category, capacity, make, model,
                                      size,variant,color,energy_type,registration
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      category:
                                        type: string
                                      capacity:
                                        type: integer
                                      make:
                                        type: string
                                      model:
                                        type: string
                                      size:
                                        type: string
                                      variant:
                                        type: string
                                      color:
                                        type: string
                                      energy_type:
                                        type: string
                                      registration:
                                        type: string
                                      wheels_count:
                                        type: string
                                      cargo_volumne:
                                        type: string
                                      wheelchair_access:
                                        type: string
                                      code:
                                        type: string
                                      emission_standard:
                                        type: string
                                  stops:
                                    description: >-
                                      The list of logical stops encountered
                                      during the fulfillment of an order.
                                    type: array
                                    items:
                                      description: >-
                                        A logical point in space and time during
                                        the fulfillment of an order.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          type: string
                                        parent_stop_id:
                                          type: string
                                        location:
                                          description: Location of the stop
                                          allOf:
                                            - *ref_117
                                        type:
                                          description: >-
                                            The type of stop. Allowed values of this
                                            property can be defined by the network
                                            policy.
                                          type: string
                                        time:
                                          description: Timings applicable at the stop.
                                          allOf:
                                            - *ref_109
                                        instructions:
                                          description: >-
                                            Instructions that need to be followed at
                                            the stop
                                          allOf:
                                            - *ref_105
                                        contact:
                                          description: Contact details of the stop
                                          allOf:
                                            - *ref_113
                                        person:
                                          description: >-
                                            The details of the person present at the
                                            stop
                                          allOf:
                                            - *ref_112
                                        authorization:
                                          description: >-
                                            Describes an authorization mechanism
                                            used to start or end the fulfillment of
                                            an order. For example, in the mobility
                                            sector, the driver may require a
                                            one-time password to initiate the ride.
                                            In the healthcare sector, a patient may
                                            need to provide a password to open a
                                            video conference link during a
                                            teleconsultation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            type:
                                              description: >-
                                                Type of authorization mechanism used.
                                                The allowed values for this field can be
                                                published as part of the network policy.
                                              type: string
                                            token:
                                              description: >-
                                                Token used for authorization. This is
                                                typically generated at the BPP. The BAP
                                                can send this value to the user via any
                                                channel that it uses to authenticate the
                                                user like SMS, Email, Push notification,
                                                or in-app rendering.
                                              type: string
                                            valid_from:
                                              description: >-
                                                Timestamp in RFC3339 format from which
                                                token is valid
                                              type: string
                                              format: date-time
                                            valid_to:
                                              description: >-
                                                Timestamp in RFC3339 format until which
                                                token is valid
                                              type: string
                                              format: date-time
                                            status:
                                              description: Status of the token
                                              type: string
                                  path:
                                    description: >-
                                      The physical path taken by the agent that
                                      can be rendered on a map. The allowed
                                      format of this property can be set by the
                                      network.
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_111
                            payments:
                              type: array
                              items: &ref_137
                                description: >-
                                  Describes the terms of settlement between the
                                  BAP and the BPP for a single transaction. When
                                  instantiated, this object contains <ol><li>the
                                  amount that has to be settled,</li><li>The
                                  payment destination destination
                                  details</li><li>When the settlement should
                                  happen, and</li><li>A transaction reference
                                  ID</li></ol>. During a transaction, the BPP
                                  reserves the right to decide the terms of
                                  payment. However, the BAP can send its terms
                                  to the BPP first. If the BPP does not agree to
                                  those terms, it must overwrite the terms and
                                  return them to the BAP. If overridden, the BAP
                                  must either agree to the terms sent by the BPP
                                  in order to preserve the provider's autonomy,
                                  or abort the transaction. In case of such
                                  disagreements, the BAP and the BPP can perform
                                  offline negotiations on the payment terms.
                                  Once an agreement is reached, the BAP and BPP
                                  can resume transactions.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_124
                                    description: >-
                                      ID of the payment term that can be
                                      referred at an item or an order level in a
                                      catalog
                                    type: string
                                  collected_by:
                                    description: >-
                                      This field indicates who is the collector
                                      of payment. The BAP can set this value to
                                      'bap' if it wants to collect the payment
                                      first and  settle it to the BPP. If the
                                      BPP agrees to those terms, the BPP should
                                      not send the payment url. Alternatively,
                                      the BPP can set this field with the value
                                      'bpp' if it wants the payment to be made
                                      directly.
                                    type: string
                                  url:
                                    type: string
                                    description: >-
                                      A payment url to be called by the BAP. If
                                      empty, then the payment is to be done
                                      offline. The details of payment should be
                                      present in the params object. If tl_method
                                      = http/get, then the payment details will
                                      be sent as url params. Two url param
                                      values, ```$transaction_id``` and
                                      ```$amount``` are mandatory.
                                    format: uri
                                  tl_method:
                                    type: string
                                  params:
                                    type: object
                                    properties:
                                      transaction_id:
                                        type: string
                                        description: >-
                                          The reference transaction ID associated
                                          with a payment activity
                                      amount:
                                        type: string
                                      currency:
                                        type: string
                                      bank_code:
                                        type: string
                                      bank_account_number:
                                        type: string
                                      virtual_payment_address:
                                        type: string
                                      source_bank_code:
                                        type: string
                                      source_bank_account_number:
                                        type: string
                                      source_virtual_payment_address:
                                        type: string
                                  type:
                                    type: string
                                    enum:
                                      - PRE-ORDER
                                      - PRE-FULFILLMENT
                                      - ON-FULFILLMENT
                                      - POST-FULFILLMENT
                                      - ON-ORDER
                                  status:
                                    type: string
                                    enum:
                                      - PAID
                                      - NOT-PAID
                                  time: *ref_109
                                  tags:
                                    type: array
                                    items: *ref_111
                            locations:
                              type: array
                              items: *ref_117
                            offers:
                              type: array
                              items: &ref_131
                                description: >-
                                  An offer associated with a catalog. This is
                                  typically used to promote a particular product
                                  and enable more purchases.
                                type: object
                                additionalProperties: false
                                properties:
                                  id:
                                    type: string
                                  descriptor: *ref_105
                                  location_ids:
                                    type: array
                                    items: *ref_118
                                  category_ids:
                                    type: array
                                    items: *ref_108
                                  item_ids:
                                    type: array
                                    items: &ref_119
                                      description: ID of the item.
                                      type: string
                                  time: *ref_109
                                  tags:
                                    type: array
                                    items: *ref_111
                            items:
                              type: array
                              items: &ref_129
                                description: >-
                                  Describes a product or a service offered to
                                  the end consumer by the provider. In the
                                  mobility sector, it can represent a fare
                                  product like one way journey. In the logistics
                                  sector, it can represent the delivery service
                                  offering. In the retail domain it can
                                  represent a product like a grocery item.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: *ref_119
                                  parent_item_id:
                                    description: ID of the item, this item is a variant of
                                    allOf:
                                      - *ref_119
                                  parent_item_quantity:
                                    description: >-
                                      The number of units of the parent item
                                      this item is a multiple of
                                    allOf:
                                      - &ref_122
                                        description: Describes the count or amount of an item
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          allocated:
                                            description: >-
                                              This represents the exact quantity
                                              allocated for purchase of the item.
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_120
                                          available:
                                            description: >-
                                              This represents the exact quantity
                                              available for purchase of the item. The
                                              buyer can only purchase multiples of
                                              this
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_120
                                          maximum:
                                            description: >-
                                              This represents the maximum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                              measure: *ref_120
                                          minimum:
                                            description: >-
                                              This represents the minimum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_120
                                          selected:
                                            description: >-
                                              This represents the quantity selected
                                              for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_120
                                          unitized:
                                            description: >-
                                              This represents the quantity available
                                              in a single unit of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                                maximum: 1
                                              measure: *ref_120
                                  descriptor:
                                    description: Physical description of the item
                                    allOf:
                                      - *ref_105
                                  creator:
                                    description: The creator of this item
                                    allOf:
                                      - *ref_121
                                  price:
                                    description: >-
                                      The price of this item, if it has
                                      intrinsic value
                                    allOf:
                                      - &ref_125
                                        description: >-
                                          Describes the price of a product or
                                          service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          currency:
                                            type: string
                                          value: *ref_102
                                          estimated_value: *ref_102
                                          computed_value: *ref_102
                                          listed_value: *ref_102
                                          offered_value: *ref_102
                                          minimum_value: *ref_102
                                          maximum_value: *ref_102
                                  quantity:
                                    description: The selling quantity of the item
                                    allOf:
                                      - *ref_122
                                  category_ids:
                                    description: Categories this item can be listed under
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_108
                                  fulfillment_ids:
                                    description: >-
                                      Modes through which this item can be
                                      fulfilled
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_123
                                  location_ids:
                                    description: >-
                                      Provider Locations this item is available
                                      in
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_118
                                  payment_ids:
                                    description: >-
                                      Payment modalities through which this item
                                      can be ordered
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_124
                                  add_ons:
                                    type: array
                                    items: &ref_130
                                      description: >-
                                        Describes an additional item offered as
                                        a value-addition to a product or
                                        service. This does not exist
                                        independently in a catalog and is always
                                        associated with an item.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          description: Provider-defined ID of the add-on
                                          type: string
                                        descriptor: *ref_105
                                        price: *ref_125
                                        quantity: *ref_122
                                  cancellation_terms:
                                    description: Cancellation terms of this item
                                    type: array
                                    items: &ref_133
                                      description: >-
                                        Describes the cancellation terms of an
                                        item or an order. This can be referenced
                                        at an item or order level. Item-level
                                        cancellation terms can override the
                                        terms at the order level.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_126
                                        reason_required:
                                          description: >-
                                            Indicates whether a reason is required
                                            to cancel the order
                                          type: boolean
                                        cancel_by:
                                          description: >-
                                            Information related to the time of
                                            cancellation.
                                          allOf:
                                            - *ref_109
                                        cancellation_fee:
                                          description: A fee applied on a particular entity
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            percentage:
                                              description: Percentage of a value
                                              allOf:
                                                - *ref_102
                                            amount:
                                              description: A fixed value
                                              allOf:
                                                - *ref_125
                                        xinput: &ref_128
                                          description: >-
                                            Contains any additional or extended
                                            inputs required to confirm an order.
                                            This is typically a Form Input.
                                            Sometimes, selection of catalog elements
                                            is not enough for the BPP to confirm an
                                            order. For example, to confirm a flight
                                            ticket, the airline requires details of
                                            the passengers along with information on
                                            baggage, identity, in addition to the
                                            class of ticket. Similarly, a logistics
                                            company may require details on the
                                            nature of shipment in order to confirm
                                            the shipping. A recruiting firm may
                                            require additional details on the
                                            applicant in order to confirm a job
                                            application. For all such purposes, the
                                            BPP can choose to send this object
                                            attached to any object in the catalog
                                            that is required to be sent while
                                            placing the order. This object can
                                            typically be sent at an item level or at
                                            the order level. The item level XInput
                                            will override the Order level XInput as
                                            it indicates a special requirement of
                                            information for that particular item.
                                            Hence the BAP must render a separate
                                            form for the Item and another form at
                                            the Order level before confirmation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            form:
                                              description: Describes a form
                                              type: object
                                              additionalProperties: false
                                              properties:
                                                url:
                                                  description: >-
                                                    The URL from where the form can be
                                                    fetched. The content fetched from the
                                                    url must be processed as per the
                                                    mime_type specified in this object. Once
                                                    fetched, the rendering platform can
                                                    choosed to render the form as-is as an
                                                    embeddable element; or process it
                                                    further to blend with the theme of the
                                                    application. In case the interface is
                                                    non-visual, the the render can process
                                                    the form data and reproduce it as per
                                                    the standard specified in the form.
                                                  type: string
                                                  format: uri
                                                data:
                                                  description: The form submission data
                                                  type: object
                                                  additionalProperties:
                                                    type: string
                                                mime_type:
                                                  description: >-
                                                    This field indicates the nature and
                                                    format of the form received by querying
                                                    the url. MIME types are defined and
                                                    standardized in IETF's RFC 6838.
                                                  type: string
                                                  enum:
                                                    - text/html
                                                    - application/xml
                                                submission_id:
                                                  type: string
                                                  format: uuid
                                            required:
                                              description: >-
                                                Indicates whether the form data is
                                                mandatorily required by the BPP to
                                                confirm the order.
                                              type: boolean
                                        external_ref: *ref_127
                                  refund_terms:
                                    description: Refund terms of this item
                                    type: array
                                    items: &ref_134
                                      description: Refund term of an item or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_115
                                        refund_eligible:
                                          description: >-
                                            Indicates if cancellation will result in
                                            a refund
                                          type: boolean
                                        refund_within:
                                          description: >-
                                            Time within which refund will be
                                            processed after successful cancellation.
                                          allOf:
                                            - *ref_109
                                        refund_amount: *ref_125
                                  replacement_terms:
                                    description: >-
                                      Terms that are applicable be met when this
                                      item is replaced
                                    type: array
                                    items: &ref_135
                                      description: >-
                                        The replacement policy of an item or an
                                        order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_115
                                        replace_within:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to replace
                                            the item before a certain date-time,
                                            failing which they will not be eligible
                                            for replacement
                                          allOf:
                                            - *ref_109
                                        external_ref: *ref_127
                                  return_terms:
                                    description: >-
                                      Terms that are applicable when this item
                                      is returned
                                    type: array
                                    items: &ref_136
                                      description: >-
                                        Describes the return policy of an item
                                        or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term IETF''s applicable.
                                          allOf:
                                            - *ref_115
                                        return_eligible:
                                          description: >-
                                            Indicates whether the item is eligible
                                            for return
                                          type: boolean
                                        return_time:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to return
                                            the item to the origin before a certain
                                            date-time, failing which they will not
                                            be eligible for refund.
                                          allOf:
                                            - *ref_109
                                        return_location:
                                          description: >-
                                            The location where the item or order
                                            must / will be returned to
                                          allOf:
                                            - *ref_117
                                        fulfillment_managed_by:
                                          description: The entity that will perform the return
                                          type: string
                                          enum:
                                            - CONSUMER
                                            - PROVIDER
                                  xinput:
                                    description: >-
                                      Additional input required from the
                                      customer to purchase / avail this item
                                    allOf:
                                      - *ref_128
                                  time:
                                    description: >-
                                      Temporal attributes of this item. This
                                      property is used when the item exists on
                                      the catalog only for a limited period of
                                      time.
                                    allOf:
                                      - *ref_109
                                  rateable:
                                    description: Whether this item can be rated
                                    type: boolean
                                  rating:
                                    description: The rating of the item
                                    allOf:
                                      - *ref_106
                                  matched:
                                    description: >-
                                      Whether this item is an exact match of the
                                      request
                                    type: boolean
                                  related:
                                    description: >-
                                      Whether this item is a related item to the
                                      exactly matched item
                                    type: boolean
                                  recommended:
                                    description: >-
                                      Whether this item is a recommended item to
                                      a response
                                    type: boolean
                                  ttl:
                                    description: >-
                                      Time to live in seconds for an instance of
                                      this schema
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_111
                            exp:
                              type: string
                              description: Time after which catalog has to be refreshed
                              format: date-time
                            rateable:
                              description: Whether this provider can be rated or not
                              type: boolean
                            ttl:
                              description: >-
                                The time-to-live in seconds, for this object.
                                This can be overriden at deeper levels. A value
                                of -1 indicates that this object is not
                                cacheable.
                              type: string
                            tags:
                              type: array
                              items: *ref_111
                    items:
                      description: The items purchased / availed in this order
                      type: array
                      items: *ref_129
                    add_ons:
                      description: The add-ons purchased / availed in this order
                      type: array
                      items: *ref_130
                    offers:
                      description: The offers applied in this order
                      type: array
                      items: *ref_131
                    billing:
                      description: The billing details of this order
                      allOf:
                        - description: >-
                            Describes the billing details of an entity.<br>This
                            has properties like
                            name,organization,address,email,phone,time,tax_number,
                            created_at,updated_at
                          type: object
                          additionalProperties: false
                          properties:
                            name:
                              description: Name of the billable entity
                              type: string
                            organization:
                              description: Details of the organization being billed.
                              allOf:
                                - *ref_121
                            address:
                              description: The address of the billable entity
                              allOf:
                                - *ref_114
                            state:
                              description: >-
                                The state where the billable entity resides.
                                This is important for state-level tax
                                calculation
                              allOf:
                                - *ref_115
                            city:
                              description: The city where the billable entity resides.
                              allOf:
                                - *ref_116
                            email:
                              description: Email address where the bill is sent to
                              type: string
                              format: email
                            phone:
                              description: Phone number of the billable entity
                              type: string
                            time:
                              description: Details regarding the billing period
                              allOf:
                                - *ref_109
                            tax_id:
                              description: >-
                                ID of the billable entity as recognized by the
                                taxation authority
                              type: string
                    fulfillments:
                      description: The fulfillments involved in completing this order
                      type: array
                      items: *ref_132
                    cancellation:
                      description: The cancellation details of this order
                      allOf:
                        - description: Describes a cancellation event
                          type: object
                          additionalProperties: false
                          properties:
                            time:
                              description: >-
                                Date-time when the order was cancelled by the
                                buyer
                              type: string
                              format: date-time
                            cancelled_by:
                              type: string
                              enum:
                                - CONSUMER
                                - PROVIDER
                            reason:
                              description: The reason for cancellation
                              allOf:
                                - description: Describes a selectable option
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    id:
                                      type: string
                                    descriptor: *ref_105
                            additional_description:
                              description: >-
                                Any additional information regarding the nature
                                of cancellation
                              allOf:
                                - *ref_105
                    cancellation_terms:
                      description: Cancellation terms of this item
                      type: array
                      items: *ref_133
                    documents:
                      type: array
                      items:
                        description: Documnents associated to the order
                        type: object
                        additionalProperties: false
                        properties:
                          descriptor: *ref_105
                          mime_type:
                            description: >-
                              This field indicates the nature and format of the
                              form received by querying the url. MIME types are
                              defined and standardized in IETF's RFC 6838.
                            type: string
                            enum:
                              - text/html
                              - application/html
                              - application/xml
                              - application/pdf
                          url:
                            description: >-
                              The URL from where the form can be fetched. The
                              content fetched from the url must be processed as
                              per the mime_type specified in this object.
                            type: string
                            format: uri
                    refund_terms:
                      description: Refund terms of this item
                      type: array
                      items: *ref_134
                    replacement_terms:
                      description: Replacement terms of this item
                      type: array
                      items: *ref_135
                    return_terms:
                      description: Return terms of this item
                      type: array
                      items: *ref_136
                    quote:
                      description: The mutually agreed upon quotation for this order.
                      allOf:
                        - description: >-
                            Describes a quote. It is the estimated price of
                            products or services from the BPP.<br>This has
                            properties like price, breakup, ttl
                          type: object
                          additionalProperties: false
                          properties:
                            id:
                              description: ID of the quote.
                              type: string
                              format: uuid
                            price:
                              description: The total quoted price
                              allOf:
                                - *ref_125
                            breakup:
                              description: the breakup of the total quoted price
                              type: array
                              items:
                                type: object
                                properties:
                                  item: *ref_129
                                  title:
                                    type: string
                                  price: *ref_125
                            ttl: *ref_107
                    payments:
                      description: The terms of settlement for this order
                      type: array
                      items: *ref_137
                    created_at:
                      description: The date-time of creation of this order
                      type: string
                      format: date-time
                    updated_at:
                      description: The date-time of updated of this order
                      type: string
                      format: date-time
                    xinput:
                      description: >-
                        Additional input required from the customer to confirm
                        this order
                      allOf:
                        - *ref_128
                    tags:
                      type: array
                      items: *ref_111
            error:
              description: >-
                Describes an error object that is returned by a BAP, BPP or BG
                as a response or callback to an action by another network
                participant. This object is sent when any request received by a
                network participant is unacceptable. This object can be sent
                either during Ack or with the callback.
              type: object
              additionalProperties: false
              properties:
                code:
                  type: string
                  description: >-
                    Standard error code. For full list of error codes, refer to
                    docs/protocol-drafts/BECKN-005-ERROR-CODES-DRAFT-01.md of
                    this repo"
                paths:
                  type: string
                  description: >-
                    Path to json schema generating the error. Used only during
                    json schema validation errors
                message:
                  type: string
                  description: >-
                    Human readable message describing the error. Used mainly for
                    logging. Not recommended to be shown to the user.
          required:
            - context
        init:
          type: object
          properties:
            context:
              allOf:
                - description: >-
                    Every API call in beckn protocol has a context. It provides
                    a high-level overview to the receiver about the nature of
                    the intended transaction. Typically, it is the BAP that sets
                    the transaction context based on the consumer's location and
                    action on their UI. But sometimes, during unsolicited
                    callbacks, the BPP also sets the transaction context but it
                    is usually the same as the context of a previous full-cycle,
                    request-callback interaction between the BAP and the BPP.
                    The context object contains four types of fields.
                    <ol><li>Demographic information about the transaction using
                    fields like `domain`, `country`, and
                    `region`.</li><li>Addressing details like the sending and
                    receiving platform's ID and API
                    URL.</li><li>Interoperability information like the protocol
                    version that implemented by the sender
                    and,</li><li>Transaction details like the method being
                    called at the receiver's endpoint, the transaction_id that
                    represents an end-to-end user session at the BAP, a message
                    ID to pair requests with callbacks, a timestamp to capture
                    sending times, a ttl to specifiy the validity of the
                    request, and a key to encrypt information if
                    necessary.</li></ol> This object must be passed in every
                    interaction between a BAP and a BPP. In HTTP/S
                    implementations, it is not necessary to send the context
                    during the synchronous response. However, in asynchronous
                    protocols, the context must be sent during all interactions,
                  type: object
                  additionalProperties: false
                  properties:
                    domain:
                      description: Domain code that is relevant to this transaction context
                      allOf:
                        - type: string
                          description: >-
                            Standard code representing the domain. The standard
                            is usually published as part of the network policy.
                            Furthermore, the network facilitator should also
                            provide a mechanism to provide the supported domains
                            of a network.
                    location:
                      description: >-
                        The location where the transaction is intended to be
                        fulfilled.
                      allOf:
                        - &ref_154
                          description: The physical location of something
                          type: object
                          additionalProperties: false
                          properties:
                            id: &ref_155
                              type: string
                            descriptor: &ref_142
                              description: Physical description of something.
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  type: string
                                code:
                                  type: string
                                short_desc:
                                  type: string
                                long_desc:
                                  type: string
                                additional_desc:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    content_type:
                                      type: string
                                      enum:
                                        - text/plain
                                        - text/html
                                        - application/json
                                media:
                                  type: array
                                  items: &ref_164
                                    description: >-
                                      This object contains a url to a media
                                      file.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      mimetype:
                                        description: >-
                                          indicates the nature and format of the
                                          document, file, or assortment of bytes.
                                          MIME types are defined and standardized
                                          in IETF's RFC 6838
                                        type: string
                                      url:
                                        description: The URL of the file
                                        type: string
                                        format: uri
                                      signature:
                                        description: >-
                                          The digital signature of the file signed
                                          by the sender
                                        type: string
                                      dsa:
                                        description: The signing algorithm used by the sender
                                        type: string
                                images:
                                  type: array
                                  items: &ref_147
                                    description: Describes an image
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      url:
                                        description: >-
                                          URL to the image. This can be a data url
                                          or an remote url
                                        type: string
                                        format: uri
                                      size_type:
                                        description: >-
                                          The size of the image. The network
                                          policy can define the default dimensions
                                          of each type
                                        type: string
                                        enum:
                                          - xs
                                          - sm
                                          - md
                                          - lg
                                          - xl
                                          - custom
                                      width:
                                        description: Width of the image in pixels
                                        type: string
                                      height:
                                        description: Height of the image in pixels
                                        type: string
                            map_url:
                              description: >-
                                The url to the map of the location. This can be
                                a globally recognized map url or the one
                                specified by the network policy.
                              type: string
                              format: uri
                            gps:
                              description: The GPS co-ordinates of this location.
                              allOf:
                                - &ref_138
                                  description: Describes a GPS coordinate
                                  type: string
                                  pattern: >-
                                    ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                            address:
                              description: The address of this location.
                              allOf:
                                - &ref_151
                                  description: Describes a postal address.
                                  type: string
                            city:
                              description: The city this location is, or is located within
                              allOf:
                                - &ref_153
                                  description: Describes a city
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      description: Name of the city
                                      type: string
                                    code:
                                      description: City code
                                      type: string
                            district:
                              description: The state this location is, or is located within
                              type: string
                            state:
                              description: The state this location is, or is located within
                              allOf:
                                - &ref_152
                                  description: >-
                                    A bounded geopolitical region of governance
                                    inside a country.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the state
                                    code:
                                      type: string
                                      description: >-
                                        State code as per country or
                                        international standards
                            country:
                              description: >-
                                The country this location is, or is located
                                within
                              allOf:
                                - description: Describes a country
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the country
                                    code:
                                      type: string
                                      description: >-
                                        Country code as per ISO 3166-1 and ISO
                                        3166-2 format
                            area_code:
                              type: string
                            circle:
                              description: >-
                                Describes a circular region of a specified
                                radius centered at a specified GPS coordinate.
                              type: object
                              additionalProperties: false
                              properties:
                                gps: *ref_138
                                radius: &ref_157
                                  description: Describes a scalar
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - CONSTANT
                                        - VARIABLE
                                    value: &ref_139
                                      description: >-
                                        Describes a numerical value in decimal
                                        form
                                      type: string
                                      pattern: '[+-]?([0-9]*[.])?[0-9]+'
                                    estimated_value: *ref_139
                                    computed_value: *ref_139
                                    range:
                                      type: object
                                      properties:
                                        min: *ref_139
                                        max: *ref_139
                                    unit:
                                      type: string
                            polygon:
                              description: The boundary polygon of this location
                              type: string
                            3dspace:
                              description: >-
                                The three dimensional region describing this
                                location
                              type: string
                            rating:
                              description: The rating of this location
                              allOf:
                                - &ref_143
                                  description: >-
                                    Rating value given to the object. This can
                                    be a single value or can also contain an
                                    inequality operator like gt, gte, lt, lte.
                                    This can also contain an inequality
                                    expression containing logical operators like
                                    && and ||.
                                  type: string
                    action:
                      description: >-
                        The Beckn protocol method being called by the sender and
                        executed at the receiver.
                      type: string
                    version:
                      type: string
                      description: >-
                        Version of transaction protocol being used by the
                        sender.
                    bap_id:
                      description: Subscriber ID of the BAP
                      allOf:
                        - &ref_140
                          description: >-
                            A globally unique identifier of the platform,
                            Typically it is the fully qualified domain name
                            (FQDN) of the platform.
                          type: string
                    bap_uri:
                      description: >-
                        Subscriber URL of the BAP for accepting callbacks from
                        BPPs.
                      allOf:
                        - &ref_141
                          description: >-
                            The callback URL of the Subscriber. This should
                            necessarily contain the same domain name as set in
                            `subscriber_id``.
                          type: string
                          format: uri
                    bpp_id:
                      description: Subscriber ID of the BPP
                      allOf:
                        - *ref_140
                    bpp_uri:
                      description: Subscriber URL of the BPP for accepting calls from BAPs.
                      allOf:
                        - *ref_141
                    transaction_id:
                      description: >-
                        This is a unique value which persists across all API
                        calls from `search` through `confirm`. This is done to
                        indicate an active user session across multiple
                        requests. The BPPs can use this value to push
                        personalized recommendations, and dynamic offerings
                        related to an ongoing transaction despite being unaware
                        of the user active on the BAP.
                      type: string
                      format: uuid
                    message_id:
                      description: >-
                        This is a unique value which persists during a request /
                        callback cycle. Since beckn protocol APIs are
                        asynchronous, BAPs need a common value to match an
                        incoming callback from a BPP to an earlier call. This
                        value can also be used to ignore duplicate messages
                        coming from the BPP. It is recommended to generate a
                        fresh message_id for every new interaction. When sending
                        unsolicited callbacks, BPPs must generate a new
                        message_id.
                      type: string
                      format: uuid
                    timestamp:
                      description: Time of request generation in RFC3339 format
                      type: string
                      format: date-time
                    key:
                      description: The encryption public key of the sender
                      type: string
                    ttl:
                      description: >-
                        The duration in ISO8601 format after timestamp for which
                        this message holds valid
                      type: string
                - type: object
                  properties:
                    action:
                      enum:
                        - init
                  required:
                    - action
            message:
              type: object
              properties:
                order:
                  description: >-
                    Describes a legal purchase order. It contains the complete
                    details of the legal contract created between the buyer and
                    the seller.
                  type: object
                  additionalProperties: false
                  properties:
                    id:
                      type: string
                      description: >-
                        Human-readable ID of the order. This is generated at the
                        BPP layer. The BPP can either generate order id within
                        its system or forward the order ID created at the
                        provider level.
                    ref_order_ids:
                      description: >-
                        A list of order IDs to link this order to previous
                        orders.
                      type: array
                      items:
                        type: string
                        description: ID of a previous order
                    status:
                      description: >-
                        Status of the order. Allowed values can be defined by
                        the network policy
                      type: string
                    type:
                      description: >-
                        This is used to indicate the type of order being created
                        to BPPs. Sometimes orders can be linked to previous
                        orders, like a replacement order in a retail domain. A
                        follow-up consultation in healthcare domain. A single
                        order part of a subscription order. The list of order
                        types can be standardized at the network level.
                      type: string
                      default: DEFAULT
                      enum:
                        - DRAFT
                        - DEFAULT
                    provider:
                      description: >-
                        Details of the provider whose catalog items have been
                        selected.
                      allOf:
                        - description: Describes the catalog of a business.
                          type: object
                          properties:
                            id:
                              type: string
                              description: Id of the provider
                            descriptor: *ref_142
                            category_id:
                              type: string
                              description: >-
                                Category Id of the provider at the BPP-level
                                catalog
                            rating: *ref_143
                            time: &ref_146
                              description: >-
                                Describes time in its various forms. It can be a
                                single point in time; duration; or a structured
                                timetable of operations<br>This has properties
                                like label, time stamp,duration,range, days,
                                schedule
                              type: object
                              additionalProperties: false
                              properties:
                                label:
                                  type: string
                                timestamp:
                                  type: string
                                  format: date-time
                                duration: &ref_144
                                  description: Describes duration as per ISO8601 format
                                  type: string
                                range:
                                  type: object
                                  properties:
                                    start:
                                      type: string
                                      format: date-time
                                    end:
                                      type: string
                                      format: date-time
                                days:
                                  type: string
                                  description: >-
                                    comma separated values representing days of
                                    the week
                                schedule:
                                  description: >-
                                    Describes schedule as a repeating time
                                    period used to describe a regularly
                                    recurring event. At a minimum a schedule
                                    will specify frequency which describes the
                                    interval between occurrences of the event.
                                    Additional information can be provided to
                                    specify the schedule more precisely. This
                                    includes identifying the timestamps(s) of
                                    when the event will take place. Schedules
                                    may also have holidays to exclude a specific
                                    day from the schedule.<br>This has
                                    properties like frequency, holidays, times
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    frequency: *ref_144
                                    holidays:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                                    times:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                            categories:
                              type: array
                              items:
                                description: >-
                                  A label under which a collection of items can
                                  be grouped.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_145
                                    description: ID of the category
                                    type: string
                                  parent_category_id: *ref_145
                                  descriptor: *ref_142
                                  time: *ref_146
                                  ttl:
                                    description: >-
                                      Time to live for an instance of this
                                      schema
                                  tags:
                                    type: array
                                    items: &ref_148
                                      description: >-
                                        A collection of tag objects with group
                                        level attributes. For detailed
                                        documentation on the Tags and Tag Groups
                                        schema go to
                                        https://github.com/beckn/protocol-specifications/discussions/316
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        display:
                                          description: >-
                                            Indicates the display properties of the
                                            tag group. If display is set to false,
                                            then the group will not be displayed. If
                                            it is set to true, it should be
                                            displayed. However, group-level display
                                            properties can be overriden by
                                            individual tag-level display property.
                                            As this schema is purely for catalog
                                            display purposes, it is not recommended
                                            to send this value during search.
                                          type: boolean
                                          default: true
                                        descriptor:
                                          description: >-
                                            Description of the TagGroup, can be used
                                            to store detailed information.
                                          allOf:
                                            - *ref_142
                                        list:
                                          description: >-
                                            An array of Tag objects listed under
                                            this group. This property can be set by
                                            BAPs during search to narrow the
                                            `search` and achieve more relevant
                                            results. When received during
                                            `on_search`, BAPs must render this list
                                            under the heading described by the
                                            `name` property of this schema.
                                          type: array
                                          items:
                                            description: >-
                                              Describes a tag. This is used to contain
                                              extended metadata. This object can be
                                              added as a property to any schema to
                                              describe extended attributes. For BAPs,
                                              tags can be sent during search to
                                              optimize and filter search results. BPPs
                                              can use tags to index their catalog to
                                              allow better search functionality. Tags
                                              are sent by the BPP as part of the
                                              catalog response in the `on_search`
                                              callback. Tags are also meant for
                                              display purposes. Upon receiving a tag,
                                              BAPs are meant to render them as
                                              name-value pairs. This is particularly
                                              useful when rendering tabular
                                              information about a product or service.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor:
                                                description: >-
                                                  Description of the Tag, can be used to
                                                  store detailed information.
                                                allOf:
                                                  - *ref_142
                                              value:
                                                description: >-
                                                  The value of the tag. This set by the
                                                  BPP and rendered as-is by the BAP.
                                                type: string
                                              display:
                                                description: >-
                                                  This value indicates if the tag is
                                                  intended for display purposes. If set to
                                                  `true`, then this tag must be displayed.
                                                  If it is set to `false`, it should not
                                                  be displayed. This value can override
                                                  the group display value.
                                                type: boolean
                            fulfillments:
                              type: array
                              items: &ref_169
                                description: >-
                                  Describes how a an order will be
                                  rendered/fulfilled to the end-customer
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_160
                                    description: >-
                                      Unique reference ID to the fulfillment of
                                      an order
                                    type: string
                                  type:
                                    description: >-
                                      A code that describes the mode of
                                      fulfillment. This is typically set when
                                      there are multiple ways an order can be
                                      fulfilled. For example, a retail order can
                                      be fulfilled either via store pickup or a
                                      home delivery. Similarly, a medical
                                      consultation can be provided either
                                      in-person or via tele-consultation. The
                                      network policy must publish standard
                                      fulfillment type codes for the different
                                      modes of fulfillment.
                                    type: string
                                  rateable:
                                    description: >-
                                      Whether the fulfillment can be rated or
                                      not
                                    type: boolean
                                  rating:
                                    description: >-
                                      The rating value of the fulfullment
                                      service.
                                    allOf:
                                      - *ref_143
                                  state:
                                    description: >-
                                      The current state of fulfillment. The BPP
                                      must set this value whenever the state of
                                      the order fulfillment changes and fire an
                                      unsolicited `on_status` call.
                                    allOf:
                                      - &ref_163
                                        description: Describes the state of fulfillment
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          descriptor: *ref_142
                                          updated_at:
                                            type: string
                                            format: date-time
                                          updated_by:
                                            type: string
                                            description: ID of entity which changed the state
                                  tracking:
                                    type: boolean
                                    description: >-
                                      Indicates whether the fulfillment allows
                                      tracking
                                    default: false
                                  customer:
                                    description: >-
                                      The person that will ultimately receive
                                      the order
                                    allOf:
                                      - description: >-
                                          Describes a customer buying/availing a
                                          product or a service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: &ref_149
                                            description: Describes a person as any individual
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              id:
                                                type: string
                                                description: Describes the identity of the person
                                              url:
                                                description: Profile url of the person
                                                type: string
                                                format: uri
                                              name:
                                                description: the name of the person
                                                type: string
                                              image: *ref_147
                                              age:
                                                description: Age of the person
                                                allOf:
                                                  - *ref_144
                                              dob:
                                                description: Date of birth of the person
                                                type: string
                                                format: date
                                              gender:
                                                type: string
                                                description: >-
                                                  Gender of something, typically a Person,
                                                  but possibly also fictional characters,
                                                  animals, etc. While Male and Female may
                                                  be used, text strings are also
                                                  acceptable for people who do not
                                                  identify as a binary gender.Allowed
                                                  values for this field can be published
                                                  in the network policy
                                              creds:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a credential of an entity -
                                                    Person or Organization
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    id:
                                                      type: string
                                                    type:
                                                      type: string
                                                      default: VerifiableCredential
                                                    url:
                                                      description: URL of the credential
                                                      type: string
                                                      format: uri
                                              languages:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a language known to the
                                                    person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              skills:
                                                type: array
                                                items:
                                                  description: Describes a skill of the person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              tags:
                                                type: array
                                                items: *ref_148
                                          contact: &ref_150
                                            description: >-
                                              Describes the contact information of an
                                              entity
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              phone:
                                                type: string
                                              email:
                                                type: string
                                              jcard:
                                                type: object
                                                description: >-
                                                  A Jcard object as per
                                                  draft-ietf-jcardcal-jcard-03
                                                  specification
                                  agent:
                                    description: >-
                                      The agent that is currently handling the
                                      fulfillment of the order
                                    allOf:
                                      - description: >-
                                          Describes the direct performer, driver
                                          or executor that fulfills an order. It
                                          is usually a person. But in some rare
                                          cases, it could be a non-living entity
                                          like a drone, or a bot. Some examples of
                                          agents are Doctor in the healthcare
                                          sector, a driver in the mobility sector,
                                          or a delivery person in the logistics
                                          sector. This object can be set at any
                                          stage of the order lifecycle. This can
                                          be set at the discovery stage when the
                                          BPP wants to provide details on the
                                          agent fulfilling the order, like in
                                          healthcare, where the doctor's name
                                          appears during search. This object can
                                          also used to search for a particular
                                          person that the customer wants
                                          fulfilling an order. Sometimes, this
                                          object gets instantiated after the order
                                          is confirmed, like in the case of
                                          on-demand taxis, where the driver is
                                          assigned after the user confirms the
                                          ride.
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: *ref_149
                                          contact: *ref_150
                                          organization: &ref_158
                                            description: >-
                                              An organization. Usually a recognized
                                              business entity.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor: *ref_142
                                              address:
                                                description: The postal address of the organization
                                                allOf:
                                                  - *ref_151
                                              state:
                                                description: >-
                                                  The state where the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_152
                                              city:
                                                description: >-
                                                  The city where the the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_153
                                              contact: *ref_150
                                          rating: *ref_143
                                  contact: *ref_150
                                  vehicle:
                                    description: >-
                                      Describes a vehicle is a device that is
                                      designed or used to transport people or
                                      cargo over land, water, air, or through
                                      space.<br>This has properties like
                                      category, capacity, make, model,
                                      size,variant,color,energy_type,registration
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      category:
                                        type: string
                                      capacity:
                                        type: integer
                                      make:
                                        type: string
                                      model:
                                        type: string
                                      size:
                                        type: string
                                      variant:
                                        type: string
                                      color:
                                        type: string
                                      energy_type:
                                        type: string
                                      registration:
                                        type: string
                                      wheels_count:
                                        type: string
                                      cargo_volumne:
                                        type: string
                                      wheelchair_access:
                                        type: string
                                      code:
                                        type: string
                                      emission_standard:
                                        type: string
                                  stops:
                                    description: >-
                                      The list of logical stops encountered
                                      during the fulfillment of an order.
                                    type: array
                                    items:
                                      description: >-
                                        A logical point in space and time during
                                        the fulfillment of an order.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          type: string
                                        parent_stop_id:
                                          type: string
                                        location:
                                          description: Location of the stop
                                          allOf:
                                            - *ref_154
                                        type:
                                          description: >-
                                            The type of stop. Allowed values of this
                                            property can be defined by the network
                                            policy.
                                          type: string
                                        time:
                                          description: Timings applicable at the stop.
                                          allOf:
                                            - *ref_146
                                        instructions:
                                          description: >-
                                            Instructions that need to be followed at
                                            the stop
                                          allOf:
                                            - *ref_142
                                        contact:
                                          description: Contact details of the stop
                                          allOf:
                                            - *ref_150
                                        person:
                                          description: >-
                                            The details of the person present at the
                                            stop
                                          allOf:
                                            - *ref_149
                                        authorization:
                                          description: >-
                                            Describes an authorization mechanism
                                            used to start or end the fulfillment of
                                            an order. For example, in the mobility
                                            sector, the driver may require a
                                            one-time password to initiate the ride.
                                            In the healthcare sector, a patient may
                                            need to provide a password to open a
                                            video conference link during a
                                            teleconsultation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            type:
                                              description: >-
                                                Type of authorization mechanism used.
                                                The allowed values for this field can be
                                                published as part of the network policy.
                                              type: string
                                            token:
                                              description: >-
                                                Token used for authorization. This is
                                                typically generated at the BPP. The BAP
                                                can send this value to the user via any
                                                channel that it uses to authenticate the
                                                user like SMS, Email, Push notification,
                                                or in-app rendering.
                                              type: string
                                            valid_from:
                                              description: >-
                                                Timestamp in RFC3339 format from which
                                                token is valid
                                              type: string
                                              format: date-time
                                            valid_to:
                                              description: >-
                                                Timestamp in RFC3339 format until which
                                                token is valid
                                              type: string
                                              format: date-time
                                            status:
                                              description: Status of the token
                                              type: string
                                  path:
                                    description: >-
                                      The physical path taken by the agent that
                                      can be rendered on a map. The allowed
                                      format of this property can be set by the
                                      network.
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_148
                            payments:
                              type: array
                              items: &ref_174
                                description: >-
                                  Describes the terms of settlement between the
                                  BAP and the BPP for a single transaction. When
                                  instantiated, this object contains <ol><li>the
                                  amount that has to be settled,</li><li>The
                                  payment destination destination
                                  details</li><li>When the settlement should
                                  happen, and</li><li>A transaction reference
                                  ID</li></ol>. During a transaction, the BPP
                                  reserves the right to decide the terms of
                                  payment. However, the BAP can send its terms
                                  to the BPP first. If the BPP does not agree to
                                  those terms, it must overwrite the terms and
                                  return them to the BAP. If overridden, the BAP
                                  must either agree to the terms sent by the BPP
                                  in order to preserve the provider's autonomy,
                                  or abort the transaction. In case of such
                                  disagreements, the BAP and the BPP can perform
                                  offline negotiations on the payment terms.
                                  Once an agreement is reached, the BAP and BPP
                                  can resume transactions.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_161
                                    description: >-
                                      ID of the payment term that can be
                                      referred at an item or an order level in a
                                      catalog
                                    type: string
                                  collected_by:
                                    description: >-
                                      This field indicates who is the collector
                                      of payment. The BAP can set this value to
                                      'bap' if it wants to collect the payment
                                      first and  settle it to the BPP. If the
                                      BPP agrees to those terms, the BPP should
                                      not send the payment url. Alternatively,
                                      the BPP can set this field with the value
                                      'bpp' if it wants the payment to be made
                                      directly.
                                    type: string
                                  url:
                                    type: string
                                    description: >-
                                      A payment url to be called by the BAP. If
                                      empty, then the payment is to be done
                                      offline. The details of payment should be
                                      present in the params object. If tl_method
                                      = http/get, then the payment details will
                                      be sent as url params. Two url param
                                      values, ```$transaction_id``` and
                                      ```$amount``` are mandatory.
                                    format: uri
                                  tl_method:
                                    type: string
                                  params:
                                    type: object
                                    properties:
                                      transaction_id:
                                        type: string
                                        description: >-
                                          The reference transaction ID associated
                                          with a payment activity
                                      amount:
                                        type: string
                                      currency:
                                        type: string
                                      bank_code:
                                        type: string
                                      bank_account_number:
                                        type: string
                                      virtual_payment_address:
                                        type: string
                                      source_bank_code:
                                        type: string
                                      source_bank_account_number:
                                        type: string
                                      source_virtual_payment_address:
                                        type: string
                                  type:
                                    type: string
                                    enum:
                                      - PRE-ORDER
                                      - PRE-FULFILLMENT
                                      - ON-FULFILLMENT
                                      - POST-FULFILLMENT
                                      - ON-ORDER
                                  status:
                                    type: string
                                    enum:
                                      - PAID
                                      - NOT-PAID
                                  time: *ref_146
                                  tags:
                                    type: array
                                    items: *ref_148
                            locations:
                              type: array
                              items: *ref_154
                            offers:
                              type: array
                              items: &ref_168
                                description: >-
                                  An offer associated with a catalog. This is
                                  typically used to promote a particular product
                                  and enable more purchases.
                                type: object
                                additionalProperties: false
                                properties:
                                  id:
                                    type: string
                                  descriptor: *ref_142
                                  location_ids:
                                    type: array
                                    items: *ref_155
                                  category_ids:
                                    type: array
                                    items: *ref_145
                                  item_ids:
                                    type: array
                                    items: &ref_156
                                      description: ID of the item.
                                      type: string
                                  time: *ref_146
                                  tags:
                                    type: array
                                    items: *ref_148
                            items:
                              type: array
                              items: &ref_166
                                description: >-
                                  Describes a product or a service offered to
                                  the end consumer by the provider. In the
                                  mobility sector, it can represent a fare
                                  product like one way journey. In the logistics
                                  sector, it can represent the delivery service
                                  offering. In the retail domain it can
                                  represent a product like a grocery item.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: *ref_156
                                  parent_item_id:
                                    description: ID of the item, this item is a variant of
                                    allOf:
                                      - *ref_156
                                  parent_item_quantity:
                                    description: >-
                                      The number of units of the parent item
                                      this item is a multiple of
                                    allOf:
                                      - &ref_159
                                        description: Describes the count or amount of an item
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          allocated:
                                            description: >-
                                              This represents the exact quantity
                                              allocated for purchase of the item.
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_157
                                          available:
                                            description: >-
                                              This represents the exact quantity
                                              available for purchase of the item. The
                                              buyer can only purchase multiples of
                                              this
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_157
                                          maximum:
                                            description: >-
                                              This represents the maximum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                              measure: *ref_157
                                          minimum:
                                            description: >-
                                              This represents the minimum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_157
                                          selected:
                                            description: >-
                                              This represents the quantity selected
                                              for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_157
                                          unitized:
                                            description: >-
                                              This represents the quantity available
                                              in a single unit of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                                maximum: 1
                                              measure: *ref_157
                                  descriptor:
                                    description: Physical description of the item
                                    allOf:
                                      - *ref_142
                                  creator:
                                    description: The creator of this item
                                    allOf:
                                      - *ref_158
                                  price:
                                    description: >-
                                      The price of this item, if it has
                                      intrinsic value
                                    allOf:
                                      - &ref_162
                                        description: >-
                                          Describes the price of a product or
                                          service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          currency:
                                            type: string
                                          value: *ref_139
                                          estimated_value: *ref_139
                                          computed_value: *ref_139
                                          listed_value: *ref_139
                                          offered_value: *ref_139
                                          minimum_value: *ref_139
                                          maximum_value: *ref_139
                                  quantity:
                                    description: The selling quantity of the item
                                    allOf:
                                      - *ref_159
                                  category_ids:
                                    description: Categories this item can be listed under
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_145
                                  fulfillment_ids:
                                    description: >-
                                      Modes through which this item can be
                                      fulfilled
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_160
                                  location_ids:
                                    description: >-
                                      Provider Locations this item is available
                                      in
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_155
                                  payment_ids:
                                    description: >-
                                      Payment modalities through which this item
                                      can be ordered
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_161
                                  add_ons:
                                    type: array
                                    items: &ref_167
                                      description: >-
                                        Describes an additional item offered as
                                        a value-addition to a product or
                                        service. This does not exist
                                        independently in a catalog and is always
                                        associated with an item.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          description: Provider-defined ID of the add-on
                                          type: string
                                        descriptor: *ref_142
                                        price: *ref_162
                                        quantity: *ref_159
                                  cancellation_terms:
                                    description: Cancellation terms of this item
                                    type: array
                                    items: &ref_170
                                      description: >-
                                        Describes the cancellation terms of an
                                        item or an order. This can be referenced
                                        at an item or order level. Item-level
                                        cancellation terms can override the
                                        terms at the order level.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_163
                                        reason_required:
                                          description: >-
                                            Indicates whether a reason is required
                                            to cancel the order
                                          type: boolean
                                        cancel_by:
                                          description: >-
                                            Information related to the time of
                                            cancellation.
                                          allOf:
                                            - *ref_146
                                        cancellation_fee:
                                          description: A fee applied on a particular entity
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            percentage:
                                              description: Percentage of a value
                                              allOf:
                                                - *ref_139
                                            amount:
                                              description: A fixed value
                                              allOf:
                                                - *ref_162
                                        xinput: &ref_165
                                          description: >-
                                            Contains any additional or extended
                                            inputs required to confirm an order.
                                            This is typically a Form Input.
                                            Sometimes, selection of catalog elements
                                            is not enough for the BPP to confirm an
                                            order. For example, to confirm a flight
                                            ticket, the airline requires details of
                                            the passengers along with information on
                                            baggage, identity, in addition to the
                                            class of ticket. Similarly, a logistics
                                            company may require details on the
                                            nature of shipment in order to confirm
                                            the shipping. A recruiting firm may
                                            require additional details on the
                                            applicant in order to confirm a job
                                            application. For all such purposes, the
                                            BPP can choose to send this object
                                            attached to any object in the catalog
                                            that is required to be sent while
                                            placing the order. This object can
                                            typically be sent at an item level or at
                                            the order level. The item level XInput
                                            will override the Order level XInput as
                                            it indicates a special requirement of
                                            information for that particular item.
                                            Hence the BAP must render a separate
                                            form for the Item and another form at
                                            the Order level before confirmation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            form:
                                              description: Describes a form
                                              type: object
                                              additionalProperties: false
                                              properties:
                                                url:
                                                  description: >-
                                                    The URL from where the form can be
                                                    fetched. The content fetched from the
                                                    url must be processed as per the
                                                    mime_type specified in this object. Once
                                                    fetched, the rendering platform can
                                                    choosed to render the form as-is as an
                                                    embeddable element; or process it
                                                    further to blend with the theme of the
                                                    application. In case the interface is
                                                    non-visual, the the render can process
                                                    the form data and reproduce it as per
                                                    the standard specified in the form.
                                                  type: string
                                                  format: uri
                                                data:
                                                  description: The form submission data
                                                  type: object
                                                  additionalProperties:
                                                    type: string
                                                mime_type:
                                                  description: >-
                                                    This field indicates the nature and
                                                    format of the form received by querying
                                                    the url. MIME types are defined and
                                                    standardized in IETF's RFC 6838.
                                                  type: string
                                                  enum:
                                                    - text/html
                                                    - application/xml
                                                submission_id:
                                                  type: string
                                                  format: uuid
                                            required:
                                              description: >-
                                                Indicates whether the form data is
                                                mandatorily required by the BPP to
                                                confirm the order.
                                              type: boolean
                                        external_ref: *ref_164
                                  refund_terms:
                                    description: Refund terms of this item
                                    type: array
                                    items: &ref_171
                                      description: Refund term of an item or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_152
                                        refund_eligible:
                                          description: >-
                                            Indicates if cancellation will result in
                                            a refund
                                          type: boolean
                                        refund_within:
                                          description: >-
                                            Time within which refund will be
                                            processed after successful cancellation.
                                          allOf:
                                            - *ref_146
                                        refund_amount: *ref_162
                                  replacement_terms:
                                    description: >-
                                      Terms that are applicable be met when this
                                      item is replaced
                                    type: array
                                    items: &ref_172
                                      description: >-
                                        The replacement policy of an item or an
                                        order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_152
                                        replace_within:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to replace
                                            the item before a certain date-time,
                                            failing which they will not be eligible
                                            for replacement
                                          allOf:
                                            - *ref_146
                                        external_ref: *ref_164
                                  return_terms:
                                    description: >-
                                      Terms that are applicable when this item
                                      is returned
                                    type: array
                                    items: &ref_173
                                      description: >-
                                        Describes the return policy of an item
                                        or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term IETF''s applicable.
                                          allOf:
                                            - *ref_152
                                        return_eligible:
                                          description: >-
                                            Indicates whether the item is eligible
                                            for return
                                          type: boolean
                                        return_time:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to return
                                            the item to the origin before a certain
                                            date-time, failing which they will not
                                            be eligible for refund.
                                          allOf:
                                            - *ref_146
                                        return_location:
                                          description: >-
                                            The location where the item or order
                                            must / will be returned to
                                          allOf:
                                            - *ref_154
                                        fulfillment_managed_by:
                                          description: The entity that will perform the return
                                          type: string
                                          enum:
                                            - CONSUMER
                                            - PROVIDER
                                  xinput:
                                    description: >-
                                      Additional input required from the
                                      customer to purchase / avail this item
                                    allOf:
                                      - *ref_165
                                  time:
                                    description: >-
                                      Temporal attributes of this item. This
                                      property is used when the item exists on
                                      the catalog only for a limited period of
                                      time.
                                    allOf:
                                      - *ref_146
                                  rateable:
                                    description: Whether this item can be rated
                                    type: boolean
                                  rating:
                                    description: The rating of the item
                                    allOf:
                                      - *ref_143
                                  matched:
                                    description: >-
                                      Whether this item is an exact match of the
                                      request
                                    type: boolean
                                  related:
                                    description: >-
                                      Whether this item is a related item to the
                                      exactly matched item
                                    type: boolean
                                  recommended:
                                    description: >-
                                      Whether this item is a recommended item to
                                      a response
                                    type: boolean
                                  ttl:
                                    description: >-
                                      Time to live in seconds for an instance of
                                      this schema
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_148
                            exp:
                              type: string
                              description: Time after which catalog has to be refreshed
                              format: date-time
                            rateable:
                              description: Whether this provider can be rated or not
                              type: boolean
                            ttl:
                              description: >-
                                The time-to-live in seconds, for this object.
                                This can be overriden at deeper levels. A value
                                of -1 indicates that this object is not
                                cacheable.
                              type: string
                            tags:
                              type: array
                              items: *ref_148
                    items:
                      description: The items purchased / availed in this order
                      type: array
                      items: *ref_166
                    add_ons:
                      description: The add-ons purchased / availed in this order
                      type: array
                      items: *ref_167
                    offers:
                      description: The offers applied in this order
                      type: array
                      items: *ref_168
                    billing:
                      description: The billing details of this order
                      allOf:
                        - description: >-
                            Describes the billing details of an entity.<br>This
                            has properties like
                            name,organization,address,email,phone,time,tax_number,
                            created_at,updated_at
                          type: object
                          additionalProperties: false
                          properties:
                            name:
                              description: Name of the billable entity
                              type: string
                            organization:
                              description: Details of the organization being billed.
                              allOf:
                                - *ref_158
                            address:
                              description: The address of the billable entity
                              allOf:
                                - *ref_151
                            state:
                              description: >-
                                The state where the billable entity resides.
                                This is important for state-level tax
                                calculation
                              allOf:
                                - *ref_152
                            city:
                              description: The city where the billable entity resides.
                              allOf:
                                - *ref_153
                            email:
                              description: Email address where the bill is sent to
                              type: string
                              format: email
                            phone:
                              description: Phone number of the billable entity
                              type: string
                            time:
                              description: Details regarding the billing period
                              allOf:
                                - *ref_146
                            tax_id:
                              description: >-
                                ID of the billable entity as recognized by the
                                taxation authority
                              type: string
                    fulfillments:
                      description: The fulfillments involved in completing this order
                      type: array
                      items: *ref_169
                    cancellation:
                      description: The cancellation details of this order
                      allOf:
                        - description: Describes a cancellation event
                          type: object
                          additionalProperties: false
                          properties:
                            time:
                              description: >-
                                Date-time when the order was cancelled by the
                                buyer
                              type: string
                              format: date-time
                            cancelled_by:
                              type: string
                              enum:
                                - CONSUMER
                                - PROVIDER
                            reason:
                              description: The reason for cancellation
                              allOf:
                                - description: Describes a selectable option
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    id:
                                      type: string
                                    descriptor: *ref_142
                            additional_description:
                              description: >-
                                Any additional information regarding the nature
                                of cancellation
                              allOf:
                                - *ref_142
                    cancellation_terms:
                      description: Cancellation terms of this item
                      type: array
                      items: *ref_170
                    documents:
                      type: array
                      items:
                        description: Documnents associated to the order
                        type: object
                        additionalProperties: false
                        properties:
                          descriptor: *ref_142
                          mime_type:
                            description: >-
                              This field indicates the nature and format of the
                              form received by querying the url. MIME types are
                              defined and standardized in IETF's RFC 6838.
                            type: string
                            enum:
                              - text/html
                              - application/html
                              - application/xml
                              - application/pdf
                          url:
                            description: >-
                              The URL from where the form can be fetched. The
                              content fetched from the url must be processed as
                              per the mime_type specified in this object.
                            type: string
                            format: uri
                    refund_terms:
                      description: Refund terms of this item
                      type: array
                      items: *ref_171
                    replacement_terms:
                      description: Replacement terms of this item
                      type: array
                      items: *ref_172
                    return_terms:
                      description: Return terms of this item
                      type: array
                      items: *ref_173
                    quote:
                      description: The mutually agreed upon quotation for this order.
                      allOf:
                        - description: >-
                            Describes a quote. It is the estimated price of
                            products or services from the BPP.<br>This has
                            properties like price, breakup, ttl
                          type: object
                          additionalProperties: false
                          properties:
                            id:
                              description: ID of the quote.
                              type: string
                              format: uuid
                            price:
                              description: The total quoted price
                              allOf:
                                - *ref_162
                            breakup:
                              description: the breakup of the total quoted price
                              type: array
                              items:
                                type: object
                                properties:
                                  item: *ref_166
                                  title:
                                    type: string
                                  price: *ref_162
                            ttl: *ref_144
                    payments:
                      description: The terms of settlement for this order
                      type: array
                      items: *ref_174
                    created_at:
                      description: The date-time of creation of this order
                      type: string
                      format: date-time
                    updated_at:
                      description: The date-time of updated of this order
                      type: string
                      format: date-time
                    xinput:
                      description: >-
                        Additional input required from the customer to confirm
                        this order
                      allOf:
                        - *ref_165
                    tags:
                      type: array
                      items: *ref_148
              required:
                - order
          required:
            - context
            - message
        on_init:
          type: object
          properties:
            context:
              allOf:
                - description: >-
                    Every API call in beckn protocol has a context. It provides
                    a high-level overview to the receiver about the nature of
                    the intended transaction. Typically, it is the BAP that sets
                    the transaction context based on the consumer's location and
                    action on their UI. But sometimes, during unsolicited
                    callbacks, the BPP also sets the transaction context but it
                    is usually the same as the context of a previous full-cycle,
                    request-callback interaction between the BAP and the BPP.
                    The context object contains four types of fields.
                    <ol><li>Demographic information about the transaction using
                    fields like `domain`, `country`, and
                    `region`.</li><li>Addressing details like the sending and
                    receiving platform's ID and API
                    URL.</li><li>Interoperability information like the protocol
                    version that implemented by the sender
                    and,</li><li>Transaction details like the method being
                    called at the receiver's endpoint, the transaction_id that
                    represents an end-to-end user session at the BAP, a message
                    ID to pair requests with callbacks, a timestamp to capture
                    sending times, a ttl to specifiy the validity of the
                    request, and a key to encrypt information if
                    necessary.</li></ol> This object must be passed in every
                    interaction between a BAP and a BPP. In HTTP/S
                    implementations, it is not necessary to send the context
                    during the synchronous response. However, in asynchronous
                    protocols, the context must be sent during all interactions,
                  type: object
                  additionalProperties: false
                  properties:
                    domain:
                      description: Domain code that is relevant to this transaction context
                      allOf:
                        - type: string
                          description: >-
                            Standard code representing the domain. The standard
                            is usually published as part of the network policy.
                            Furthermore, the network facilitator should also
                            provide a mechanism to provide the supported domains
                            of a network.
                    location:
                      description: >-
                        The location where the transaction is intended to be
                        fulfilled.
                      allOf:
                        - &ref_191
                          description: The physical location of something
                          type: object
                          additionalProperties: false
                          properties:
                            id: &ref_192
                              type: string
                            descriptor: &ref_179
                              description: Physical description of something.
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  type: string
                                code:
                                  type: string
                                short_desc:
                                  type: string
                                long_desc:
                                  type: string
                                additional_desc:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    content_type:
                                      type: string
                                      enum:
                                        - text/plain
                                        - text/html
                                        - application/json
                                media:
                                  type: array
                                  items: &ref_201
                                    description: >-
                                      This object contains a url to a media
                                      file.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      mimetype:
                                        description: >-
                                          indicates the nature and format of the
                                          document, file, or assortment of bytes.
                                          MIME types are defined and standardized
                                          in IETF's RFC 6838
                                        type: string
                                      url:
                                        description: The URL of the file
                                        type: string
                                        format: uri
                                      signature:
                                        description: >-
                                          The digital signature of the file signed
                                          by the sender
                                        type: string
                                      dsa:
                                        description: The signing algorithm used by the sender
                                        type: string
                                images:
                                  type: array
                                  items: &ref_184
                                    description: Describes an image
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      url:
                                        description: >-
                                          URL to the image. This can be a data url
                                          or an remote url
                                        type: string
                                        format: uri
                                      size_type:
                                        description: >-
                                          The size of the image. The network
                                          policy can define the default dimensions
                                          of each type
                                        type: string
                                        enum:
                                          - xs
                                          - sm
                                          - md
                                          - lg
                                          - xl
                                          - custom
                                      width:
                                        description: Width of the image in pixels
                                        type: string
                                      height:
                                        description: Height of the image in pixels
                                        type: string
                            map_url:
                              description: >-
                                The url to the map of the location. This can be
                                a globally recognized map url or the one
                                specified by the network policy.
                              type: string
                              format: uri
                            gps:
                              description: The GPS co-ordinates of this location.
                              allOf:
                                - &ref_175
                                  description: Describes a GPS coordinate
                                  type: string
                                  pattern: >-
                                    ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                            address:
                              description: The address of this location.
                              allOf:
                                - &ref_188
                                  description: Describes a postal address.
                                  type: string
                            city:
                              description: The city this location is, or is located within
                              allOf:
                                - &ref_190
                                  description: Describes a city
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      description: Name of the city
                                      type: string
                                    code:
                                      description: City code
                                      type: string
                            district:
                              description: The state this location is, or is located within
                              type: string
                            state:
                              description: The state this location is, or is located within
                              allOf:
                                - &ref_189
                                  description: >-
                                    A bounded geopolitical region of governance
                                    inside a country.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the state
                                    code:
                                      type: string
                                      description: >-
                                        State code as per country or
                                        international standards
                            country:
                              description: >-
                                The country this location is, or is located
                                within
                              allOf:
                                - description: Describes a country
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the country
                                    code:
                                      type: string
                                      description: >-
                                        Country code as per ISO 3166-1 and ISO
                                        3166-2 format
                            area_code:
                              type: string
                            circle:
                              description: >-
                                Describes a circular region of a specified
                                radius centered at a specified GPS coordinate.
                              type: object
                              additionalProperties: false
                              properties:
                                gps: *ref_175
                                radius: &ref_194
                                  description: Describes a scalar
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - CONSTANT
                                        - VARIABLE
                                    value: &ref_176
                                      description: >-
                                        Describes a numerical value in decimal
                                        form
                                      type: string
                                      pattern: '[+-]?([0-9]*[.])?[0-9]+'
                                    estimated_value: *ref_176
                                    computed_value: *ref_176
                                    range:
                                      type: object
                                      properties:
                                        min: *ref_176
                                        max: *ref_176
                                    unit:
                                      type: string
                            polygon:
                              description: The boundary polygon of this location
                              type: string
                            3dspace:
                              description: >-
                                The three dimensional region describing this
                                location
                              type: string
                            rating:
                              description: The rating of this location
                              allOf:
                                - &ref_180
                                  description: >-
                                    Rating value given to the object. This can
                                    be a single value or can also contain an
                                    inequality operator like gt, gte, lt, lte.
                                    This can also contain an inequality
                                    expression containing logical operators like
                                    && and ||.
                                  type: string
                    action:
                      description: >-
                        The Beckn protocol method being called by the sender and
                        executed at the receiver.
                      type: string
                    version:
                      type: string
                      description: >-
                        Version of transaction protocol being used by the
                        sender.
                    bap_id:
                      description: Subscriber ID of the BAP
                      allOf:
                        - &ref_177
                          description: >-
                            A globally unique identifier of the platform,
                            Typically it is the fully qualified domain name
                            (FQDN) of the platform.
                          type: string
                    bap_uri:
                      description: >-
                        Subscriber URL of the BAP for accepting callbacks from
                        BPPs.
                      allOf:
                        - &ref_178
                          description: >-
                            The callback URL of the Subscriber. This should
                            necessarily contain the same domain name as set in
                            `subscriber_id``.
                          type: string
                          format: uri
                    bpp_id:
                      description: Subscriber ID of the BPP
                      allOf:
                        - *ref_177
                    bpp_uri:
                      description: Subscriber URL of the BPP for accepting calls from BAPs.
                      allOf:
                        - *ref_178
                    transaction_id:
                      description: >-
                        This is a unique value which persists across all API
                        calls from `search` through `confirm`. This is done to
                        indicate an active user session across multiple
                        requests. The BPPs can use this value to push
                        personalized recommendations, and dynamic offerings
                        related to an ongoing transaction despite being unaware
                        of the user active on the BAP.
                      type: string
                      format: uuid
                    message_id:
                      description: >-
                        This is a unique value which persists during a request /
                        callback cycle. Since beckn protocol APIs are
                        asynchronous, BAPs need a common value to match an
                        incoming callback from a BPP to an earlier call. This
                        value can also be used to ignore duplicate messages
                        coming from the BPP. It is recommended to generate a
                        fresh message_id for every new interaction. When sending
                        unsolicited callbacks, BPPs must generate a new
                        message_id.
                      type: string
                      format: uuid
                    timestamp:
                      description: Time of request generation in RFC3339 format
                      type: string
                      format: date-time
                    key:
                      description: The encryption public key of the sender
                      type: string
                    ttl:
                      description: >-
                        The duration in ISO8601 format after timestamp for which
                        this message holds valid
                      type: string
                - type: object
                  properties:
                    action:
                      enum:
                        - on_init
                  required:
                    - action
            message:
              type: object
              properties:
                order:
                  description: >-
                    Describes a legal purchase order. It contains the complete
                    details of the legal contract created between the buyer and
                    the seller.
                  type: object
                  additionalProperties: false
                  properties:
                    id:
                      type: string
                      description: >-
                        Human-readable ID of the order. This is generated at the
                        BPP layer. The BPP can either generate order id within
                        its system or forward the order ID created at the
                        provider level.
                    ref_order_ids:
                      description: >-
                        A list of order IDs to link this order to previous
                        orders.
                      type: array
                      items:
                        type: string
                        description: ID of a previous order
                    status:
                      description: >-
                        Status of the order. Allowed values can be defined by
                        the network policy
                      type: string
                    type:
                      description: >-
                        This is used to indicate the type of order being created
                        to BPPs. Sometimes orders can be linked to previous
                        orders, like a replacement order in a retail domain. A
                        follow-up consultation in healthcare domain. A single
                        order part of a subscription order. The list of order
                        types can be standardized at the network level.
                      type: string
                      default: DEFAULT
                      enum:
                        - DRAFT
                        - DEFAULT
                    provider:
                      description: >-
                        Details of the provider whose catalog items have been
                        selected.
                      allOf:
                        - description: Describes the catalog of a business.
                          type: object
                          properties:
                            id:
                              type: string
                              description: Id of the provider
                            descriptor: *ref_179
                            category_id:
                              type: string
                              description: >-
                                Category Id of the provider at the BPP-level
                                catalog
                            rating: *ref_180
                            time: &ref_183
                              description: >-
                                Describes time in its various forms. It can be a
                                single point in time; duration; or a structured
                                timetable of operations<br>This has properties
                                like label, time stamp,duration,range, days,
                                schedule
                              type: object
                              additionalProperties: false
                              properties:
                                label:
                                  type: string
                                timestamp:
                                  type: string
                                  format: date-time
                                duration: &ref_181
                                  description: Describes duration as per ISO8601 format
                                  type: string
                                range:
                                  type: object
                                  properties:
                                    start:
                                      type: string
                                      format: date-time
                                    end:
                                      type: string
                                      format: date-time
                                days:
                                  type: string
                                  description: >-
                                    comma separated values representing days of
                                    the week
                                schedule:
                                  description: >-
                                    Describes schedule as a repeating time
                                    period used to describe a regularly
                                    recurring event. At a minimum a schedule
                                    will specify frequency which describes the
                                    interval between occurrences of the event.
                                    Additional information can be provided to
                                    specify the schedule more precisely. This
                                    includes identifying the timestamps(s) of
                                    when the event will take place. Schedules
                                    may also have holidays to exclude a specific
                                    day from the schedule.<br>This has
                                    properties like frequency, holidays, times
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    frequency: *ref_181
                                    holidays:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                                    times:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                            categories:
                              type: array
                              items:
                                description: >-
                                  A label under which a collection of items can
                                  be grouped.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_182
                                    description: ID of the category
                                    type: string
                                  parent_category_id: *ref_182
                                  descriptor: *ref_179
                                  time: *ref_183
                                  ttl:
                                    description: >-
                                      Time to live for an instance of this
                                      schema
                                  tags:
                                    type: array
                                    items: &ref_185
                                      description: >-
                                        A collection of tag objects with group
                                        level attributes. For detailed
                                        documentation on the Tags and Tag Groups
                                        schema go to
                                        https://github.com/beckn/protocol-specifications/discussions/316
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        display:
                                          description: >-
                                            Indicates the display properties of the
                                            tag group. If display is set to false,
                                            then the group will not be displayed. If
                                            it is set to true, it should be
                                            displayed. However, group-level display
                                            properties can be overriden by
                                            individual tag-level display property.
                                            As this schema is purely for catalog
                                            display purposes, it is not recommended
                                            to send this value during search.
                                          type: boolean
                                          default: true
                                        descriptor:
                                          description: >-
                                            Description of the TagGroup, can be used
                                            to store detailed information.
                                          allOf:
                                            - *ref_179
                                        list:
                                          description: >-
                                            An array of Tag objects listed under
                                            this group. This property can be set by
                                            BAPs during search to narrow the
                                            `search` and achieve more relevant
                                            results. When received during
                                            `on_search`, BAPs must render this list
                                            under the heading described by the
                                            `name` property of this schema.
                                          type: array
                                          items:
                                            description: >-
                                              Describes a tag. This is used to contain
                                              extended metadata. This object can be
                                              added as a property to any schema to
                                              describe extended attributes. For BAPs,
                                              tags can be sent during search to
                                              optimize and filter search results. BPPs
                                              can use tags to index their catalog to
                                              allow better search functionality. Tags
                                              are sent by the BPP as part of the
                                              catalog response in the `on_search`
                                              callback. Tags are also meant for
                                              display purposes. Upon receiving a tag,
                                              BAPs are meant to render them as
                                              name-value pairs. This is particularly
                                              useful when rendering tabular
                                              information about a product or service.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor:
                                                description: >-
                                                  Description of the Tag, can be used to
                                                  store detailed information.
                                                allOf:
                                                  - *ref_179
                                              value:
                                                description: >-
                                                  The value of the tag. This set by the
                                                  BPP and rendered as-is by the BAP.
                                                type: string
                                              display:
                                                description: >-
                                                  This value indicates if the tag is
                                                  intended for display purposes. If set to
                                                  `true`, then this tag must be displayed.
                                                  If it is set to `false`, it should not
                                                  be displayed. This value can override
                                                  the group display value.
                                                type: boolean
                            fulfillments:
                              type: array
                              items: &ref_206
                                description: >-
                                  Describes how a an order will be
                                  rendered/fulfilled to the end-customer
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_197
                                    description: >-
                                      Unique reference ID to the fulfillment of
                                      an order
                                    type: string
                                  type:
                                    description: >-
                                      A code that describes the mode of
                                      fulfillment. This is typically set when
                                      there are multiple ways an order can be
                                      fulfilled. For example, a retail order can
                                      be fulfilled either via store pickup or a
                                      home delivery. Similarly, a medical
                                      consultation can be provided either
                                      in-person or via tele-consultation. The
                                      network policy must publish standard
                                      fulfillment type codes for the different
                                      modes of fulfillment.
                                    type: string
                                  rateable:
                                    description: >-
                                      Whether the fulfillment can be rated or
                                      not
                                    type: boolean
                                  rating:
                                    description: >-
                                      The rating value of the fulfullment
                                      service.
                                    allOf:
                                      - *ref_180
                                  state:
                                    description: >-
                                      The current state of fulfillment. The BPP
                                      must set this value whenever the state of
                                      the order fulfillment changes and fire an
                                      unsolicited `on_status` call.
                                    allOf:
                                      - &ref_200
                                        description: Describes the state of fulfillment
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          descriptor: *ref_179
                                          updated_at:
                                            type: string
                                            format: date-time
                                          updated_by:
                                            type: string
                                            description: ID of entity which changed the state
                                  tracking:
                                    type: boolean
                                    description: >-
                                      Indicates whether the fulfillment allows
                                      tracking
                                    default: false
                                  customer:
                                    description: >-
                                      The person that will ultimately receive
                                      the order
                                    allOf:
                                      - description: >-
                                          Describes a customer buying/availing a
                                          product or a service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: &ref_186
                                            description: Describes a person as any individual
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              id:
                                                type: string
                                                description: Describes the identity of the person
                                              url:
                                                description: Profile url of the person
                                                type: string
                                                format: uri
                                              name:
                                                description: the name of the person
                                                type: string
                                              image: *ref_184
                                              age:
                                                description: Age of the person
                                                allOf:
                                                  - *ref_181
                                              dob:
                                                description: Date of birth of the person
                                                type: string
                                                format: date
                                              gender:
                                                type: string
                                                description: >-
                                                  Gender of something, typically a Person,
                                                  but possibly also fictional characters,
                                                  animals, etc. While Male and Female may
                                                  be used, text strings are also
                                                  acceptable for people who do not
                                                  identify as a binary gender.Allowed
                                                  values for this field can be published
                                                  in the network policy
                                              creds:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a credential of an entity -
                                                    Person or Organization
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    id:
                                                      type: string
                                                    type:
                                                      type: string
                                                      default: VerifiableCredential
                                                    url:
                                                      description: URL of the credential
                                                      type: string
                                                      format: uri
                                              languages:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a language known to the
                                                    person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              skills:
                                                type: array
                                                items:
                                                  description: Describes a skill of the person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              tags:
                                                type: array
                                                items: *ref_185
                                          contact: &ref_187
                                            description: >-
                                              Describes the contact information of an
                                              entity
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              phone:
                                                type: string
                                              email:
                                                type: string
                                              jcard:
                                                type: object
                                                description: >-
                                                  A Jcard object as per
                                                  draft-ietf-jcardcal-jcard-03
                                                  specification
                                  agent:
                                    description: >-
                                      The agent that is currently handling the
                                      fulfillment of the order
                                    allOf:
                                      - description: >-
                                          Describes the direct performer, driver
                                          or executor that fulfills an order. It
                                          is usually a person. But in some rare
                                          cases, it could be a non-living entity
                                          like a drone, or a bot. Some examples of
                                          agents are Doctor in the healthcare
                                          sector, a driver in the mobility sector,
                                          or a delivery person in the logistics
                                          sector. This object can be set at any
                                          stage of the order lifecycle. This can
                                          be set at the discovery stage when the
                                          BPP wants to provide details on the
                                          agent fulfilling the order, like in
                                          healthcare, where the doctor's name
                                          appears during search. This object can
                                          also used to search for a particular
                                          person that the customer wants
                                          fulfilling an order. Sometimes, this
                                          object gets instantiated after the order
                                          is confirmed, like in the case of
                                          on-demand taxis, where the driver is
                                          assigned after the user confirms the
                                          ride.
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: *ref_186
                                          contact: *ref_187
                                          organization: &ref_195
                                            description: >-
                                              An organization. Usually a recognized
                                              business entity.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor: *ref_179
                                              address:
                                                description: The postal address of the organization
                                                allOf:
                                                  - *ref_188
                                              state:
                                                description: >-
                                                  The state where the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_189
                                              city:
                                                description: >-
                                                  The city where the the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_190
                                              contact: *ref_187
                                          rating: *ref_180
                                  contact: *ref_187
                                  vehicle:
                                    description: >-
                                      Describes a vehicle is a device that is
                                      designed or used to transport people or
                                      cargo over land, water, air, or through
                                      space.<br>This has properties like
                                      category, capacity, make, model,
                                      size,variant,color,energy_type,registration
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      category:
                                        type: string
                                      capacity:
                                        type: integer
                                      make:
                                        type: string
                                      model:
                                        type: string
                                      size:
                                        type: string
                                      variant:
                                        type: string
                                      color:
                                        type: string
                                      energy_type:
                                        type: string
                                      registration:
                                        type: string
                                      wheels_count:
                                        type: string
                                      cargo_volumne:
                                        type: string
                                      wheelchair_access:
                                        type: string
                                      code:
                                        type: string
                                      emission_standard:
                                        type: string
                                  stops:
                                    description: >-
                                      The list of logical stops encountered
                                      during the fulfillment of an order.
                                    type: array
                                    items:
                                      description: >-
                                        A logical point in space and time during
                                        the fulfillment of an order.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          type: string
                                        parent_stop_id:
                                          type: string
                                        location:
                                          description: Location of the stop
                                          allOf:
                                            - *ref_191
                                        type:
                                          description: >-
                                            The type of stop. Allowed values of this
                                            property can be defined by the network
                                            policy.
                                          type: string
                                        time:
                                          description: Timings applicable at the stop.
                                          allOf:
                                            - *ref_183
                                        instructions:
                                          description: >-
                                            Instructions that need to be followed at
                                            the stop
                                          allOf:
                                            - *ref_179
                                        contact:
                                          description: Contact details of the stop
                                          allOf:
                                            - *ref_187
                                        person:
                                          description: >-
                                            The details of the person present at the
                                            stop
                                          allOf:
                                            - *ref_186
                                        authorization:
                                          description: >-
                                            Describes an authorization mechanism
                                            used to start or end the fulfillment of
                                            an order. For example, in the mobility
                                            sector, the driver may require a
                                            one-time password to initiate the ride.
                                            In the healthcare sector, a patient may
                                            need to provide a password to open a
                                            video conference link during a
                                            teleconsultation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            type:
                                              description: >-
                                                Type of authorization mechanism used.
                                                The allowed values for this field can be
                                                published as part of the network policy.
                                              type: string
                                            token:
                                              description: >-
                                                Token used for authorization. This is
                                                typically generated at the BPP. The BAP
                                                can send this value to the user via any
                                                channel that it uses to authenticate the
                                                user like SMS, Email, Push notification,
                                                or in-app rendering.
                                              type: string
                                            valid_from:
                                              description: >-
                                                Timestamp in RFC3339 format from which
                                                token is valid
                                              type: string
                                              format: date-time
                                            valid_to:
                                              description: >-
                                                Timestamp in RFC3339 format until which
                                                token is valid
                                              type: string
                                              format: date-time
                                            status:
                                              description: Status of the token
                                              type: string
                                  path:
                                    description: >-
                                      The physical path taken by the agent that
                                      can be rendered on a map. The allowed
                                      format of this property can be set by the
                                      network.
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_185
                            payments:
                              type: array
                              items: &ref_211
                                description: >-
                                  Describes the terms of settlement between the
                                  BAP and the BPP for a single transaction. When
                                  instantiated, this object contains <ol><li>the
                                  amount that has to be settled,</li><li>The
                                  payment destination destination
                                  details</li><li>When the settlement should
                                  happen, and</li><li>A transaction reference
                                  ID</li></ol>. During a transaction, the BPP
                                  reserves the right to decide the terms of
                                  payment. However, the BAP can send its terms
                                  to the BPP first. If the BPP does not agree to
                                  those terms, it must overwrite the terms and
                                  return them to the BAP. If overridden, the BAP
                                  must either agree to the terms sent by the BPP
                                  in order to preserve the provider's autonomy,
                                  or abort the transaction. In case of such
                                  disagreements, the BAP and the BPP can perform
                                  offline negotiations on the payment terms.
                                  Once an agreement is reached, the BAP and BPP
                                  can resume transactions.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_198
                                    description: >-
                                      ID of the payment term that can be
                                      referred at an item or an order level in a
                                      catalog
                                    type: string
                                  collected_by:
                                    description: >-
                                      This field indicates who is the collector
                                      of payment. The BAP can set this value to
                                      'bap' if it wants to collect the payment
                                      first and  settle it to the BPP. If the
                                      BPP agrees to those terms, the BPP should
                                      not send the payment url. Alternatively,
                                      the BPP can set this field with the value
                                      'bpp' if it wants the payment to be made
                                      directly.
                                    type: string
                                  url:
                                    type: string
                                    description: >-
                                      A payment url to be called by the BAP. If
                                      empty, then the payment is to be done
                                      offline. The details of payment should be
                                      present in the params object. If tl_method
                                      = http/get, then the payment details will
                                      be sent as url params. Two url param
                                      values, ```$transaction_id``` and
                                      ```$amount``` are mandatory.
                                    format: uri
                                  tl_method:
                                    type: string
                                  params:
                                    type: object
                                    properties:
                                      transaction_id:
                                        type: string
                                        description: >-
                                          The reference transaction ID associated
                                          with a payment activity
                                      amount:
                                        type: string
                                      currency:
                                        type: string
                                      bank_code:
                                        type: string
                                      bank_account_number:
                                        type: string
                                      virtual_payment_address:
                                        type: string
                                      source_bank_code:
                                        type: string
                                      source_bank_account_number:
                                        type: string
                                      source_virtual_payment_address:
                                        type: string
                                  type:
                                    type: string
                                    enum:
                                      - PRE-ORDER
                                      - PRE-FULFILLMENT
                                      - ON-FULFILLMENT
                                      - POST-FULFILLMENT
                                      - ON-ORDER
                                  status:
                                    type: string
                                    enum:
                                      - PAID
                                      - NOT-PAID
                                  time: *ref_183
                                  tags:
                                    type: array
                                    items: *ref_185
                            locations:
                              type: array
                              items: *ref_191
                            offers:
                              type: array
                              items: &ref_205
                                description: >-
                                  An offer associated with a catalog. This is
                                  typically used to promote a particular product
                                  and enable more purchases.
                                type: object
                                additionalProperties: false
                                properties:
                                  id:
                                    type: string
                                  descriptor: *ref_179
                                  location_ids:
                                    type: array
                                    items: *ref_192
                                  category_ids:
                                    type: array
                                    items: *ref_182
                                  item_ids:
                                    type: array
                                    items: &ref_193
                                      description: ID of the item.
                                      type: string
                                  time: *ref_183
                                  tags:
                                    type: array
                                    items: *ref_185
                            items:
                              type: array
                              items: &ref_203
                                description: >-
                                  Describes a product or a service offered to
                                  the end consumer by the provider. In the
                                  mobility sector, it can represent a fare
                                  product like one way journey. In the logistics
                                  sector, it can represent the delivery service
                                  offering. In the retail domain it can
                                  represent a product like a grocery item.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: *ref_193
                                  parent_item_id:
                                    description: ID of the item, this item is a variant of
                                    allOf:
                                      - *ref_193
                                  parent_item_quantity:
                                    description: >-
                                      The number of units of the parent item
                                      this item is a multiple of
                                    allOf:
                                      - &ref_196
                                        description: Describes the count or amount of an item
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          allocated:
                                            description: >-
                                              This represents the exact quantity
                                              allocated for purchase of the item.
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_194
                                          available:
                                            description: >-
                                              This represents the exact quantity
                                              available for purchase of the item. The
                                              buyer can only purchase multiples of
                                              this
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_194
                                          maximum:
                                            description: >-
                                              This represents the maximum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                              measure: *ref_194
                                          minimum:
                                            description: >-
                                              This represents the minimum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_194
                                          selected:
                                            description: >-
                                              This represents the quantity selected
                                              for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_194
                                          unitized:
                                            description: >-
                                              This represents the quantity available
                                              in a single unit of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                                maximum: 1
                                              measure: *ref_194
                                  descriptor:
                                    description: Physical description of the item
                                    allOf:
                                      - *ref_179
                                  creator:
                                    description: The creator of this item
                                    allOf:
                                      - *ref_195
                                  price:
                                    description: >-
                                      The price of this item, if it has
                                      intrinsic value
                                    allOf:
                                      - &ref_199
                                        description: >-
                                          Describes the price of a product or
                                          service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          currency:
                                            type: string
                                          value: *ref_176
                                          estimated_value: *ref_176
                                          computed_value: *ref_176
                                          listed_value: *ref_176
                                          offered_value: *ref_176
                                          minimum_value: *ref_176
                                          maximum_value: *ref_176
                                  quantity:
                                    description: The selling quantity of the item
                                    allOf:
                                      - *ref_196
                                  category_ids:
                                    description: Categories this item can be listed under
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_182
                                  fulfillment_ids:
                                    description: >-
                                      Modes through which this item can be
                                      fulfilled
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_197
                                  location_ids:
                                    description: >-
                                      Provider Locations this item is available
                                      in
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_192
                                  payment_ids:
                                    description: >-
                                      Payment modalities through which this item
                                      can be ordered
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_198
                                  add_ons:
                                    type: array
                                    items: &ref_204
                                      description: >-
                                        Describes an additional item offered as
                                        a value-addition to a product or
                                        service. This does not exist
                                        independently in a catalog and is always
                                        associated with an item.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          description: Provider-defined ID of the add-on
                                          type: string
                                        descriptor: *ref_179
                                        price: *ref_199
                                        quantity: *ref_196
                                  cancellation_terms:
                                    description: Cancellation terms of this item
                                    type: array
                                    items: &ref_207
                                      description: >-
                                        Describes the cancellation terms of an
                                        item or an order. This can be referenced
                                        at an item or order level. Item-level
                                        cancellation terms can override the
                                        terms at the order level.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_200
                                        reason_required:
                                          description: >-
                                            Indicates whether a reason is required
                                            to cancel the order
                                          type: boolean
                                        cancel_by:
                                          description: >-
                                            Information related to the time of
                                            cancellation.
                                          allOf:
                                            - *ref_183
                                        cancellation_fee:
                                          description: A fee applied on a particular entity
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            percentage:
                                              description: Percentage of a value
                                              allOf:
                                                - *ref_176
                                            amount:
                                              description: A fixed value
                                              allOf:
                                                - *ref_199
                                        xinput: &ref_202
                                          description: >-
                                            Contains any additional or extended
                                            inputs required to confirm an order.
                                            This is typically a Form Input.
                                            Sometimes, selection of catalog elements
                                            is not enough for the BPP to confirm an
                                            order. For example, to confirm a flight
                                            ticket, the airline requires details of
                                            the passengers along with information on
                                            baggage, identity, in addition to the
                                            class of ticket. Similarly, a logistics
                                            company may require details on the
                                            nature of shipment in order to confirm
                                            the shipping. A recruiting firm may
                                            require additional details on the
                                            applicant in order to confirm a job
                                            application. For all such purposes, the
                                            BPP can choose to send this object
                                            attached to any object in the catalog
                                            that is required to be sent while
                                            placing the order. This object can
                                            typically be sent at an item level or at
                                            the order level. The item level XInput
                                            will override the Order level XInput as
                                            it indicates a special requirement of
                                            information for that particular item.
                                            Hence the BAP must render a separate
                                            form for the Item and another form at
                                            the Order level before confirmation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            form:
                                              description: Describes a form
                                              type: object
                                              additionalProperties: false
                                              properties:
                                                url:
                                                  description: >-
                                                    The URL from where the form can be
                                                    fetched. The content fetched from the
                                                    url must be processed as per the
                                                    mime_type specified in this object. Once
                                                    fetched, the rendering platform can
                                                    choosed to render the form as-is as an
                                                    embeddable element; or process it
                                                    further to blend with the theme of the
                                                    application. In case the interface is
                                                    non-visual, the the render can process
                                                    the form data and reproduce it as per
                                                    the standard specified in the form.
                                                  type: string
                                                  format: uri
                                                data:
                                                  description: The form submission data
                                                  type: object
                                                  additionalProperties:
                                                    type: string
                                                mime_type:
                                                  description: >-
                                                    This field indicates the nature and
                                                    format of the form received by querying
                                                    the url. MIME types are defined and
                                                    standardized in IETF's RFC 6838.
                                                  type: string
                                                  enum:
                                                    - text/html
                                                    - application/xml
                                                submission_id:
                                                  type: string
                                                  format: uuid
                                            required:
                                              description: >-
                                                Indicates whether the form data is
                                                mandatorily required by the BPP to
                                                confirm the order.
                                              type: boolean
                                        external_ref: *ref_201
                                  refund_terms:
                                    description: Refund terms of this item
                                    type: array
                                    items: &ref_208
                                      description: Refund term of an item or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_189
                                        refund_eligible:
                                          description: >-
                                            Indicates if cancellation will result in
                                            a refund
                                          type: boolean
                                        refund_within:
                                          description: >-
                                            Time within which refund will be
                                            processed after successful cancellation.
                                          allOf:
                                            - *ref_183
                                        refund_amount: *ref_199
                                  replacement_terms:
                                    description: >-
                                      Terms that are applicable be met when this
                                      item is replaced
                                    type: array
                                    items: &ref_209
                                      description: >-
                                        The replacement policy of an item or an
                                        order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_189
                                        replace_within:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to replace
                                            the item before a certain date-time,
                                            failing which they will not be eligible
                                            for replacement
                                          allOf:
                                            - *ref_183
                                        external_ref: *ref_201
                                  return_terms:
                                    description: >-
                                      Terms that are applicable when this item
                                      is returned
                                    type: array
                                    items: &ref_210
                                      description: >-
                                        Describes the return policy of an item
                                        or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term IETF''s applicable.
                                          allOf:
                                            - *ref_189
                                        return_eligible:
                                          description: >-
                                            Indicates whether the item is eligible
                                            for return
                                          type: boolean
                                        return_time:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to return
                                            the item to the origin before a certain
                                            date-time, failing which they will not
                                            be eligible for refund.
                                          allOf:
                                            - *ref_183
                                        return_location:
                                          description: >-
                                            The location where the item or order
                                            must / will be returned to
                                          allOf:
                                            - *ref_191
                                        fulfillment_managed_by:
                                          description: The entity that will perform the return
                                          type: string
                                          enum:
                                            - CONSUMER
                                            - PROVIDER
                                  xinput:
                                    description: >-
                                      Additional input required from the
                                      customer to purchase / avail this item
                                    allOf:
                                      - *ref_202
                                  time:
                                    description: >-
                                      Temporal attributes of this item. This
                                      property is used when the item exists on
                                      the catalog only for a limited period of
                                      time.
                                    allOf:
                                      - *ref_183
                                  rateable:
                                    description: Whether this item can be rated
                                    type: boolean
                                  rating:
                                    description: The rating of the item
                                    allOf:
                                      - *ref_180
                                  matched:
                                    description: >-
                                      Whether this item is an exact match of the
                                      request
                                    type: boolean
                                  related:
                                    description: >-
                                      Whether this item is a related item to the
                                      exactly matched item
                                    type: boolean
                                  recommended:
                                    description: >-
                                      Whether this item is a recommended item to
                                      a response
                                    type: boolean
                                  ttl:
                                    description: >-
                                      Time to live in seconds for an instance of
                                      this schema
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_185
                            exp:
                              type: string
                              description: Time after which catalog has to be refreshed
                              format: date-time
                            rateable:
                              description: Whether this provider can be rated or not
                              type: boolean
                            ttl:
                              description: >-
                                The time-to-live in seconds, for this object.
                                This can be overriden at deeper levels. A value
                                of -1 indicates that this object is not
                                cacheable.
                              type: string
                            tags:
                              type: array
                              items: *ref_185
                    items:
                      description: The items purchased / availed in this order
                      type: array
                      items: *ref_203
                    add_ons:
                      description: The add-ons purchased / availed in this order
                      type: array
                      items: *ref_204
                    offers:
                      description: The offers applied in this order
                      type: array
                      items: *ref_205
                    billing:
                      description: The billing details of this order
                      allOf:
                        - description: >-
                            Describes the billing details of an entity.<br>This
                            has properties like
                            name,organization,address,email,phone,time,tax_number,
                            created_at,updated_at
                          type: object
                          additionalProperties: false
                          properties:
                            name:
                              description: Name of the billable entity
                              type: string
                            organization:
                              description: Details of the organization being billed.
                              allOf:
                                - *ref_195
                            address:
                              description: The address of the billable entity
                              allOf:
                                - *ref_188
                            state:
                              description: >-
                                The state where the billable entity resides.
                                This is important for state-level tax
                                calculation
                              allOf:
                                - *ref_189
                            city:
                              description: The city where the billable entity resides.
                              allOf:
                                - *ref_190
                            email:
                              description: Email address where the bill is sent to
                              type: string
                              format: email
                            phone:
                              description: Phone number of the billable entity
                              type: string
                            time:
                              description: Details regarding the billing period
                              allOf:
                                - *ref_183
                            tax_id:
                              description: >-
                                ID of the billable entity as recognized by the
                                taxation authority
                              type: string
                    fulfillments:
                      description: The fulfillments involved in completing this order
                      type: array
                      items: *ref_206
                    cancellation:
                      description: The cancellation details of this order
                      allOf:
                        - description: Describes a cancellation event
                          type: object
                          additionalProperties: false
                          properties:
                            time:
                              description: >-
                                Date-time when the order was cancelled by the
                                buyer
                              type: string
                              format: date-time
                            cancelled_by:
                              type: string
                              enum:
                                - CONSUMER
                                - PROVIDER
                            reason:
                              description: The reason for cancellation
                              allOf:
                                - description: Describes a selectable option
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    id:
                                      type: string
                                    descriptor: *ref_179
                            additional_description:
                              description: >-
                                Any additional information regarding the nature
                                of cancellation
                              allOf:
                                - *ref_179
                    cancellation_terms:
                      description: Cancellation terms of this item
                      type: array
                      items: *ref_207
                    documents:
                      type: array
                      items:
                        description: Documnents associated to the order
                        type: object
                        additionalProperties: false
                        properties:
                          descriptor: *ref_179
                          mime_type:
                            description: >-
                              This field indicates the nature and format of the
                              form received by querying the url. MIME types are
                              defined and standardized in IETF's RFC 6838.
                            type: string
                            enum:
                              - text/html
                              - application/html
                              - application/xml
                              - application/pdf
                          url:
                            description: >-
                              The URL from where the form can be fetched. The
                              content fetched from the url must be processed as
                              per the mime_type specified in this object.
                            type: string
                            format: uri
                    refund_terms:
                      description: Refund terms of this item
                      type: array
                      items: *ref_208
                    replacement_terms:
                      description: Replacement terms of this item
                      type: array
                      items: *ref_209
                    return_terms:
                      description: Return terms of this item
                      type: array
                      items: *ref_210
                    quote:
                      description: The mutually agreed upon quotation for this order.
                      allOf:
                        - description: >-
                            Describes a quote. It is the estimated price of
                            products or services from the BPP.<br>This has
                            properties like price, breakup, ttl
                          type: object
                          additionalProperties: false
                          properties:
                            id:
                              description: ID of the quote.
                              type: string
                              format: uuid
                            price:
                              description: The total quoted price
                              allOf:
                                - *ref_199
                            breakup:
                              description: the breakup of the total quoted price
                              type: array
                              items:
                                type: object
                                properties:
                                  item: *ref_203
                                  title:
                                    type: string
                                  price: *ref_199
                            ttl: *ref_181
                    payments:
                      description: The terms of settlement for this order
                      type: array
                      items: *ref_211
                    created_at:
                      description: The date-time of creation of this order
                      type: string
                      format: date-time
                    updated_at:
                      description: The date-time of updated of this order
                      type: string
                      format: date-time
                    xinput:
                      description: >-
                        Additional input required from the customer to confirm
                        this order
                      allOf:
                        - *ref_202
                    tags:
                      type: array
                      items: *ref_185
              required:
                - order
            error:
              description: >-
                Describes an error object that is returned by a BAP, BPP or BG
                as a response or callback to an action by another network
                participant. This object is sent when any request received by a
                network participant is unacceptable. This object can be sent
                either during Ack or with the callback.
              type: object
              additionalProperties: false
              properties:
                code:
                  type: string
                  description: >-
                    Standard error code. For full list of error codes, refer to
                    docs/protocol-drafts/BECKN-005-ERROR-CODES-DRAFT-01.md of
                    this repo"
                paths:
                  type: string
                  description: >-
                    Path to json schema generating the error. Used only during
                    json schema validation errors
                message:
                  type: string
                  description: >-
                    Human readable message describing the error. Used mainly for
                    logging. Not recommended to be shown to the user.
          required:
            - context
        confirm:
          type: object
          properties:
            context:
              allOf:
                - description: >-
                    Every API call in beckn protocol has a context. It provides
                    a high-level overview to the receiver about the nature of
                    the intended transaction. Typically, it is the BAP that sets
                    the transaction context based on the consumer's location and
                    action on their UI. But sometimes, during unsolicited
                    callbacks, the BPP also sets the transaction context but it
                    is usually the same as the context of a previous full-cycle,
                    request-callback interaction between the BAP and the BPP.
                    The context object contains four types of fields.
                    <ol><li>Demographic information about the transaction using
                    fields like `domain`, `country`, and
                    `region`.</li><li>Addressing details like the sending and
                    receiving platform's ID and API
                    URL.</li><li>Interoperability information like the protocol
                    version that implemented by the sender
                    and,</li><li>Transaction details like the method being
                    called at the receiver's endpoint, the transaction_id that
                    represents an end-to-end user session at the BAP, a message
                    ID to pair requests with callbacks, a timestamp to capture
                    sending times, a ttl to specifiy the validity of the
                    request, and a key to encrypt information if
                    necessary.</li></ol> This object must be passed in every
                    interaction between a BAP and a BPP. In HTTP/S
                    implementations, it is not necessary to send the context
                    during the synchronous response. However, in asynchronous
                    protocols, the context must be sent during all interactions,
                  type: object
                  additionalProperties: false
                  properties:
                    domain:
                      description: Domain code that is relevant to this transaction context
                      allOf:
                        - type: string
                          description: >-
                            Standard code representing the domain. The standard
                            is usually published as part of the network policy.
                            Furthermore, the network facilitator should also
                            provide a mechanism to provide the supported domains
                            of a network.
                    location:
                      description: >-
                        The location where the transaction is intended to be
                        fulfilled.
                      allOf:
                        - &ref_228
                          description: The physical location of something
                          type: object
                          additionalProperties: false
                          properties:
                            id: &ref_229
                              type: string
                            descriptor: &ref_216
                              description: Physical description of something.
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  type: string
                                code:
                                  type: string
                                short_desc:
                                  type: string
                                long_desc:
                                  type: string
                                additional_desc:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    content_type:
                                      type: string
                                      enum:
                                        - text/plain
                                        - text/html
                                        - application/json
                                media:
                                  type: array
                                  items: &ref_238
                                    description: >-
                                      This object contains a url to a media
                                      file.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      mimetype:
                                        description: >-
                                          indicates the nature and format of the
                                          document, file, or assortment of bytes.
                                          MIME types are defined and standardized
                                          in IETF's RFC 6838
                                        type: string
                                      url:
                                        description: The URL of the file
                                        type: string
                                        format: uri
                                      signature:
                                        description: >-
                                          The digital signature of the file signed
                                          by the sender
                                        type: string
                                      dsa:
                                        description: The signing algorithm used by the sender
                                        type: string
                                images:
                                  type: array
                                  items: &ref_221
                                    description: Describes an image
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      url:
                                        description: >-
                                          URL to the image. This can be a data url
                                          or an remote url
                                        type: string
                                        format: uri
                                      size_type:
                                        description: >-
                                          The size of the image. The network
                                          policy can define the default dimensions
                                          of each type
                                        type: string
                                        enum:
                                          - xs
                                          - sm
                                          - md
                                          - lg
                                          - xl
                                          - custom
                                      width:
                                        description: Width of the image in pixels
                                        type: string
                                      height:
                                        description: Height of the image in pixels
                                        type: string
                            map_url:
                              description: >-
                                The url to the map of the location. This can be
                                a globally recognized map url or the one
                                specified by the network policy.
                              type: string
                              format: uri
                            gps:
                              description: The GPS co-ordinates of this location.
                              allOf:
                                - &ref_212
                                  description: Describes a GPS coordinate
                                  type: string
                                  pattern: >-
                                    ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                            address:
                              description: The address of this location.
                              allOf:
                                - &ref_225
                                  description: Describes a postal address.
                                  type: string
                            city:
                              description: The city this location is, or is located within
                              allOf:
                                - &ref_227
                                  description: Describes a city
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      description: Name of the city
                                      type: string
                                    code:
                                      description: City code
                                      type: string
                            district:
                              description: The state this location is, or is located within
                              type: string
                            state:
                              description: The state this location is, or is located within
                              allOf:
                                - &ref_226
                                  description: >-
                                    A bounded geopolitical region of governance
                                    inside a country.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the state
                                    code:
                                      type: string
                                      description: >-
                                        State code as per country or
                                        international standards
                            country:
                              description: >-
                                The country this location is, or is located
                                within
                              allOf:
                                - description: Describes a country
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the country
                                    code:
                                      type: string
                                      description: >-
                                        Country code as per ISO 3166-1 and ISO
                                        3166-2 format
                            area_code:
                              type: string
                            circle:
                              description: >-
                                Describes a circular region of a specified
                                radius centered at a specified GPS coordinate.
                              type: object
                              additionalProperties: false
                              properties:
                                gps: *ref_212
                                radius: &ref_231
                                  description: Describes a scalar
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - CONSTANT
                                        - VARIABLE
                                    value: &ref_213
                                      description: >-
                                        Describes a numerical value in decimal
                                        form
                                      type: string
                                      pattern: '[+-]?([0-9]*[.])?[0-9]+'
                                    estimated_value: *ref_213
                                    computed_value: *ref_213
                                    range:
                                      type: object
                                      properties:
                                        min: *ref_213
                                        max: *ref_213
                                    unit:
                                      type: string
                            polygon:
                              description: The boundary polygon of this location
                              type: string
                            3dspace:
                              description: >-
                                The three dimensional region describing this
                                location
                              type: string
                            rating:
                              description: The rating of this location
                              allOf:
                                - &ref_217
                                  description: >-
                                    Rating value given to the object. This can
                                    be a single value or can also contain an
                                    inequality operator like gt, gte, lt, lte.
                                    This can also contain an inequality
                                    expression containing logical operators like
                                    && and ||.
                                  type: string
                    action:
                      description: >-
                        The Beckn protocol method being called by the sender and
                        executed at the receiver.
                      type: string
                    version:
                      type: string
                      description: >-
                        Version of transaction protocol being used by the
                        sender.
                    bap_id:
                      description: Subscriber ID of the BAP
                      allOf:
                        - &ref_214
                          description: >-
                            A globally unique identifier of the platform,
                            Typically it is the fully qualified domain name
                            (FQDN) of the platform.
                          type: string
                    bap_uri:
                      description: >-
                        Subscriber URL of the BAP for accepting callbacks from
                        BPPs.
                      allOf:
                        - &ref_215
                          description: >-
                            The callback URL of the Subscriber. This should
                            necessarily contain the same domain name as set in
                            `subscriber_id``.
                          type: string
                          format: uri
                    bpp_id:
                      description: Subscriber ID of the BPP
                      allOf:
                        - *ref_214
                    bpp_uri:
                      description: Subscriber URL of the BPP for accepting calls from BAPs.
                      allOf:
                        - *ref_215
                    transaction_id:
                      description: >-
                        This is a unique value which persists across all API
                        calls from `search` through `confirm`. This is done to
                        indicate an active user session across multiple
                        requests. The BPPs can use this value to push
                        personalized recommendations, and dynamic offerings
                        related to an ongoing transaction despite being unaware
                        of the user active on the BAP.
                      type: string
                      format: uuid
                    message_id:
                      description: >-
                        This is a unique value which persists during a request /
                        callback cycle. Since beckn protocol APIs are
                        asynchronous, BAPs need a common value to match an
                        incoming callback from a BPP to an earlier call. This
                        value can also be used to ignore duplicate messages
                        coming from the BPP. It is recommended to generate a
                        fresh message_id for every new interaction. When sending
                        unsolicited callbacks, BPPs must generate a new
                        message_id.
                      type: string
                      format: uuid
                    timestamp:
                      description: Time of request generation in RFC3339 format
                      type: string
                      format: date-time
                    key:
                      description: The encryption public key of the sender
                      type: string
                    ttl:
                      description: >-
                        The duration in ISO8601 format after timestamp for which
                        this message holds valid
                      type: string
                - type: object
                  properties:
                    action:
                      enum:
                        - confirm
                  required:
                    - action
            message:
              type: object
              properties:
                order:
                  description: >-
                    Describes a legal purchase order. It contains the complete
                    details of the legal contract created between the buyer and
                    the seller.
                  type: object
                  additionalProperties: false
                  properties:
                    id:
                      type: string
                      description: >-
                        Human-readable ID of the order. This is generated at the
                        BPP layer. The BPP can either generate order id within
                        its system or forward the order ID created at the
                        provider level.
                    ref_order_ids:
                      description: >-
                        A list of order IDs to link this order to previous
                        orders.
                      type: array
                      items:
                        type: string
                        description: ID of a previous order
                    status:
                      description: >-
                        Status of the order. Allowed values can be defined by
                        the network policy
                      type: string
                    type:
                      description: >-
                        This is used to indicate the type of order being created
                        to BPPs. Sometimes orders can be linked to previous
                        orders, like a replacement order in a retail domain. A
                        follow-up consultation in healthcare domain. A single
                        order part of a subscription order. The list of order
                        types can be standardized at the network level.
                      type: string
                      default: DEFAULT
                      enum:
                        - DRAFT
                        - DEFAULT
                    provider:
                      description: >-
                        Details of the provider whose catalog items have been
                        selected.
                      allOf:
                        - description: Describes the catalog of a business.
                          type: object
                          properties:
                            id:
                              type: string
                              description: Id of the provider
                            descriptor: *ref_216
                            category_id:
                              type: string
                              description: >-
                                Category Id of the provider at the BPP-level
                                catalog
                            rating: *ref_217
                            time: &ref_220
                              description: >-
                                Describes time in its various forms. It can be a
                                single point in time; duration; or a structured
                                timetable of operations<br>This has properties
                                like label, time stamp,duration,range, days,
                                schedule
                              type: object
                              additionalProperties: false
                              properties:
                                label:
                                  type: string
                                timestamp:
                                  type: string
                                  format: date-time
                                duration: &ref_218
                                  description: Describes duration as per ISO8601 format
                                  type: string
                                range:
                                  type: object
                                  properties:
                                    start:
                                      type: string
                                      format: date-time
                                    end:
                                      type: string
                                      format: date-time
                                days:
                                  type: string
                                  description: >-
                                    comma separated values representing days of
                                    the week
                                schedule:
                                  description: >-
                                    Describes schedule as a repeating time
                                    period used to describe a regularly
                                    recurring event. At a minimum a schedule
                                    will specify frequency which describes the
                                    interval between occurrences of the event.
                                    Additional information can be provided to
                                    specify the schedule more precisely. This
                                    includes identifying the timestamps(s) of
                                    when the event will take place. Schedules
                                    may also have holidays to exclude a specific
                                    day from the schedule.<br>This has
                                    properties like frequency, holidays, times
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    frequency: *ref_218
                                    holidays:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                                    times:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                            categories:
                              type: array
                              items:
                                description: >-
                                  A label under which a collection of items can
                                  be grouped.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_219
                                    description: ID of the category
                                    type: string
                                  parent_category_id: *ref_219
                                  descriptor: *ref_216
                                  time: *ref_220
                                  ttl:
                                    description: >-
                                      Time to live for an instance of this
                                      schema
                                  tags:
                                    type: array
                                    items: &ref_222
                                      description: >-
                                        A collection of tag objects with group
                                        level attributes. For detailed
                                        documentation on the Tags and Tag Groups
                                        schema go to
                                        https://github.com/beckn/protocol-specifications/discussions/316
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        display:
                                          description: >-
                                            Indicates the display properties of the
                                            tag group. If display is set to false,
                                            then the group will not be displayed. If
                                            it is set to true, it should be
                                            displayed. However, group-level display
                                            properties can be overriden by
                                            individual tag-level display property.
                                            As this schema is purely for catalog
                                            display purposes, it is not recommended
                                            to send this value during search.
                                          type: boolean
                                          default: true
                                        descriptor:
                                          description: >-
                                            Description of the TagGroup, can be used
                                            to store detailed information.
                                          allOf:
                                            - *ref_216
                                        list:
                                          description: >-
                                            An array of Tag objects listed under
                                            this group. This property can be set by
                                            BAPs during search to narrow the
                                            `search` and achieve more relevant
                                            results. When received during
                                            `on_search`, BAPs must render this list
                                            under the heading described by the
                                            `name` property of this schema.
                                          type: array
                                          items:
                                            description: >-
                                              Describes a tag. This is used to contain
                                              extended metadata. This object can be
                                              added as a property to any schema to
                                              describe extended attributes. For BAPs,
                                              tags can be sent during search to
                                              optimize and filter search results. BPPs
                                              can use tags to index their catalog to
                                              allow better search functionality. Tags
                                              are sent by the BPP as part of the
                                              catalog response in the `on_search`
                                              callback. Tags are also meant for
                                              display purposes. Upon receiving a tag,
                                              BAPs are meant to render them as
                                              name-value pairs. This is particularly
                                              useful when rendering tabular
                                              information about a product or service.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor:
                                                description: >-
                                                  Description of the Tag, can be used to
                                                  store detailed information.
                                                allOf:
                                                  - *ref_216
                                              value:
                                                description: >-
                                                  The value of the tag. This set by the
                                                  BPP and rendered as-is by the BAP.
                                                type: string
                                              display:
                                                description: >-
                                                  This value indicates if the tag is
                                                  intended for display purposes. If set to
                                                  `true`, then this tag must be displayed.
                                                  If it is set to `false`, it should not
                                                  be displayed. This value can override
                                                  the group display value.
                                                type: boolean
                            fulfillments:
                              type: array
                              items: &ref_243
                                description: >-
                                  Describes how a an order will be
                                  rendered/fulfilled to the end-customer
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_234
                                    description: >-
                                      Unique reference ID to the fulfillment of
                                      an order
                                    type: string
                                  type:
                                    description: >-
                                      A code that describes the mode of
                                      fulfillment. This is typically set when
                                      there are multiple ways an order can be
                                      fulfilled. For example, a retail order can
                                      be fulfilled either via store pickup or a
                                      home delivery. Similarly, a medical
                                      consultation can be provided either
                                      in-person or via tele-consultation. The
                                      network policy must publish standard
                                      fulfillment type codes for the different
                                      modes of fulfillment.
                                    type: string
                                  rateable:
                                    description: >-
                                      Whether the fulfillment can be rated or
                                      not
                                    type: boolean
                                  rating:
                                    description: >-
                                      The rating value of the fulfullment
                                      service.
                                    allOf:
                                      - *ref_217
                                  state:
                                    description: >-
                                      The current state of fulfillment. The BPP
                                      must set this value whenever the state of
                                      the order fulfillment changes and fire an
                                      unsolicited `on_status` call.
                                    allOf:
                                      - &ref_237
                                        description: Describes the state of fulfillment
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          descriptor: *ref_216
                                          updated_at:
                                            type: string
                                            format: date-time
                                          updated_by:
                                            type: string
                                            description: ID of entity which changed the state
                                  tracking:
                                    type: boolean
                                    description: >-
                                      Indicates whether the fulfillment allows
                                      tracking
                                    default: false
                                  customer:
                                    description: >-
                                      The person that will ultimately receive
                                      the order
                                    allOf:
                                      - description: >-
                                          Describes a customer buying/availing a
                                          product or a service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: &ref_223
                                            description: Describes a person as any individual
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              id:
                                                type: string
                                                description: Describes the identity of the person
                                              url:
                                                description: Profile url of the person
                                                type: string
                                                format: uri
                                              name:
                                                description: the name of the person
                                                type: string
                                              image: *ref_221
                                              age:
                                                description: Age of the person
                                                allOf:
                                                  - *ref_218
                                              dob:
                                                description: Date of birth of the person
                                                type: string
                                                format: date
                                              gender:
                                                type: string
                                                description: >-
                                                  Gender of something, typically a Person,
                                                  but possibly also fictional characters,
                                                  animals, etc. While Male and Female may
                                                  be used, text strings are also
                                                  acceptable for people who do not
                                                  identify as a binary gender.Allowed
                                                  values for this field can be published
                                                  in the network policy
                                              creds:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a credential of an entity -
                                                    Person or Organization
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    id:
                                                      type: string
                                                    type:
                                                      type: string
                                                      default: VerifiableCredential
                                                    url:
                                                      description: URL of the credential
                                                      type: string
                                                      format: uri
                                              languages:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a language known to the
                                                    person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              skills:
                                                type: array
                                                items:
                                                  description: Describes a skill of the person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              tags:
                                                type: array
                                                items: *ref_222
                                          contact: &ref_224
                                            description: >-
                                              Describes the contact information of an
                                              entity
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              phone:
                                                type: string
                                              email:
                                                type: string
                                              jcard:
                                                type: object
                                                description: >-
                                                  A Jcard object as per
                                                  draft-ietf-jcardcal-jcard-03
                                                  specification
                                  agent:
                                    description: >-
                                      The agent that is currently handling the
                                      fulfillment of the order
                                    allOf:
                                      - description: >-
                                          Describes the direct performer, driver
                                          or executor that fulfills an order. It
                                          is usually a person. But in some rare
                                          cases, it could be a non-living entity
                                          like a drone, or a bot. Some examples of
                                          agents are Doctor in the healthcare
                                          sector, a driver in the mobility sector,
                                          or a delivery person in the logistics
                                          sector. This object can be set at any
                                          stage of the order lifecycle. This can
                                          be set at the discovery stage when the
                                          BPP wants to provide details on the
                                          agent fulfilling the order, like in
                                          healthcare, where the doctor's name
                                          appears during search. This object can
                                          also used to search for a particular
                                          person that the customer wants
                                          fulfilling an order. Sometimes, this
                                          object gets instantiated after the order
                                          is confirmed, like in the case of
                                          on-demand taxis, where the driver is
                                          assigned after the user confirms the
                                          ride.
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: *ref_223
                                          contact: *ref_224
                                          organization: &ref_232
                                            description: >-
                                              An organization. Usually a recognized
                                              business entity.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor: *ref_216
                                              address:
                                                description: The postal address of the organization
                                                allOf:
                                                  - *ref_225
                                              state:
                                                description: >-
                                                  The state where the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_226
                                              city:
                                                description: >-
                                                  The city where the the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_227
                                              contact: *ref_224
                                          rating: *ref_217
                                  contact: *ref_224
                                  vehicle:
                                    description: >-
                                      Describes a vehicle is a device that is
                                      designed or used to transport people or
                                      cargo over land, water, air, or through
                                      space.<br>This has properties like
                                      category, capacity, make, model,
                                      size,variant,color,energy_type,registration
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      category:
                                        type: string
                                      capacity:
                                        type: integer
                                      make:
                                        type: string
                                      model:
                                        type: string
                                      size:
                                        type: string
                                      variant:
                                        type: string
                                      color:
                                        type: string
                                      energy_type:
                                        type: string
                                      registration:
                                        type: string
                                      wheels_count:
                                        type: string
                                      cargo_volumne:
                                        type: string
                                      wheelchair_access:
                                        type: string
                                      code:
                                        type: string
                                      emission_standard:
                                        type: string
                                  stops:
                                    description: >-
                                      The list of logical stops encountered
                                      during the fulfillment of an order.
                                    type: array
                                    items:
                                      description: >-
                                        A logical point in space and time during
                                        the fulfillment of an order.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          type: string
                                        parent_stop_id:
                                          type: string
                                        location:
                                          description: Location of the stop
                                          allOf:
                                            - *ref_228
                                        type:
                                          description: >-
                                            The type of stop. Allowed values of this
                                            property can be defined by the network
                                            policy.
                                          type: string
                                        time:
                                          description: Timings applicable at the stop.
                                          allOf:
                                            - *ref_220
                                        instructions:
                                          description: >-
                                            Instructions that need to be followed at
                                            the stop
                                          allOf:
                                            - *ref_216
                                        contact:
                                          description: Contact details of the stop
                                          allOf:
                                            - *ref_224
                                        person:
                                          description: >-
                                            The details of the person present at the
                                            stop
                                          allOf:
                                            - *ref_223
                                        authorization:
                                          description: >-
                                            Describes an authorization mechanism
                                            used to start or end the fulfillment of
                                            an order. For example, in the mobility
                                            sector, the driver may require a
                                            one-time password to initiate the ride.
                                            In the healthcare sector, a patient may
                                            need to provide a password to open a
                                            video conference link during a
                                            teleconsultation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            type:
                                              description: >-
                                                Type of authorization mechanism used.
                                                The allowed values for this field can be
                                                published as part of the network policy.
                                              type: string
                                            token:
                                              description: >-
                                                Token used for authorization. This is
                                                typically generated at the BPP. The BAP
                                                can send this value to the user via any
                                                channel that it uses to authenticate the
                                                user like SMS, Email, Push notification,
                                                or in-app rendering.
                                              type: string
                                            valid_from:
                                              description: >-
                                                Timestamp in RFC3339 format from which
                                                token is valid
                                              type: string
                                              format: date-time
                                            valid_to:
                                              description: >-
                                                Timestamp in RFC3339 format until which
                                                token is valid
                                              type: string
                                              format: date-time
                                            status:
                                              description: Status of the token
                                              type: string
                                  path:
                                    description: >-
                                      The physical path taken by the agent that
                                      can be rendered on a map. The allowed
                                      format of this property can be set by the
                                      network.
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_222
                            payments:
                              type: array
                              items: &ref_248
                                description: >-
                                  Describes the terms of settlement between the
                                  BAP and the BPP for a single transaction. When
                                  instantiated, this object contains <ol><li>the
                                  amount that has to be settled,</li><li>The
                                  payment destination destination
                                  details</li><li>When the settlement should
                                  happen, and</li><li>A transaction reference
                                  ID</li></ol>. During a transaction, the BPP
                                  reserves the right to decide the terms of
                                  payment. However, the BAP can send its terms
                                  to the BPP first. If the BPP does not agree to
                                  those terms, it must overwrite the terms and
                                  return them to the BAP. If overridden, the BAP
                                  must either agree to the terms sent by the BPP
                                  in order to preserve the provider's autonomy,
                                  or abort the transaction. In case of such
                                  disagreements, the BAP and the BPP can perform
                                  offline negotiations on the payment terms.
                                  Once an agreement is reached, the BAP and BPP
                                  can resume transactions.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_235
                                    description: >-
                                      ID of the payment term that can be
                                      referred at an item or an order level in a
                                      catalog
                                    type: string
                                  collected_by:
                                    description: >-
                                      This field indicates who is the collector
                                      of payment. The BAP can set this value to
                                      'bap' if it wants to collect the payment
                                      first and  settle it to the BPP. If the
                                      BPP agrees to those terms, the BPP should
                                      not send the payment url. Alternatively,
                                      the BPP can set this field with the value
                                      'bpp' if it wants the payment to be made
                                      directly.
                                    type: string
                                  url:
                                    type: string
                                    description: >-
                                      A payment url to be called by the BAP. If
                                      empty, then the payment is to be done
                                      offline. The details of payment should be
                                      present in the params object. If tl_method
                                      = http/get, then the payment details will
                                      be sent as url params. Two url param
                                      values, ```$transaction_id``` and
                                      ```$amount``` are mandatory.
                                    format: uri
                                  tl_method:
                                    type: string
                                  params:
                                    type: object
                                    properties:
                                      transaction_id:
                                        type: string
                                        description: >-
                                          The reference transaction ID associated
                                          with a payment activity
                                      amount:
                                        type: string
                                      currency:
                                        type: string
                                      bank_code:
                                        type: string
                                      bank_account_number:
                                        type: string
                                      virtual_payment_address:
                                        type: string
                                      source_bank_code:
                                        type: string
                                      source_bank_account_number:
                                        type: string
                                      source_virtual_payment_address:
                                        type: string
                                  type:
                                    type: string
                                    enum:
                                      - PRE-ORDER
                                      - PRE-FULFILLMENT
                                      - ON-FULFILLMENT
                                      - POST-FULFILLMENT
                                      - ON-ORDER
                                  status:
                                    type: string
                                    enum:
                                      - PAID
                                      - NOT-PAID
                                  time: *ref_220
                                  tags:
                                    type: array
                                    items: *ref_222
                            locations:
                              type: array
                              items: *ref_228
                            offers:
                              type: array
                              items: &ref_242
                                description: >-
                                  An offer associated with a catalog. This is
                                  typically used to promote a particular product
                                  and enable more purchases.
                                type: object
                                additionalProperties: false
                                properties:
                                  id:
                                    type: string
                                  descriptor: *ref_216
                                  location_ids:
                                    type: array
                                    items: *ref_229
                                  category_ids:
                                    type: array
                                    items: *ref_219
                                  item_ids:
                                    type: array
                                    items: &ref_230
                                      description: ID of the item.
                                      type: string
                                  time: *ref_220
                                  tags:
                                    type: array
                                    items: *ref_222
                            items:
                              type: array
                              items: &ref_240
                                description: >-
                                  Describes a product or a service offered to
                                  the end consumer by the provider. In the
                                  mobility sector, it can represent a fare
                                  product like one way journey. In the logistics
                                  sector, it can represent the delivery service
                                  offering. In the retail domain it can
                                  represent a product like a grocery item.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: *ref_230
                                  parent_item_id:
                                    description: ID of the item, this item is a variant of
                                    allOf:
                                      - *ref_230
                                  parent_item_quantity:
                                    description: >-
                                      The number of units of the parent item
                                      this item is a multiple of
                                    allOf:
                                      - &ref_233
                                        description: Describes the count or amount of an item
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          allocated:
                                            description: >-
                                              This represents the exact quantity
                                              allocated for purchase of the item.
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_231
                                          available:
                                            description: >-
                                              This represents the exact quantity
                                              available for purchase of the item. The
                                              buyer can only purchase multiples of
                                              this
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_231
                                          maximum:
                                            description: >-
                                              This represents the maximum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                              measure: *ref_231
                                          minimum:
                                            description: >-
                                              This represents the minimum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_231
                                          selected:
                                            description: >-
                                              This represents the quantity selected
                                              for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_231
                                          unitized:
                                            description: >-
                                              This represents the quantity available
                                              in a single unit of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                                maximum: 1
                                              measure: *ref_231
                                  descriptor:
                                    description: Physical description of the item
                                    allOf:
                                      - *ref_216
                                  creator:
                                    description: The creator of this item
                                    allOf:
                                      - *ref_232
                                  price:
                                    description: >-
                                      The price of this item, if it has
                                      intrinsic value
                                    allOf:
                                      - &ref_236
                                        description: >-
                                          Describes the price of a product or
                                          service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          currency:
                                            type: string
                                          value: *ref_213
                                          estimated_value: *ref_213
                                          computed_value: *ref_213
                                          listed_value: *ref_213
                                          offered_value: *ref_213
                                          minimum_value: *ref_213
                                          maximum_value: *ref_213
                                  quantity:
                                    description: The selling quantity of the item
                                    allOf:
                                      - *ref_233
                                  category_ids:
                                    description: Categories this item can be listed under
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_219
                                  fulfillment_ids:
                                    description: >-
                                      Modes through which this item can be
                                      fulfilled
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_234
                                  location_ids:
                                    description: >-
                                      Provider Locations this item is available
                                      in
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_229
                                  payment_ids:
                                    description: >-
                                      Payment modalities through which this item
                                      can be ordered
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_235
                                  add_ons:
                                    type: array
                                    items: &ref_241
                                      description: >-
                                        Describes an additional item offered as
                                        a value-addition to a product or
                                        service. This does not exist
                                        independently in a catalog and is always
                                        associated with an item.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          description: Provider-defined ID of the add-on
                                          type: string
                                        descriptor: *ref_216
                                        price: *ref_236
                                        quantity: *ref_233
                                  cancellation_terms:
                                    description: Cancellation terms of this item
                                    type: array
                                    items: &ref_244
                                      description: >-
                                        Describes the cancellation terms of an
                                        item or an order. This can be referenced
                                        at an item or order level. Item-level
                                        cancellation terms can override the
                                        terms at the order level.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_237
                                        reason_required:
                                          description: >-
                                            Indicates whether a reason is required
                                            to cancel the order
                                          type: boolean
                                        cancel_by:
                                          description: >-
                                            Information related to the time of
                                            cancellation.
                                          allOf:
                                            - *ref_220
                                        cancellation_fee:
                                          description: A fee applied on a particular entity
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            percentage:
                                              description: Percentage of a value
                                              allOf:
                                                - *ref_213
                                            amount:
                                              description: A fixed value
                                              allOf:
                                                - *ref_236
                                        xinput: &ref_239
                                          description: >-
                                            Contains any additional or extended
                                            inputs required to confirm an order.
                                            This is typically a Form Input.
                                            Sometimes, selection of catalog elements
                                            is not enough for the BPP to confirm an
                                            order. For example, to confirm a flight
                                            ticket, the airline requires details of
                                            the passengers along with information on
                                            baggage, identity, in addition to the
                                            class of ticket. Similarly, a logistics
                                            company may require details on the
                                            nature of shipment in order to confirm
                                            the shipping. A recruiting firm may
                                            require additional details on the
                                            applicant in order to confirm a job
                                            application. For all such purposes, the
                                            BPP can choose to send this object
                                            attached to any object in the catalog
                                            that is required to be sent while
                                            placing the order. This object can
                                            typically be sent at an item level or at
                                            the order level. The item level XInput
                                            will override the Order level XInput as
                                            it indicates a special requirement of
                                            information for that particular item.
                                            Hence the BAP must render a separate
                                            form for the Item and another form at
                                            the Order level before confirmation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            form:
                                              description: Describes a form
                                              type: object
                                              additionalProperties: false
                                              properties:
                                                url:
                                                  description: >-
                                                    The URL from where the form can be
                                                    fetched. The content fetched from the
                                                    url must be processed as per the
                                                    mime_type specified in this object. Once
                                                    fetched, the rendering platform can
                                                    choosed to render the form as-is as an
                                                    embeddable element; or process it
                                                    further to blend with the theme of the
                                                    application. In case the interface is
                                                    non-visual, the the render can process
                                                    the form data and reproduce it as per
                                                    the standard specified in the form.
                                                  type: string
                                                  format: uri
                                                data:
                                                  description: The form submission data
                                                  type: object
                                                  additionalProperties:
                                                    type: string
                                                mime_type:
                                                  description: >-
                                                    This field indicates the nature and
                                                    format of the form received by querying
                                                    the url. MIME types are defined and
                                                    standardized in IETF's RFC 6838.
                                                  type: string
                                                  enum:
                                                    - text/html
                                                    - application/xml
                                                submission_id:
                                                  type: string
                                                  format: uuid
                                            required:
                                              description: >-
                                                Indicates whether the form data is
                                                mandatorily required by the BPP to
                                                confirm the order.
                                              type: boolean
                                        external_ref: *ref_238
                                  refund_terms:
                                    description: Refund terms of this item
                                    type: array
                                    items: &ref_245
                                      description: Refund term of an item or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_226
                                        refund_eligible:
                                          description: >-
                                            Indicates if cancellation will result in
                                            a refund
                                          type: boolean
                                        refund_within:
                                          description: >-
                                            Time within which refund will be
                                            processed after successful cancellation.
                                          allOf:
                                            - *ref_220
                                        refund_amount: *ref_236
                                  replacement_terms:
                                    description: >-
                                      Terms that are applicable be met when this
                                      item is replaced
                                    type: array
                                    items: &ref_246
                                      description: >-
                                        The replacement policy of an item or an
                                        order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_226
                                        replace_within:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to replace
                                            the item before a certain date-time,
                                            failing which they will not be eligible
                                            for replacement
                                          allOf:
                                            - *ref_220
                                        external_ref: *ref_238
                                  return_terms:
                                    description: >-
                                      Terms that are applicable when this item
                                      is returned
                                    type: array
                                    items: &ref_247
                                      description: >-
                                        Describes the return policy of an item
                                        or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term IETF''s applicable.
                                          allOf:
                                            - *ref_226
                                        return_eligible:
                                          description: >-
                                            Indicates whether the item is eligible
                                            for return
                                          type: boolean
                                        return_time:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to return
                                            the item to the origin before a certain
                                            date-time, failing which they will not
                                            be eligible for refund.
                                          allOf:
                                            - *ref_220
                                        return_location:
                                          description: >-
                                            The location where the item or order
                                            must / will be returned to
                                          allOf:
                                            - *ref_228
                                        fulfillment_managed_by:
                                          description: The entity that will perform the return
                                          type: string
                                          enum:
                                            - CONSUMER
                                            - PROVIDER
                                  xinput:
                                    description: >-
                                      Additional input required from the
                                      customer to purchase / avail this item
                                    allOf:
                                      - *ref_239
                                  time:
                                    description: >-
                                      Temporal attributes of this item. This
                                      property is used when the item exists on
                                      the catalog only for a limited period of
                                      time.
                                    allOf:
                                      - *ref_220
                                  rateable:
                                    description: Whether this item can be rated
                                    type: boolean
                                  rating:
                                    description: The rating of the item
                                    allOf:
                                      - *ref_217
                                  matched:
                                    description: >-
                                      Whether this item is an exact match of the
                                      request
                                    type: boolean
                                  related:
                                    description: >-
                                      Whether this item is a related item to the
                                      exactly matched item
                                    type: boolean
                                  recommended:
                                    description: >-
                                      Whether this item is a recommended item to
                                      a response
                                    type: boolean
                                  ttl:
                                    description: >-
                                      Time to live in seconds for an instance of
                                      this schema
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_222
                            exp:
                              type: string
                              description: Time after which catalog has to be refreshed
                              format: date-time
                            rateable:
                              description: Whether this provider can be rated or not
                              type: boolean
                            ttl:
                              description: >-
                                The time-to-live in seconds, for this object.
                                This can be overriden at deeper levels. A value
                                of -1 indicates that this object is not
                                cacheable.
                              type: string
                            tags:
                              type: array
                              items: *ref_222
                    items:
                      description: The items purchased / availed in this order
                      type: array
                      items: *ref_240
                    add_ons:
                      description: The add-ons purchased / availed in this order
                      type: array
                      items: *ref_241
                    offers:
                      description: The offers applied in this order
                      type: array
                      items: *ref_242
                    billing:
                      description: The billing details of this order
                      allOf:
                        - description: >-
                            Describes the billing details of an entity.<br>This
                            has properties like
                            name,organization,address,email,phone,time,tax_number,
                            created_at,updated_at
                          type: object
                          additionalProperties: false
                          properties:
                            name:
                              description: Name of the billable entity
                              type: string
                            organization:
                              description: Details of the organization being billed.
                              allOf:
                                - *ref_232
                            address:
                              description: The address of the billable entity
                              allOf:
                                - *ref_225
                            state:
                              description: >-
                                The state where the billable entity resides.
                                This is important for state-level tax
                                calculation
                              allOf:
                                - *ref_226
                            city:
                              description: The city where the billable entity resides.
                              allOf:
                                - *ref_227
                            email:
                              description: Email address where the bill is sent to
                              type: string
                              format: email
                            phone:
                              description: Phone number of the billable entity
                              type: string
                            time:
                              description: Details regarding the billing period
                              allOf:
                                - *ref_220
                            tax_id:
                              description: >-
                                ID of the billable entity as recognized by the
                                taxation authority
                              type: string
                    fulfillments:
                      description: The fulfillments involved in completing this order
                      type: array
                      items: *ref_243
                    cancellation:
                      description: The cancellation details of this order
                      allOf:
                        - description: Describes a cancellation event
                          type: object
                          additionalProperties: false
                          properties:
                            time:
                              description: >-
                                Date-time when the order was cancelled by the
                                buyer
                              type: string
                              format: date-time
                            cancelled_by:
                              type: string
                              enum:
                                - CONSUMER
                                - PROVIDER
                            reason:
                              description: The reason for cancellation
                              allOf:
                                - description: Describes a selectable option
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    id:
                                      type: string
                                    descriptor: *ref_216
                            additional_description:
                              description: >-
                                Any additional information regarding the nature
                                of cancellation
                              allOf:
                                - *ref_216
                    cancellation_terms:
                      description: Cancellation terms of this item
                      type: array
                      items: *ref_244
                    documents:
                      type: array
                      items:
                        description: Documnents associated to the order
                        type: object
                        additionalProperties: false
                        properties:
                          descriptor: *ref_216
                          mime_type:
                            description: >-
                              This field indicates the nature and format of the
                              form received by querying the url. MIME types are
                              defined and standardized in IETF's RFC 6838.
                            type: string
                            enum:
                              - text/html
                              - application/html
                              - application/xml
                              - application/pdf
                          url:
                            description: >-
                              The URL from where the form can be fetched. The
                              content fetched from the url must be processed as
                              per the mime_type specified in this object.
                            type: string
                            format: uri
                    refund_terms:
                      description: Refund terms of this item
                      type: array
                      items: *ref_245
                    replacement_terms:
                      description: Replacement terms of this item
                      type: array
                      items: *ref_246
                    return_terms:
                      description: Return terms of this item
                      type: array
                      items: *ref_247
                    quote:
                      description: The mutually agreed upon quotation for this order.
                      allOf:
                        - description: >-
                            Describes a quote. It is the estimated price of
                            products or services from the BPP.<br>This has
                            properties like price, breakup, ttl
                          type: object
                          additionalProperties: false
                          properties:
                            id:
                              description: ID of the quote.
                              type: string
                              format: uuid
                            price:
                              description: The total quoted price
                              allOf:
                                - *ref_236
                            breakup:
                              description: the breakup of the total quoted price
                              type: array
                              items:
                                type: object
                                properties:
                                  item: *ref_240
                                  title:
                                    type: string
                                  price: *ref_236
                            ttl: *ref_218
                    payments:
                      description: The terms of settlement for this order
                      type: array
                      items: *ref_248
                    created_at:
                      description: The date-time of creation of this order
                      type: string
                      format: date-time
                    updated_at:
                      description: The date-time of updated of this order
                      type: string
                      format: date-time
                    xinput:
                      description: >-
                        Additional input required from the customer to confirm
                        this order
                      allOf:
                        - *ref_239
                    tags:
                      type: array
                      items: *ref_222
              required:
                - order
          required:
            - context
            - message
        on_confirm:
          type: object
          properties:
            context:
              allOf:
                - description: >-
                    Every API call in beckn protocol has a context. It provides
                    a high-level overview to the receiver about the nature of
                    the intended transaction. Typically, it is the BAP that sets
                    the transaction context based on the consumer's location and
                    action on their UI. But sometimes, during unsolicited
                    callbacks, the BPP also sets the transaction context but it
                    is usually the same as the context of a previous full-cycle,
                    request-callback interaction between the BAP and the BPP.
                    The context object contains four types of fields.
                    <ol><li>Demographic information about the transaction using
                    fields like `domain`, `country`, and
                    `region`.</li><li>Addressing details like the sending and
                    receiving platform's ID and API
                    URL.</li><li>Interoperability information like the protocol
                    version that implemented by the sender
                    and,</li><li>Transaction details like the method being
                    called at the receiver's endpoint, the transaction_id that
                    represents an end-to-end user session at the BAP, a message
                    ID to pair requests with callbacks, a timestamp to capture
                    sending times, a ttl to specifiy the validity of the
                    request, and a key to encrypt information if
                    necessary.</li></ol> This object must be passed in every
                    interaction between a BAP and a BPP. In HTTP/S
                    implementations, it is not necessary to send the context
                    during the synchronous response. However, in asynchronous
                    protocols, the context must be sent during all interactions,
                  type: object
                  additionalProperties: false
                  properties:
                    domain:
                      description: Domain code that is relevant to this transaction context
                      allOf:
                        - type: string
                          description: >-
                            Standard code representing the domain. The standard
                            is usually published as part of the network policy.
                            Furthermore, the network facilitator should also
                            provide a mechanism to provide the supported domains
                            of a network.
                    location:
                      description: >-
                        The location where the transaction is intended to be
                        fulfilled.
                      allOf:
                        - &ref_265
                          description: The physical location of something
                          type: object
                          additionalProperties: false
                          properties:
                            id: &ref_266
                              type: string
                            descriptor: &ref_253
                              description: Physical description of something.
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  type: string
                                code:
                                  type: string
                                short_desc:
                                  type: string
                                long_desc:
                                  type: string
                                additional_desc:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    content_type:
                                      type: string
                                      enum:
                                        - text/plain
                                        - text/html
                                        - application/json
                                media:
                                  type: array
                                  items: &ref_275
                                    description: >-
                                      This object contains a url to a media
                                      file.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      mimetype:
                                        description: >-
                                          indicates the nature and format of the
                                          document, file, or assortment of bytes.
                                          MIME types are defined and standardized
                                          in IETF's RFC 6838
                                        type: string
                                      url:
                                        description: The URL of the file
                                        type: string
                                        format: uri
                                      signature:
                                        description: >-
                                          The digital signature of the file signed
                                          by the sender
                                        type: string
                                      dsa:
                                        description: The signing algorithm used by the sender
                                        type: string
                                images:
                                  type: array
                                  items: &ref_258
                                    description: Describes an image
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      url:
                                        description: >-
                                          URL to the image. This can be a data url
                                          or an remote url
                                        type: string
                                        format: uri
                                      size_type:
                                        description: >-
                                          The size of the image. The network
                                          policy can define the default dimensions
                                          of each type
                                        type: string
                                        enum:
                                          - xs
                                          - sm
                                          - md
                                          - lg
                                          - xl
                                          - custom
                                      width:
                                        description: Width of the image in pixels
                                        type: string
                                      height:
                                        description: Height of the image in pixels
                                        type: string
                            map_url:
                              description: >-
                                The url to the map of the location. This can be
                                a globally recognized map url or the one
                                specified by the network policy.
                              type: string
                              format: uri
                            gps:
                              description: The GPS co-ordinates of this location.
                              allOf:
                                - &ref_249
                                  description: Describes a GPS coordinate
                                  type: string
                                  pattern: >-
                                    ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                            address:
                              description: The address of this location.
                              allOf:
                                - &ref_262
                                  description: Describes a postal address.
                                  type: string
                            city:
                              description: The city this location is, or is located within
                              allOf:
                                - &ref_264
                                  description: Describes a city
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      description: Name of the city
                                      type: string
                                    code:
                                      description: City code
                                      type: string
                            district:
                              description: The state this location is, or is located within
                              type: string
                            state:
                              description: The state this location is, or is located within
                              allOf:
                                - &ref_263
                                  description: >-
                                    A bounded geopolitical region of governance
                                    inside a country.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the state
                                    code:
                                      type: string
                                      description: >-
                                        State code as per country or
                                        international standards
                            country:
                              description: >-
                                The country this location is, or is located
                                within
                              allOf:
                                - description: Describes a country
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the country
                                    code:
                                      type: string
                                      description: >-
                                        Country code as per ISO 3166-1 and ISO
                                        3166-2 format
                            area_code:
                              type: string
                            circle:
                              description: >-
                                Describes a circular region of a specified
                                radius centered at a specified GPS coordinate.
                              type: object
                              additionalProperties: false
                              properties:
                                gps: *ref_249
                                radius: &ref_268
                                  description: Describes a scalar
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - CONSTANT
                                        - VARIABLE
                                    value: &ref_250
                                      description: >-
                                        Describes a numerical value in decimal
                                        form
                                      type: string
                                      pattern: '[+-]?([0-9]*[.])?[0-9]+'
                                    estimated_value: *ref_250
                                    computed_value: *ref_250
                                    range:
                                      type: object
                                      properties:
                                        min: *ref_250
                                        max: *ref_250
                                    unit:
                                      type: string
                            polygon:
                              description: The boundary polygon of this location
                              type: string
                            3dspace:
                              description: >-
                                The three dimensional region describing this
                                location
                              type: string
                            rating:
                              description: The rating of this location
                              allOf:
                                - &ref_254
                                  description: >-
                                    Rating value given to the object. This can
                                    be a single value or can also contain an
                                    inequality operator like gt, gte, lt, lte.
                                    This can also contain an inequality
                                    expression containing logical operators like
                                    && and ||.
                                  type: string
                    action:
                      description: >-
                        The Beckn protocol method being called by the sender and
                        executed at the receiver.
                      type: string
                    version:
                      type: string
                      description: >-
                        Version of transaction protocol being used by the
                        sender.
                    bap_id:
                      description: Subscriber ID of the BAP
                      allOf:
                        - &ref_251
                          description: >-
                            A globally unique identifier of the platform,
                            Typically it is the fully qualified domain name
                            (FQDN) of the platform.
                          type: string
                    bap_uri:
                      description: >-
                        Subscriber URL of the BAP for accepting callbacks from
                        BPPs.
                      allOf:
                        - &ref_252
                          description: >-
                            The callback URL of the Subscriber. This should
                            necessarily contain the same domain name as set in
                            `subscriber_id``.
                          type: string
                          format: uri
                    bpp_id:
                      description: Subscriber ID of the BPP
                      allOf:
                        - *ref_251
                    bpp_uri:
                      description: Subscriber URL of the BPP for accepting calls from BAPs.
                      allOf:
                        - *ref_252
                    transaction_id:
                      description: >-
                        This is a unique value which persists across all API
                        calls from `search` through `confirm`. This is done to
                        indicate an active user session across multiple
                        requests. The BPPs can use this value to push
                        personalized recommendations, and dynamic offerings
                        related to an ongoing transaction despite being unaware
                        of the user active on the BAP.
                      type: string
                      format: uuid
                    message_id:
                      description: >-
                        This is a unique value which persists during a request /
                        callback cycle. Since beckn protocol APIs are
                        asynchronous, BAPs need a common value to match an
                        incoming callback from a BPP to an earlier call. This
                        value can also be used to ignore duplicate messages
                        coming from the BPP. It is recommended to generate a
                        fresh message_id for every new interaction. When sending
                        unsolicited callbacks, BPPs must generate a new
                        message_id.
                      type: string
                      format: uuid
                    timestamp:
                      description: Time of request generation in RFC3339 format
                      type: string
                      format: date-time
                    key:
                      description: The encryption public key of the sender
                      type: string
                    ttl:
                      description: >-
                        The duration in ISO8601 format after timestamp for which
                        this message holds valid
                      type: string
                - type: object
                  properties:
                    action:
                      enum:
                        - on_confirm
                  required:
                    - action
            message:
              type: object
              properties:
                order:
                  description: >-
                    Describes a legal purchase order. It contains the complete
                    details of the legal contract created between the buyer and
                    the seller.
                  type: object
                  additionalProperties: false
                  properties:
                    id:
                      type: string
                      description: >-
                        Human-readable ID of the order. This is generated at the
                        BPP layer. The BPP can either generate order id within
                        its system or forward the order ID created at the
                        provider level.
                    ref_order_ids:
                      description: >-
                        A list of order IDs to link this order to previous
                        orders.
                      type: array
                      items:
                        type: string
                        description: ID of a previous order
                    status:
                      description: >-
                        Status of the order. Allowed values can be defined by
                        the network policy
                      type: string
                    type:
                      description: >-
                        This is used to indicate the type of order being created
                        to BPPs. Sometimes orders can be linked to previous
                        orders, like a replacement order in a retail domain. A
                        follow-up consultation in healthcare domain. A single
                        order part of a subscription order. The list of order
                        types can be standardized at the network level.
                      type: string
                      default: DEFAULT
                      enum:
                        - DRAFT
                        - DEFAULT
                    provider:
                      description: >-
                        Details of the provider whose catalog items have been
                        selected.
                      allOf:
                        - description: Describes the catalog of a business.
                          type: object
                          properties:
                            id:
                              type: string
                              description: Id of the provider
                            descriptor: *ref_253
                            category_id:
                              type: string
                              description: >-
                                Category Id of the provider at the BPP-level
                                catalog
                            rating: *ref_254
                            time: &ref_257
                              description: >-
                                Describes time in its various forms. It can be a
                                single point in time; duration; or a structured
                                timetable of operations<br>This has properties
                                like label, time stamp,duration,range, days,
                                schedule
                              type: object
                              additionalProperties: false
                              properties:
                                label:
                                  type: string
                                timestamp:
                                  type: string
                                  format: date-time
                                duration: &ref_255
                                  description: Describes duration as per ISO8601 format
                                  type: string
                                range:
                                  type: object
                                  properties:
                                    start:
                                      type: string
                                      format: date-time
                                    end:
                                      type: string
                                      format: date-time
                                days:
                                  type: string
                                  description: >-
                                    comma separated values representing days of
                                    the week
                                schedule:
                                  description: >-
                                    Describes schedule as a repeating time
                                    period used to describe a regularly
                                    recurring event. At a minimum a schedule
                                    will specify frequency which describes the
                                    interval between occurrences of the event.
                                    Additional information can be provided to
                                    specify the schedule more precisely. This
                                    includes identifying the timestamps(s) of
                                    when the event will take place. Schedules
                                    may also have holidays to exclude a specific
                                    day from the schedule.<br>This has
                                    properties like frequency, holidays, times
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    frequency: *ref_255
                                    holidays:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                                    times:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                            categories:
                              type: array
                              items:
                                description: >-
                                  A label under which a collection of items can
                                  be grouped.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_256
                                    description: ID of the category
                                    type: string
                                  parent_category_id: *ref_256
                                  descriptor: *ref_253
                                  time: *ref_257
                                  ttl:
                                    description: >-
                                      Time to live for an instance of this
                                      schema
                                  tags:
                                    type: array
                                    items: &ref_259
                                      description: >-
                                        A collection of tag objects with group
                                        level attributes. For detailed
                                        documentation on the Tags and Tag Groups
                                        schema go to
                                        https://github.com/beckn/protocol-specifications/discussions/316
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        display:
                                          description: >-
                                            Indicates the display properties of the
                                            tag group. If display is set to false,
                                            then the group will not be displayed. If
                                            it is set to true, it should be
                                            displayed. However, group-level display
                                            properties can be overriden by
                                            individual tag-level display property.
                                            As this schema is purely for catalog
                                            display purposes, it is not recommended
                                            to send this value during search.
                                          type: boolean
                                          default: true
                                        descriptor:
                                          description: >-
                                            Description of the TagGroup, can be used
                                            to store detailed information.
                                          allOf:
                                            - *ref_253
                                        list:
                                          description: >-
                                            An array of Tag objects listed under
                                            this group. This property can be set by
                                            BAPs during search to narrow the
                                            `search` and achieve more relevant
                                            results. When received during
                                            `on_search`, BAPs must render this list
                                            under the heading described by the
                                            `name` property of this schema.
                                          type: array
                                          items:
                                            description: >-
                                              Describes a tag. This is used to contain
                                              extended metadata. This object can be
                                              added as a property to any schema to
                                              describe extended attributes. For BAPs,
                                              tags can be sent during search to
                                              optimize and filter search results. BPPs
                                              can use tags to index their catalog to
                                              allow better search functionality. Tags
                                              are sent by the BPP as part of the
                                              catalog response in the `on_search`
                                              callback. Tags are also meant for
                                              display purposes. Upon receiving a tag,
                                              BAPs are meant to render them as
                                              name-value pairs. This is particularly
                                              useful when rendering tabular
                                              information about a product or service.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor:
                                                description: >-
                                                  Description of the Tag, can be used to
                                                  store detailed information.
                                                allOf:
                                                  - *ref_253
                                              value:
                                                description: >-
                                                  The value of the tag. This set by the
                                                  BPP and rendered as-is by the BAP.
                                                type: string
                                              display:
                                                description: >-
                                                  This value indicates if the tag is
                                                  intended for display purposes. If set to
                                                  `true`, then this tag must be displayed.
                                                  If it is set to `false`, it should not
                                                  be displayed. This value can override
                                                  the group display value.
                                                type: boolean
                            fulfillments:
                              type: array
                              items: &ref_280
                                description: >-
                                  Describes how a an order will be
                                  rendered/fulfilled to the end-customer
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_271
                                    description: >-
                                      Unique reference ID to the fulfillment of
                                      an order
                                    type: string
                                  type:
                                    description: >-
                                      A code that describes the mode of
                                      fulfillment. This is typically set when
                                      there are multiple ways an order can be
                                      fulfilled. For example, a retail order can
                                      be fulfilled either via store pickup or a
                                      home delivery. Similarly, a medical
                                      consultation can be provided either
                                      in-person or via tele-consultation. The
                                      network policy must publish standard
                                      fulfillment type codes for the different
                                      modes of fulfillment.
                                    type: string
                                  rateable:
                                    description: >-
                                      Whether the fulfillment can be rated or
                                      not
                                    type: boolean
                                  rating:
                                    description: >-
                                      The rating value of the fulfullment
                                      service.
                                    allOf:
                                      - *ref_254
                                  state:
                                    description: >-
                                      The current state of fulfillment. The BPP
                                      must set this value whenever the state of
                                      the order fulfillment changes and fire an
                                      unsolicited `on_status` call.
                                    allOf:
                                      - &ref_274
                                        description: Describes the state of fulfillment
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          descriptor: *ref_253
                                          updated_at:
                                            type: string
                                            format: date-time
                                          updated_by:
                                            type: string
                                            description: ID of entity which changed the state
                                  tracking:
                                    type: boolean
                                    description: >-
                                      Indicates whether the fulfillment allows
                                      tracking
                                    default: false
                                  customer:
                                    description: >-
                                      The person that will ultimately receive
                                      the order
                                    allOf:
                                      - description: >-
                                          Describes a customer buying/availing a
                                          product or a service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: &ref_260
                                            description: Describes a person as any individual
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              id:
                                                type: string
                                                description: Describes the identity of the person
                                              url:
                                                description: Profile url of the person
                                                type: string
                                                format: uri
                                              name:
                                                description: the name of the person
                                                type: string
                                              image: *ref_258
                                              age:
                                                description: Age of the person
                                                allOf:
                                                  - *ref_255
                                              dob:
                                                description: Date of birth of the person
                                                type: string
                                                format: date
                                              gender:
                                                type: string
                                                description: >-
                                                  Gender of something, typically a Person,
                                                  but possibly also fictional characters,
                                                  animals, etc. While Male and Female may
                                                  be used, text strings are also
                                                  acceptable for people who do not
                                                  identify as a binary gender.Allowed
                                                  values for this field can be published
                                                  in the network policy
                                              creds:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a credential of an entity -
                                                    Person or Organization
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    id:
                                                      type: string
                                                    type:
                                                      type: string
                                                      default: VerifiableCredential
                                                    url:
                                                      description: URL of the credential
                                                      type: string
                                                      format: uri
                                              languages:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a language known to the
                                                    person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              skills:
                                                type: array
                                                items:
                                                  description: Describes a skill of the person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              tags:
                                                type: array
                                                items: *ref_259
                                          contact: &ref_261
                                            description: >-
                                              Describes the contact information of an
                                              entity
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              phone:
                                                type: string
                                              email:
                                                type: string
                                              jcard:
                                                type: object
                                                description: >-
                                                  A Jcard object as per
                                                  draft-ietf-jcardcal-jcard-03
                                                  specification
                                  agent:
                                    description: >-
                                      The agent that is currently handling the
                                      fulfillment of the order
                                    allOf:
                                      - description: >-
                                          Describes the direct performer, driver
                                          or executor that fulfills an order. It
                                          is usually a person. But in some rare
                                          cases, it could be a non-living entity
                                          like a drone, or a bot. Some examples of
                                          agents are Doctor in the healthcare
                                          sector, a driver in the mobility sector,
                                          or a delivery person in the logistics
                                          sector. This object can be set at any
                                          stage of the order lifecycle. This can
                                          be set at the discovery stage when the
                                          BPP wants to provide details on the
                                          agent fulfilling the order, like in
                                          healthcare, where the doctor's name
                                          appears during search. This object can
                                          also used to search for a particular
                                          person that the customer wants
                                          fulfilling an order. Sometimes, this
                                          object gets instantiated after the order
                                          is confirmed, like in the case of
                                          on-demand taxis, where the driver is
                                          assigned after the user confirms the
                                          ride.
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: *ref_260
                                          contact: *ref_261
                                          organization: &ref_269
                                            description: >-
                                              An organization. Usually a recognized
                                              business entity.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor: *ref_253
                                              address:
                                                description: The postal address of the organization
                                                allOf:
                                                  - *ref_262
                                              state:
                                                description: >-
                                                  The state where the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_263
                                              city:
                                                description: >-
                                                  The city where the the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_264
                                              contact: *ref_261
                                          rating: *ref_254
                                  contact: *ref_261
                                  vehicle:
                                    description: >-
                                      Describes a vehicle is a device that is
                                      designed or used to transport people or
                                      cargo over land, water, air, or through
                                      space.<br>This has properties like
                                      category, capacity, make, model,
                                      size,variant,color,energy_type,registration
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      category:
                                        type: string
                                      capacity:
                                        type: integer
                                      make:
                                        type: string
                                      model:
                                        type: string
                                      size:
                                        type: string
                                      variant:
                                        type: string
                                      color:
                                        type: string
                                      energy_type:
                                        type: string
                                      registration:
                                        type: string
                                      wheels_count:
                                        type: string
                                      cargo_volumne:
                                        type: string
                                      wheelchair_access:
                                        type: string
                                      code:
                                        type: string
                                      emission_standard:
                                        type: string
                                  stops:
                                    description: >-
                                      The list of logical stops encountered
                                      during the fulfillment of an order.
                                    type: array
                                    items:
                                      description: >-
                                        A logical point in space and time during
                                        the fulfillment of an order.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          type: string
                                        parent_stop_id:
                                          type: string
                                        location:
                                          description: Location of the stop
                                          allOf:
                                            - *ref_265
                                        type:
                                          description: >-
                                            The type of stop. Allowed values of this
                                            property can be defined by the network
                                            policy.
                                          type: string
                                        time:
                                          description: Timings applicable at the stop.
                                          allOf:
                                            - *ref_257
                                        instructions:
                                          description: >-
                                            Instructions that need to be followed at
                                            the stop
                                          allOf:
                                            - *ref_253
                                        contact:
                                          description: Contact details of the stop
                                          allOf:
                                            - *ref_261
                                        person:
                                          description: >-
                                            The details of the person present at the
                                            stop
                                          allOf:
                                            - *ref_260
                                        authorization:
                                          description: >-
                                            Describes an authorization mechanism
                                            used to start or end the fulfillment of
                                            an order. For example, in the mobility
                                            sector, the driver may require a
                                            one-time password to initiate the ride.
                                            In the healthcare sector, a patient may
                                            need to provide a password to open a
                                            video conference link during a
                                            teleconsultation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            type:
                                              description: >-
                                                Type of authorization mechanism used.
                                                The allowed values for this field can be
                                                published as part of the network policy.
                                              type: string
                                            token:
                                              description: >-
                                                Token used for authorization. This is
                                                typically generated at the BPP. The BAP
                                                can send this value to the user via any
                                                channel that it uses to authenticate the
                                                user like SMS, Email, Push notification,
                                                or in-app rendering.
                                              type: string
                                            valid_from:
                                              description: >-
                                                Timestamp in RFC3339 format from which
                                                token is valid
                                              type: string
                                              format: date-time
                                            valid_to:
                                              description: >-
                                                Timestamp in RFC3339 format until which
                                                token is valid
                                              type: string
                                              format: date-time
                                            status:
                                              description: Status of the token
                                              type: string
                                  path:
                                    description: >-
                                      The physical path taken by the agent that
                                      can be rendered on a map. The allowed
                                      format of this property can be set by the
                                      network.
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_259
                            payments:
                              type: array
                              items: &ref_285
                                description: >-
                                  Describes the terms of settlement between the
                                  BAP and the BPP for a single transaction. When
                                  instantiated, this object contains <ol><li>the
                                  amount that has to be settled,</li><li>The
                                  payment destination destination
                                  details</li><li>When the settlement should
                                  happen, and</li><li>A transaction reference
                                  ID</li></ol>. During a transaction, the BPP
                                  reserves the right to decide the terms of
                                  payment. However, the BAP can send its terms
                                  to the BPP first. If the BPP does not agree to
                                  those terms, it must overwrite the terms and
                                  return them to the BAP. If overridden, the BAP
                                  must either agree to the terms sent by the BPP
                                  in order to preserve the provider's autonomy,
                                  or abort the transaction. In case of such
                                  disagreements, the BAP and the BPP can perform
                                  offline negotiations on the payment terms.
                                  Once an agreement is reached, the BAP and BPP
                                  can resume transactions.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_272
                                    description: >-
                                      ID of the payment term that can be
                                      referred at an item or an order level in a
                                      catalog
                                    type: string
                                  collected_by:
                                    description: >-
                                      This field indicates who is the collector
                                      of payment. The BAP can set this value to
                                      'bap' if it wants to collect the payment
                                      first and  settle it to the BPP. If the
                                      BPP agrees to those terms, the BPP should
                                      not send the payment url. Alternatively,
                                      the BPP can set this field with the value
                                      'bpp' if it wants the payment to be made
                                      directly.
                                    type: string
                                  url:
                                    type: string
                                    description: >-
                                      A payment url to be called by the BAP. If
                                      empty, then the payment is to be done
                                      offline. The details of payment should be
                                      present in the params object. If tl_method
                                      = http/get, then the payment details will
                                      be sent as url params. Two url param
                                      values, ```$transaction_id``` and
                                      ```$amount``` are mandatory.
                                    format: uri
                                  tl_method:
                                    type: string
                                  params:
                                    type: object
                                    properties:
                                      transaction_id:
                                        type: string
                                        description: >-
                                          The reference transaction ID associated
                                          with a payment activity
                                      amount:
                                        type: string
                                      currency:
                                        type: string
                                      bank_code:
                                        type: string
                                      bank_account_number:
                                        type: string
                                      virtual_payment_address:
                                        type: string
                                      source_bank_code:
                                        type: string
                                      source_bank_account_number:
                                        type: string
                                      source_virtual_payment_address:
                                        type: string
                                  type:
                                    type: string
                                    enum:
                                      - PRE-ORDER
                                      - PRE-FULFILLMENT
                                      - ON-FULFILLMENT
                                      - POST-FULFILLMENT
                                      - ON-ORDER
                                  status:
                                    type: string
                                    enum:
                                      - PAID
                                      - NOT-PAID
                                  time: *ref_257
                                  tags:
                                    type: array
                                    items: *ref_259
                            locations:
                              type: array
                              items: *ref_265
                            offers:
                              type: array
                              items: &ref_279
                                description: >-
                                  An offer associated with a catalog. This is
                                  typically used to promote a particular product
                                  and enable more purchases.
                                type: object
                                additionalProperties: false
                                properties:
                                  id:
                                    type: string
                                  descriptor: *ref_253
                                  location_ids:
                                    type: array
                                    items: *ref_266
                                  category_ids:
                                    type: array
                                    items: *ref_256
                                  item_ids:
                                    type: array
                                    items: &ref_267
                                      description: ID of the item.
                                      type: string
                                  time: *ref_257
                                  tags:
                                    type: array
                                    items: *ref_259
                            items:
                              type: array
                              items: &ref_277
                                description: >-
                                  Describes a product or a service offered to
                                  the end consumer by the provider. In the
                                  mobility sector, it can represent a fare
                                  product like one way journey. In the logistics
                                  sector, it can represent the delivery service
                                  offering. In the retail domain it can
                                  represent a product like a grocery item.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: *ref_267
                                  parent_item_id:
                                    description: ID of the item, this item is a variant of
                                    allOf:
                                      - *ref_267
                                  parent_item_quantity:
                                    description: >-
                                      The number of units of the parent item
                                      this item is a multiple of
                                    allOf:
                                      - &ref_270
                                        description: Describes the count or amount of an item
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          allocated:
                                            description: >-
                                              This represents the exact quantity
                                              allocated for purchase of the item.
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_268
                                          available:
                                            description: >-
                                              This represents the exact quantity
                                              available for purchase of the item. The
                                              buyer can only purchase multiples of
                                              this
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_268
                                          maximum:
                                            description: >-
                                              This represents the maximum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                              measure: *ref_268
                                          minimum:
                                            description: >-
                                              This represents the minimum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_268
                                          selected:
                                            description: >-
                                              This represents the quantity selected
                                              for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_268
                                          unitized:
                                            description: >-
                                              This represents the quantity available
                                              in a single unit of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                                maximum: 1
                                              measure: *ref_268
                                  descriptor:
                                    description: Physical description of the item
                                    allOf:
                                      - *ref_253
                                  creator:
                                    description: The creator of this item
                                    allOf:
                                      - *ref_269
                                  price:
                                    description: >-
                                      The price of this item, if it has
                                      intrinsic value
                                    allOf:
                                      - &ref_273
                                        description: >-
                                          Describes the price of a product or
                                          service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          currency:
                                            type: string
                                          value: *ref_250
                                          estimated_value: *ref_250
                                          computed_value: *ref_250
                                          listed_value: *ref_250
                                          offered_value: *ref_250
                                          minimum_value: *ref_250
                                          maximum_value: *ref_250
                                  quantity:
                                    description: The selling quantity of the item
                                    allOf:
                                      - *ref_270
                                  category_ids:
                                    description: Categories this item can be listed under
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_256
                                  fulfillment_ids:
                                    description: >-
                                      Modes through which this item can be
                                      fulfilled
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_271
                                  location_ids:
                                    description: >-
                                      Provider Locations this item is available
                                      in
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_266
                                  payment_ids:
                                    description: >-
                                      Payment modalities through which this item
                                      can be ordered
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_272
                                  add_ons:
                                    type: array
                                    items: &ref_278
                                      description: >-
                                        Describes an additional item offered as
                                        a value-addition to a product or
                                        service. This does not exist
                                        independently in a catalog and is always
                                        associated with an item.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          description: Provider-defined ID of the add-on
                                          type: string
                                        descriptor: *ref_253
                                        price: *ref_273
                                        quantity: *ref_270
                                  cancellation_terms:
                                    description: Cancellation terms of this item
                                    type: array
                                    items: &ref_281
                                      description: >-
                                        Describes the cancellation terms of an
                                        item or an order. This can be referenced
                                        at an item or order level. Item-level
                                        cancellation terms can override the
                                        terms at the order level.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_274
                                        reason_required:
                                          description: >-
                                            Indicates whether a reason is required
                                            to cancel the order
                                          type: boolean
                                        cancel_by:
                                          description: >-
                                            Information related to the time of
                                            cancellation.
                                          allOf:
                                            - *ref_257
                                        cancellation_fee:
                                          description: A fee applied on a particular entity
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            percentage:
                                              description: Percentage of a value
                                              allOf:
                                                - *ref_250
                                            amount:
                                              description: A fixed value
                                              allOf:
                                                - *ref_273
                                        xinput: &ref_276
                                          description: >-
                                            Contains any additional or extended
                                            inputs required to confirm an order.
                                            This is typically a Form Input.
                                            Sometimes, selection of catalog elements
                                            is not enough for the BPP to confirm an
                                            order. For example, to confirm a flight
                                            ticket, the airline requires details of
                                            the passengers along with information on
                                            baggage, identity, in addition to the
                                            class of ticket. Similarly, a logistics
                                            company may require details on the
                                            nature of shipment in order to confirm
                                            the shipping. A recruiting firm may
                                            require additional details on the
                                            applicant in order to confirm a job
                                            application. For all such purposes, the
                                            BPP can choose to send this object
                                            attached to any object in the catalog
                                            that is required to be sent while
                                            placing the order. This object can
                                            typically be sent at an item level or at
                                            the order level. The item level XInput
                                            will override the Order level XInput as
                                            it indicates a special requirement of
                                            information for that particular item.
                                            Hence the BAP must render a separate
                                            form for the Item and another form at
                                            the Order level before confirmation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            form:
                                              description: Describes a form
                                              type: object
                                              additionalProperties: false
                                              properties:
                                                url:
                                                  description: >-
                                                    The URL from where the form can be
                                                    fetched. The content fetched from the
                                                    url must be processed as per the
                                                    mime_type specified in this object. Once
                                                    fetched, the rendering platform can
                                                    choosed to render the form as-is as an
                                                    embeddable element; or process it
                                                    further to blend with the theme of the
                                                    application. In case the interface is
                                                    non-visual, the the render can process
                                                    the form data and reproduce it as per
                                                    the standard specified in the form.
                                                  type: string
                                                  format: uri
                                                data:
                                                  description: The form submission data
                                                  type: object
                                                  additionalProperties:
                                                    type: string
                                                mime_type:
                                                  description: >-
                                                    This field indicates the nature and
                                                    format of the form received by querying
                                                    the url. MIME types are defined and
                                                    standardized in IETF's RFC 6838.
                                                  type: string
                                                  enum:
                                                    - text/html
                                                    - application/xml
                                                submission_id:
                                                  type: string
                                                  format: uuid
                                            required:
                                              description: >-
                                                Indicates whether the form data is
                                                mandatorily required by the BPP to
                                                confirm the order.
                                              type: boolean
                                        external_ref: *ref_275
                                  refund_terms:
                                    description: Refund terms of this item
                                    type: array
                                    items: &ref_282
                                      description: Refund term of an item or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_263
                                        refund_eligible:
                                          description: >-
                                            Indicates if cancellation will result in
                                            a refund
                                          type: boolean
                                        refund_within:
                                          description: >-
                                            Time within which refund will be
                                            processed after successful cancellation.
                                          allOf:
                                            - *ref_257
                                        refund_amount: *ref_273
                                  replacement_terms:
                                    description: >-
                                      Terms that are applicable be met when this
                                      item is replaced
                                    type: array
                                    items: &ref_283
                                      description: >-
                                        The replacement policy of an item or an
                                        order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_263
                                        replace_within:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to replace
                                            the item before a certain date-time,
                                            failing which they will not be eligible
                                            for replacement
                                          allOf:
                                            - *ref_257
                                        external_ref: *ref_275
                                  return_terms:
                                    description: >-
                                      Terms that are applicable when this item
                                      is returned
                                    type: array
                                    items: &ref_284
                                      description: >-
                                        Describes the return policy of an item
                                        or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term IETF''s applicable.
                                          allOf:
                                            - *ref_263
                                        return_eligible:
                                          description: >-
                                            Indicates whether the item is eligible
                                            for return
                                          type: boolean
                                        return_time:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to return
                                            the item to the origin before a certain
                                            date-time, failing which they will not
                                            be eligible for refund.
                                          allOf:
                                            - *ref_257
                                        return_location:
                                          description: >-
                                            The location where the item or order
                                            must / will be returned to
                                          allOf:
                                            - *ref_265
                                        fulfillment_managed_by:
                                          description: The entity that will perform the return
                                          type: string
                                          enum:
                                            - CONSUMER
                                            - PROVIDER
                                  xinput:
                                    description: >-
                                      Additional input required from the
                                      customer to purchase / avail this item
                                    allOf:
                                      - *ref_276
                                  time:
                                    description: >-
                                      Temporal attributes of this item. This
                                      property is used when the item exists on
                                      the catalog only for a limited period of
                                      time.
                                    allOf:
                                      - *ref_257
                                  rateable:
                                    description: Whether this item can be rated
                                    type: boolean
                                  rating:
                                    description: The rating of the item
                                    allOf:
                                      - *ref_254
                                  matched:
                                    description: >-
                                      Whether this item is an exact match of the
                                      request
                                    type: boolean
                                  related:
                                    description: >-
                                      Whether this item is a related item to the
                                      exactly matched item
                                    type: boolean
                                  recommended:
                                    description: >-
                                      Whether this item is a recommended item to
                                      a response
                                    type: boolean
                                  ttl:
                                    description: >-
                                      Time to live in seconds for an instance of
                                      this schema
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_259
                            exp:
                              type: string
                              description: Time after which catalog has to be refreshed
                              format: date-time
                            rateable:
                              description: Whether this provider can be rated or not
                              type: boolean
                            ttl:
                              description: >-
                                The time-to-live in seconds, for this object.
                                This can be overriden at deeper levels. A value
                                of -1 indicates that this object is not
                                cacheable.
                              type: string
                            tags:
                              type: array
                              items: *ref_259
                    items:
                      description: The items purchased / availed in this order
                      type: array
                      items: *ref_277
                    add_ons:
                      description: The add-ons purchased / availed in this order
                      type: array
                      items: *ref_278
                    offers:
                      description: The offers applied in this order
                      type: array
                      items: *ref_279
                    billing:
                      description: The billing details of this order
                      allOf:
                        - description: >-
                            Describes the billing details of an entity.<br>This
                            has properties like
                            name,organization,address,email,phone,time,tax_number,
                            created_at,updated_at
                          type: object
                          additionalProperties: false
                          properties:
                            name:
                              description: Name of the billable entity
                              type: string
                            organization:
                              description: Details of the organization being billed.
                              allOf:
                                - *ref_269
                            address:
                              description: The address of the billable entity
                              allOf:
                                - *ref_262
                            state:
                              description: >-
                                The state where the billable entity resides.
                                This is important for state-level tax
                                calculation
                              allOf:
                                - *ref_263
                            city:
                              description: The city where the billable entity resides.
                              allOf:
                                - *ref_264
                            email:
                              description: Email address where the bill is sent to
                              type: string
                              format: email
                            phone:
                              description: Phone number of the billable entity
                              type: string
                            time:
                              description: Details regarding the billing period
                              allOf:
                                - *ref_257
                            tax_id:
                              description: >-
                                ID of the billable entity as recognized by the
                                taxation authority
                              type: string
                    fulfillments:
                      description: The fulfillments involved in completing this order
                      type: array
                      items: *ref_280
                    cancellation:
                      description: The cancellation details of this order
                      allOf:
                        - description: Describes a cancellation event
                          type: object
                          additionalProperties: false
                          properties:
                            time:
                              description: >-
                                Date-time when the order was cancelled by the
                                buyer
                              type: string
                              format: date-time
                            cancelled_by:
                              type: string
                              enum:
                                - CONSUMER
                                - PROVIDER
                            reason:
                              description: The reason for cancellation
                              allOf:
                                - description: Describes a selectable option
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    id:
                                      type: string
                                    descriptor: *ref_253
                            additional_description:
                              description: >-
                                Any additional information regarding the nature
                                of cancellation
                              allOf:
                                - *ref_253
                    cancellation_terms:
                      description: Cancellation terms of this item
                      type: array
                      items: *ref_281
                    documents:
                      type: array
                      items:
                        description: Documnents associated to the order
                        type: object
                        additionalProperties: false
                        properties:
                          descriptor: *ref_253
                          mime_type:
                            description: >-
                              This field indicates the nature and format of the
                              form received by querying the url. MIME types are
                              defined and standardized in IETF's RFC 6838.
                            type: string
                            enum:
                              - text/html
                              - application/html
                              - application/xml
                              - application/pdf
                          url:
                            description: >-
                              The URL from where the form can be fetched. The
                              content fetched from the url must be processed as
                              per the mime_type specified in this object.
                            type: string
                            format: uri
                    refund_terms:
                      description: Refund terms of this item
                      type: array
                      items: *ref_282
                    replacement_terms:
                      description: Replacement terms of this item
                      type: array
                      items: *ref_283
                    return_terms:
                      description: Return terms of this item
                      type: array
                      items: *ref_284
                    quote:
                      description: The mutually agreed upon quotation for this order.
                      allOf:
                        - description: >-
                            Describes a quote. It is the estimated price of
                            products or services from the BPP.<br>This has
                            properties like price, breakup, ttl
                          type: object
                          additionalProperties: false
                          properties:
                            id:
                              description: ID of the quote.
                              type: string
                              format: uuid
                            price:
                              description: The total quoted price
                              allOf:
                                - *ref_273
                            breakup:
                              description: the breakup of the total quoted price
                              type: array
                              items:
                                type: object
                                properties:
                                  item: *ref_277
                                  title:
                                    type: string
                                  price: *ref_273
                            ttl: *ref_255
                    payments:
                      description: The terms of settlement for this order
                      type: array
                      items: *ref_285
                    created_at:
                      description: The date-time of creation of this order
                      type: string
                      format: date-time
                    updated_at:
                      description: The date-time of updated of this order
                      type: string
                      format: date-time
                    xinput:
                      description: >-
                        Additional input required from the customer to confirm
                        this order
                      allOf:
                        - *ref_276
                    tags:
                      type: array
                      items: *ref_259
              required:
                - order
            error:
              description: >-
                Describes an error object that is returned by a BAP, BPP or BG
                as a response or callback to an action by another network
                participant. This object is sent when any request received by a
                network participant is unacceptable. This object can be sent
                either during Ack or with the callback.
              type: object
              additionalProperties: false
              properties:
                code:
                  type: string
                  description: >-
                    Standard error code. For full list of error codes, refer to
                    docs/protocol-drafts/BECKN-005-ERROR-CODES-DRAFT-01.md of
                    this repo"
                paths:
                  type: string
                  description: >-
                    Path to json schema generating the error. Used only during
                    json schema validation errors
                message:
                  type: string
                  description: >-
                    Human readable message describing the error. Used mainly for
                    logging. Not recommended to be shown to the user.
          required:
            - context
        update:
          type: object
          properties:
            context:
              allOf:
                - description: >-
                    Every API call in beckn protocol has a context. It provides
                    a high-level overview to the receiver about the nature of
                    the intended transaction. Typically, it is the BAP that sets
                    the transaction context based on the consumer's location and
                    action on their UI. But sometimes, during unsolicited
                    callbacks, the BPP also sets the transaction context but it
                    is usually the same as the context of a previous full-cycle,
                    request-callback interaction between the BAP and the BPP.
                    The context object contains four types of fields.
                    <ol><li>Demographic information about the transaction using
                    fields like `domain`, `country`, and
                    `region`.</li><li>Addressing details like the sending and
                    receiving platform's ID and API
                    URL.</li><li>Interoperability information like the protocol
                    version that implemented by the sender
                    and,</li><li>Transaction details like the method being
                    called at the receiver's endpoint, the transaction_id that
                    represents an end-to-end user session at the BAP, a message
                    ID to pair requests with callbacks, a timestamp to capture
                    sending times, a ttl to specifiy the validity of the
                    request, and a key to encrypt information if
                    necessary.</li></ol> This object must be passed in every
                    interaction between a BAP and a BPP. In HTTP/S
                    implementations, it is not necessary to send the context
                    during the synchronous response. However, in asynchronous
                    protocols, the context must be sent during all interactions,
                  type: object
                  additionalProperties: false
                  properties:
                    domain:
                      description: Domain code that is relevant to this transaction context
                      allOf:
                        - type: string
                          description: >-
                            Standard code representing the domain. The standard
                            is usually published as part of the network policy.
                            Furthermore, the network facilitator should also
                            provide a mechanism to provide the supported domains
                            of a network.
                    location:
                      description: >-
                        The location where the transaction is intended to be
                        fulfilled.
                      allOf:
                        - &ref_302
                          description: The physical location of something
                          type: object
                          additionalProperties: false
                          properties:
                            id: &ref_303
                              type: string
                            descriptor: &ref_290
                              description: Physical description of something.
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  type: string
                                code:
                                  type: string
                                short_desc:
                                  type: string
                                long_desc:
                                  type: string
                                additional_desc:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    content_type:
                                      type: string
                                      enum:
                                        - text/plain
                                        - text/html
                                        - application/json
                                media:
                                  type: array
                                  items: &ref_312
                                    description: >-
                                      This object contains a url to a media
                                      file.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      mimetype:
                                        description: >-
                                          indicates the nature and format of the
                                          document, file, or assortment of bytes.
                                          MIME types are defined and standardized
                                          in IETF's RFC 6838
                                        type: string
                                      url:
                                        description: The URL of the file
                                        type: string
                                        format: uri
                                      signature:
                                        description: >-
                                          The digital signature of the file signed
                                          by the sender
                                        type: string
                                      dsa:
                                        description: The signing algorithm used by the sender
                                        type: string
                                images:
                                  type: array
                                  items: &ref_295
                                    description: Describes an image
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      url:
                                        description: >-
                                          URL to the image. This can be a data url
                                          or an remote url
                                        type: string
                                        format: uri
                                      size_type:
                                        description: >-
                                          The size of the image. The network
                                          policy can define the default dimensions
                                          of each type
                                        type: string
                                        enum:
                                          - xs
                                          - sm
                                          - md
                                          - lg
                                          - xl
                                          - custom
                                      width:
                                        description: Width of the image in pixels
                                        type: string
                                      height:
                                        description: Height of the image in pixels
                                        type: string
                            map_url:
                              description: >-
                                The url to the map of the location. This can be
                                a globally recognized map url or the one
                                specified by the network policy.
                              type: string
                              format: uri
                            gps:
                              description: The GPS co-ordinates of this location.
                              allOf:
                                - &ref_286
                                  description: Describes a GPS coordinate
                                  type: string
                                  pattern: >-
                                    ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                            address:
                              description: The address of this location.
                              allOf:
                                - &ref_299
                                  description: Describes a postal address.
                                  type: string
                            city:
                              description: The city this location is, or is located within
                              allOf:
                                - &ref_301
                                  description: Describes a city
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      description: Name of the city
                                      type: string
                                    code:
                                      description: City code
                                      type: string
                            district:
                              description: The state this location is, or is located within
                              type: string
                            state:
                              description: The state this location is, or is located within
                              allOf:
                                - &ref_300
                                  description: >-
                                    A bounded geopolitical region of governance
                                    inside a country.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the state
                                    code:
                                      type: string
                                      description: >-
                                        State code as per country or
                                        international standards
                            country:
                              description: >-
                                The country this location is, or is located
                                within
                              allOf:
                                - description: Describes a country
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the country
                                    code:
                                      type: string
                                      description: >-
                                        Country code as per ISO 3166-1 and ISO
                                        3166-2 format
                            area_code:
                              type: string
                            circle:
                              description: >-
                                Describes a circular region of a specified
                                radius centered at a specified GPS coordinate.
                              type: object
                              additionalProperties: false
                              properties:
                                gps: *ref_286
                                radius: &ref_305
                                  description: Describes a scalar
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - CONSTANT
                                        - VARIABLE
                                    value: &ref_287
                                      description: >-
                                        Describes a numerical value in decimal
                                        form
                                      type: string
                                      pattern: '[+-]?([0-9]*[.])?[0-9]+'
                                    estimated_value: *ref_287
                                    computed_value: *ref_287
                                    range:
                                      type: object
                                      properties:
                                        min: *ref_287
                                        max: *ref_287
                                    unit:
                                      type: string
                            polygon:
                              description: The boundary polygon of this location
                              type: string
                            3dspace:
                              description: >-
                                The three dimensional region describing this
                                location
                              type: string
                            rating:
                              description: The rating of this location
                              allOf:
                                - &ref_291
                                  description: >-
                                    Rating value given to the object. This can
                                    be a single value or can also contain an
                                    inequality operator like gt, gte, lt, lte.
                                    This can also contain an inequality
                                    expression containing logical operators like
                                    && and ||.
                                  type: string
                    action:
                      description: >-
                        The Beckn protocol method being called by the sender and
                        executed at the receiver.
                      type: string
                    version:
                      type: string
                      description: >-
                        Version of transaction protocol being used by the
                        sender.
                    bap_id:
                      description: Subscriber ID of the BAP
                      allOf:
                        - &ref_288
                          description: >-
                            A globally unique identifier of the platform,
                            Typically it is the fully qualified domain name
                            (FQDN) of the platform.
                          type: string
                    bap_uri:
                      description: >-
                        Subscriber URL of the BAP for accepting callbacks from
                        BPPs.
                      allOf:
                        - &ref_289
                          description: >-
                            The callback URL of the Subscriber. This should
                            necessarily contain the same domain name as set in
                            `subscriber_id``.
                          type: string
                          format: uri
                    bpp_id:
                      description: Subscriber ID of the BPP
                      allOf:
                        - *ref_288
                    bpp_uri:
                      description: Subscriber URL of the BPP for accepting calls from BAPs.
                      allOf:
                        - *ref_289
                    transaction_id:
                      description: >-
                        This is a unique value which persists across all API
                        calls from `search` through `confirm`. This is done to
                        indicate an active user session across multiple
                        requests. The BPPs can use this value to push
                        personalized recommendations, and dynamic offerings
                        related to an ongoing transaction despite being unaware
                        of the user active on the BAP.
                      type: string
                      format: uuid
                    message_id:
                      description: >-
                        This is a unique value which persists during a request /
                        callback cycle. Since beckn protocol APIs are
                        asynchronous, BAPs need a common value to match an
                        incoming callback from a BPP to an earlier call. This
                        value can also be used to ignore duplicate messages
                        coming from the BPP. It is recommended to generate a
                        fresh message_id for every new interaction. When sending
                        unsolicited callbacks, BPPs must generate a new
                        message_id.
                      type: string
                      format: uuid
                    timestamp:
                      description: Time of request generation in RFC3339 format
                      type: string
                      format: date-time
                    key:
                      description: The encryption public key of the sender
                      type: string
                    ttl:
                      description: >-
                        The duration in ISO8601 format after timestamp for which
                        this message holds valid
                      type: string
                - type: object
                  properties:
                    action:
                      enum:
                        - update
                  required:
                    - action
            message:
              type: object
              properties:
                update_target:
                  description: >-
                    Comma separated values of order objects being updated. For
                    example: ```"update_target":"item,billing,fulfillment"```
                  type: string
                order:
                  description: Updated order object
                  allOf:
                    - description: >-
                        Describes a legal purchase order. It contains the
                        complete details of the legal contract created between
                        the buyer and the seller.
                      type: object
                      additionalProperties: false
                      properties:
                        id:
                          type: string
                          description: >-
                            Human-readable ID of the order. This is generated at
                            the BPP layer. The BPP can either generate order id
                            within its system or forward the order ID created at
                            the provider level.
                        ref_order_ids:
                          description: >-
                            A list of order IDs to link this order to previous
                            orders.
                          type: array
                          items:
                            type: string
                            description: ID of a previous order
                        status:
                          description: >-
                            Status of the order. Allowed values can be defined
                            by the network policy
                          type: string
                        type:
                          description: >-
                            This is used to indicate the type of order being
                            created to BPPs. Sometimes orders can be linked to
                            previous orders, like a replacement order in a
                            retail domain. A follow-up consultation in
                            healthcare domain. A single order part of a
                            subscription order. The list of order types can be
                            standardized at the network level.
                          type: string
                          default: DEFAULT
                          enum:
                            - DRAFT
                            - DEFAULT
                        provider:
                          description: >-
                            Details of the provider whose catalog items have
                            been selected.
                          allOf:
                            - description: Describes the catalog of a business.
                              type: object
                              properties:
                                id:
                                  type: string
                                  description: Id of the provider
                                descriptor: *ref_290
                                category_id:
                                  type: string
                                  description: >-
                                    Category Id of the provider at the BPP-level
                                    catalog
                                rating: *ref_291
                                time: &ref_294
                                  description: >-
                                    Describes time in its various forms. It can
                                    be a single point in time; duration; or a
                                    structured timetable of operations<br>This
                                    has properties like label, time
                                    stamp,duration,range, days, schedule
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    label:
                                      type: string
                                    timestamp:
                                      type: string
                                      format: date-time
                                    duration: &ref_292
                                      description: Describes duration as per ISO8601 format
                                      type: string
                                    range:
                                      type: object
                                      properties:
                                        start:
                                          type: string
                                          format: date-time
                                        end:
                                          type: string
                                          format: date-time
                                    days:
                                      type: string
                                      description: >-
                                        comma separated values representing days
                                        of the week
                                    schedule:
                                      description: >-
                                        Describes schedule as a repeating time
                                        period used to describe a regularly
                                        recurring event. At a minimum a schedule
                                        will specify frequency which describes
                                        the interval between occurrences of the
                                        event. Additional information can be
                                        provided to specify the schedule more
                                        precisely. This includes identifying the
                                        timestamps(s) of when the event will
                                        take place. Schedules may also have
                                        holidays to exclude a specific day from
                                        the schedule.<br>This has properties
                                        like frequency, holidays, times
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        frequency: *ref_292
                                        holidays:
                                          type: array
                                          items:
                                            type: string
                                            format: date-time
                                        times:
                                          type: array
                                          items:
                                            type: string
                                            format: date-time
                                categories:
                                  type: array
                                  items:
                                    description: >-
                                      A label under which a collection of items
                                      can be grouped.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      id: &ref_293
                                        description: ID of the category
                                        type: string
                                      parent_category_id: *ref_293
                                      descriptor: *ref_290
                                      time: *ref_294
                                      ttl:
                                        description: >-
                                          Time to live for an instance of this
                                          schema
                                      tags:
                                        type: array
                                        items: &ref_296
                                          description: >-
                                            A collection of tag objects with group
                                            level attributes. For detailed
                                            documentation on the Tags and Tag Groups
                                            schema go to
                                            https://github.com/beckn/protocol-specifications/discussions/316
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            display:
                                              description: >-
                                                Indicates the display properties of the
                                                tag group. If display is set to false,
                                                then the group will not be displayed. If
                                                it is set to true, it should be
                                                displayed. However, group-level display
                                                properties can be overriden by
                                                individual tag-level display property.
                                                As this schema is purely for catalog
                                                display purposes, it is not recommended
                                                to send this value during search.
                                              type: boolean
                                              default: true
                                            descriptor:
                                              description: >-
                                                Description of the TagGroup, can be used
                                                to store detailed information.
                                              allOf:
                                                - *ref_290
                                            list:
                                              description: >-
                                                An array of Tag objects listed under
                                                this group. This property can be set by
                                                BAPs during search to narrow the
                                                `search` and achieve more relevant
                                                results. When received during
                                                `on_search`, BAPs must render this list
                                                under the heading described by the
                                                `name` property of this schema.
                                              type: array
                                              items:
                                                description: >-
                                                  Describes a tag. This is used to contain
                                                  extended metadata. This object can be
                                                  added as a property to any schema to
                                                  describe extended attributes. For BAPs,
                                                  tags can be sent during search to
                                                  optimize and filter search results. BPPs
                                                  can use tags to index their catalog to
                                                  allow better search functionality. Tags
                                                  are sent by the BPP as part of the
                                                  catalog response in the `on_search`
                                                  callback. Tags are also meant for
                                                  display purposes. Upon receiving a tag,
                                                  BAPs are meant to render them as
                                                  name-value pairs. This is particularly
                                                  useful when rendering tabular
                                                  information about a product or service.
                                                type: object
                                                additionalProperties: false
                                                properties:
                                                  descriptor:
                                                    description: >-
                                                      Description of the Tag, can be used to
                                                      store detailed information.
                                                    allOf:
                                                      - *ref_290
                                                  value:
                                                    description: >-
                                                      The value of the tag. This set by the
                                                      BPP and rendered as-is by the BAP.
                                                    type: string
                                                  display:
                                                    description: >-
                                                      This value indicates if the tag is
                                                      intended for display purposes. If set to
                                                      `true`, then this tag must be displayed.
                                                      If it is set to `false`, it should not
                                                      be displayed. This value can override
                                                      the group display value.
                                                    type: boolean
                                fulfillments:
                                  type: array
                                  items: &ref_317
                                    description: >-
                                      Describes how a an order will be
                                      rendered/fulfilled to the end-customer
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      id: &ref_308
                                        description: >-
                                          Unique reference ID to the fulfillment
                                          of an order
                                        type: string
                                      type:
                                        description: >-
                                          A code that describes the mode of
                                          fulfillment. This is typically set when
                                          there are multiple ways an order can be
                                          fulfilled. For example, a retail order
                                          can be fulfilled either via store pickup
                                          or a home delivery. Similarly, a medical
                                          consultation can be provided either
                                          in-person or via tele-consultation. The
                                          network policy must publish standard
                                          fulfillment type codes for the different
                                          modes of fulfillment.
                                        type: string
                                      rateable:
                                        description: >-
                                          Whether the fulfillment can be rated or
                                          not
                                        type: boolean
                                      rating:
                                        description: >-
                                          The rating value of the fulfullment
                                          service.
                                        allOf:
                                          - *ref_291
                                      state:
                                        description: >-
                                          The current state of fulfillment. The
                                          BPP must set this value whenever the
                                          state of the order fulfillment changes
                                          and fire an unsolicited `on_status`
                                          call.
                                        allOf:
                                          - &ref_311
                                            description: Describes the state of fulfillment
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor: *ref_290
                                              updated_at:
                                                type: string
                                                format: date-time
                                              updated_by:
                                                type: string
                                                description: ID of entity which changed the state
                                      tracking:
                                        type: boolean
                                        description: >-
                                          Indicates whether the fulfillment allows
                                          tracking
                                        default: false
                                      customer:
                                        description: >-
                                          The person that will ultimately receive
                                          the order
                                        allOf:
                                          - description: >-
                                              Describes a customer buying/availing a
                                              product or a service
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              person: &ref_297
                                                description: Describes a person as any individual
                                                type: object
                                                additionalProperties: false
                                                properties:
                                                  id:
                                                    type: string
                                                    description: Describes the identity of the person
                                                  url:
                                                    description: Profile url of the person
                                                    type: string
                                                    format: uri
                                                  name:
                                                    description: the name of the person
                                                    type: string
                                                  image: *ref_295
                                                  age:
                                                    description: Age of the person
                                                    allOf:
                                                      - *ref_292
                                                  dob:
                                                    description: Date of birth of the person
                                                    type: string
                                                    format: date
                                                  gender:
                                                    type: string
                                                    description: >-
                                                      Gender of something, typically a Person,
                                                      but possibly also fictional characters,
                                                      animals, etc. While Male and Female may
                                                      be used, text strings are also
                                                      acceptable for people who do not
                                                      identify as a binary gender.Allowed
                                                      values for this field can be published
                                                      in the network policy
                                                  creds:
                                                    type: array
                                                    items:
                                                      description: >-
                                                        Describes a credential of an entity -
                                                        Person or Organization
                                                      type: object
                                                      additionalProperties: false
                                                      properties:
                                                        id:
                                                          type: string
                                                        type:
                                                          type: string
                                                          default: VerifiableCredential
                                                        url:
                                                          description: URL of the credential
                                                          type: string
                                                          format: uri
                                                  languages:
                                                    type: array
                                                    items:
                                                      description: >-
                                                        Describes a language known to the
                                                        person.
                                                      type: object
                                                      additionalProperties: false
                                                      properties:
                                                        code:
                                                          type: string
                                                        name:
                                                          type: string
                                                  skills:
                                                    type: array
                                                    items:
                                                      description: Describes a skill of the person.
                                                      type: object
                                                      additionalProperties: false
                                                      properties:
                                                        code:
                                                          type: string
                                                        name:
                                                          type: string
                                                  tags:
                                                    type: array
                                                    items: *ref_296
                                              contact: &ref_298
                                                description: >-
                                                  Describes the contact information of an
                                                  entity
                                                type: object
                                                additionalProperties: false
                                                properties:
                                                  phone:
                                                    type: string
                                                  email:
                                                    type: string
                                                  jcard:
                                                    type: object
                                                    description: >-
                                                      A Jcard object as per
                                                      draft-ietf-jcardcal-jcard-03
                                                      specification
                                      agent:
                                        description: >-
                                          The agent that is currently handling the
                                          fulfillment of the order
                                        allOf:
                                          - description: >-
                                              Describes the direct performer, driver
                                              or executor that fulfills an order. It
                                              is usually a person. But in some rare
                                              cases, it could be a non-living entity
                                              like a drone, or a bot. Some examples of
                                              agents are Doctor in the healthcare
                                              sector, a driver in the mobility sector,
                                              or a delivery person in the logistics
                                              sector. This object can be set at any
                                              stage of the order lifecycle. This can
                                              be set at the discovery stage when the
                                              BPP wants to provide details on the
                                              agent fulfilling the order, like in
                                              healthcare, where the doctor's name
                                              appears during search. This object can
                                              also used to search for a particular
                                              person that the customer wants
                                              fulfilling an order. Sometimes, this
                                              object gets instantiated after the order
                                              is confirmed, like in the case of
                                              on-demand taxis, where the driver is
                                              assigned after the user confirms the
                                              ride.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              person: *ref_297
                                              contact: *ref_298
                                              organization: &ref_306
                                                description: >-
                                                  An organization. Usually a recognized
                                                  business entity.
                                                type: object
                                                additionalProperties: false
                                                properties:
                                                  descriptor: *ref_290
                                                  address:
                                                    description: The postal address of the organization
                                                    allOf:
                                                      - *ref_299
                                                  state:
                                                    description: >-
                                                      The state where the organization's
                                                      address is registered
                                                    allOf:
                                                      - *ref_300
                                                  city:
                                                    description: >-
                                                      The city where the the organization's
                                                      address is registered
                                                    allOf:
                                                      - *ref_301
                                                  contact: *ref_298
                                              rating: *ref_291
                                      contact: *ref_298
                                      vehicle:
                                        description: >-
                                          Describes a vehicle is a device that is
                                          designed or used to transport people or
                                          cargo over land, water, air, or through
                                          space.<br>This has properties like
                                          category, capacity, make, model,
                                          size,variant,color,energy_type,registration
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          category:
                                            type: string
                                          capacity:
                                            type: integer
                                          make:
                                            type: string
                                          model:
                                            type: string
                                          size:
                                            type: string
                                          variant:
                                            type: string
                                          color:
                                            type: string
                                          energy_type:
                                            type: string
                                          registration:
                                            type: string
                                          wheels_count:
                                            type: string
                                          cargo_volumne:
                                            type: string
                                          wheelchair_access:
                                            type: string
                                          code:
                                            type: string
                                          emission_standard:
                                            type: string
                                      stops:
                                        description: >-
                                          The list of logical stops encountered
                                          during the fulfillment of an order.
                                        type: array
                                        items:
                                          description: >-
                                            A logical point in space and time during
                                            the fulfillment of an order.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            id:
                                              type: string
                                            parent_stop_id:
                                              type: string
                                            location:
                                              description: Location of the stop
                                              allOf:
                                                - *ref_302
                                            type:
                                              description: >-
                                                The type of stop. Allowed values of this
                                                property can be defined by the network
                                                policy.
                                              type: string
                                            time:
                                              description: Timings applicable at the stop.
                                              allOf:
                                                - *ref_294
                                            instructions:
                                              description: >-
                                                Instructions that need to be followed at
                                                the stop
                                              allOf:
                                                - *ref_290
                                            contact:
                                              description: Contact details of the stop
                                              allOf:
                                                - *ref_298
                                            person:
                                              description: >-
                                                The details of the person present at the
                                                stop
                                              allOf:
                                                - *ref_297
                                            authorization:
                                              description: >-
                                                Describes an authorization mechanism
                                                used to start or end the fulfillment of
                                                an order. For example, in the mobility
                                                sector, the driver may require a
                                                one-time password to initiate the ride.
                                                In the healthcare sector, a patient may
                                                need to provide a password to open a
                                                video conference link during a
                                                teleconsultation.
                                              type: object
                                              additionalProperties: false
                                              properties:
                                                type:
                                                  description: >-
                                                    Type of authorization mechanism used.
                                                    The allowed values for this field can be
                                                    published as part of the network policy.
                                                  type: string
                                                token:
                                                  description: >-
                                                    Token used for authorization. This is
                                                    typically generated at the BPP. The BAP
                                                    can send this value to the user via any
                                                    channel that it uses to authenticate the
                                                    user like SMS, Email, Push notification,
                                                    or in-app rendering.
                                                  type: string
                                                valid_from:
                                                  description: >-
                                                    Timestamp in RFC3339 format from which
                                                    token is valid
                                                  type: string
                                                  format: date-time
                                                valid_to:
                                                  description: >-
                                                    Timestamp in RFC3339 format until which
                                                    token is valid
                                                  type: string
                                                  format: date-time
                                                status:
                                                  description: Status of the token
                                                  type: string
                                      path:
                                        description: >-
                                          The physical path taken by the agent
                                          that can be rendered on a map. The
                                          allowed format of this property can be
                                          set by the network.
                                        type: string
                                      tags:
                                        type: array
                                        items: *ref_296
                                payments:
                                  type: array
                                  items: &ref_322
                                    description: >-
                                      Describes the terms of settlement between
                                      the BAP and the BPP for a single
                                      transaction. When instantiated, this
                                      object contains <ol><li>the amount that
                                      has to be settled,</li><li>The payment
                                      destination destination
                                      details</li><li>When the settlement should
                                      happen, and</li><li>A transaction
                                      reference ID</li></ol>. During a
                                      transaction, the BPP reserves the right to
                                      decide the terms of payment. However, the
                                      BAP can send its terms to the BPP first.
                                      If the BPP does not agree to those terms,
                                      it must overwrite the terms and return
                                      them to the BAP. If overridden, the BAP
                                      must either agree to the terms sent by the
                                      BPP in order to preserve the provider's
                                      autonomy, or abort the transaction. In
                                      case of such disagreements, the BAP and
                                      the BPP can perform offline negotiations
                                      on the payment terms. Once an agreement is
                                      reached, the BAP and BPP can resume
                                      transactions.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      id: &ref_309
                                        description: >-
                                          ID of the payment term that can be
                                          referred at an item or an order level in
                                          a catalog
                                        type: string
                                      collected_by:
                                        description: >-
                                          This field indicates who is the
                                          collector of payment. The BAP can set
                                          this value to 'bap' if it wants to
                                          collect the payment first and  settle it
                                          to the BPP. If the BPP agrees to those
                                          terms, the BPP should not send the
                                          payment url. Alternatively, the BPP can
                                          set this field with the value 'bpp' if
                                          it wants the payment to be made
                                          directly.
                                        type: string
                                      url:
                                        type: string
                                        description: >-
                                          A payment url to be called by the BAP.
                                          If empty, then the payment is to be done
                                          offline. The details of payment should
                                          be present in the params object. If
                                          tl_method = http/get, then the payment
                                          details will be sent as url params. Two
                                          url param values, ```$transaction_id```
                                          and ```$amount``` are mandatory.
                                        format: uri
                                      tl_method:
                                        type: string
                                      params:
                                        type: object
                                        properties:
                                          transaction_id:
                                            type: string
                                            description: >-
                                              The reference transaction ID associated
                                              with a payment activity
                                          amount:
                                            type: string
                                          currency:
                                            type: string
                                          bank_code:
                                            type: string
                                          bank_account_number:
                                            type: string
                                          virtual_payment_address:
                                            type: string
                                          source_bank_code:
                                            type: string
                                          source_bank_account_number:
                                            type: string
                                          source_virtual_payment_address:
                                            type: string
                                      type:
                                        type: string
                                        enum:
                                          - PRE-ORDER
                                          - PRE-FULFILLMENT
                                          - ON-FULFILLMENT
                                          - POST-FULFILLMENT
                                          - ON-ORDER
                                      status:
                                        type: string
                                        enum:
                                          - PAID
                                          - NOT-PAID
                                      time: *ref_294
                                      tags:
                                        type: array
                                        items: *ref_296
                                locations:
                                  type: array
                                  items: *ref_302
                                offers:
                                  type: array
                                  items: &ref_316
                                    description: >-
                                      An offer associated with a catalog. This
                                      is typically used to promote a particular
                                      product and enable more purchases.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      id:
                                        type: string
                                      descriptor: *ref_290
                                      location_ids:
                                        type: array
                                        items: *ref_303
                                      category_ids:
                                        type: array
                                        items: *ref_293
                                      item_ids:
                                        type: array
                                        items: &ref_304
                                          description: ID of the item.
                                          type: string
                                      time: *ref_294
                                      tags:
                                        type: array
                                        items: *ref_296
                                items:
                                  type: array
                                  items: &ref_314
                                    description: >-
                                      Describes a product or a service offered
                                      to the end consumer by the provider. In
                                      the mobility sector, it can represent a
                                      fare product like one way journey. In the
                                      logistics sector, it can represent the
                                      delivery service offering. In the retail
                                      domain it can represent a product like a
                                      grocery item.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      id: *ref_304
                                      parent_item_id:
                                        description: >-
                                          ID of the item, this item is a variant
                                          of
                                        allOf:
                                          - *ref_304
                                      parent_item_quantity:
                                        description: >-
                                          The number of units of the parent item
                                          this item is a multiple of
                                        allOf:
                                          - &ref_307
                                            description: Describes the count or amount of an item
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              allocated:
                                                description: >-
                                                  This represents the exact quantity
                                                  allocated for purchase of the item.
                                                type: object
                                                properties:
                                                  count:
                                                    type: integer
                                                    minimum: 0
                                                  measure: *ref_305
                                              available:
                                                description: >-
                                                  This represents the exact quantity
                                                  available for purchase of the item. The
                                                  buyer can only purchase multiples of
                                                  this
                                                type: object
                                                properties:
                                                  count:
                                                    type: integer
                                                    minimum: 0
                                                  measure: *ref_305
                                              maximum:
                                                description: >-
                                                  This represents the maximum quantity
                                                  allowed for purchase of the item
                                                type: object
                                                properties:
                                                  count:
                                                    type: integer
                                                    minimum: 1
                                                  measure: *ref_305
                                              minimum:
                                                description: >-
                                                  This represents the minimum quantity
                                                  allowed for purchase of the item
                                                type: object
                                                properties:
                                                  count:
                                                    type: integer
                                                    minimum: 0
                                                  measure: *ref_305
                                              selected:
                                                description: >-
                                                  This represents the quantity selected
                                                  for purchase of the item
                                                type: object
                                                properties:
                                                  count:
                                                    type: integer
                                                    minimum: 0
                                                  measure: *ref_305
                                              unitized:
                                                description: >-
                                                  This represents the quantity available
                                                  in a single unit of the item
                                                type: object
                                                properties:
                                                  count:
                                                    type: integer
                                                    minimum: 1
                                                    maximum: 1
                                                  measure: *ref_305
                                      descriptor:
                                        description: Physical description of the item
                                        allOf:
                                          - *ref_290
                                      creator:
                                        description: The creator of this item
                                        allOf:
                                          - *ref_306
                                      price:
                                        description: >-
                                          The price of this item, if it has
                                          intrinsic value
                                        allOf:
                                          - &ref_310
                                            description: >-
                                              Describes the price of a product or
                                              service
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              currency:
                                                type: string
                                              value: *ref_287
                                              estimated_value: *ref_287
                                              computed_value: *ref_287
                                              listed_value: *ref_287
                                              offered_value: *ref_287
                                              minimum_value: *ref_287
                                              maximum_value: *ref_287
                                      quantity:
                                        description: The selling quantity of the item
                                        allOf:
                                          - *ref_307
                                      category_ids:
                                        description: Categories this item can be listed under
                                        type: array
                                        items:
                                          allOf:
                                            - *ref_293
                                      fulfillment_ids:
                                        description: >-
                                          Modes through which this item can be
                                          fulfilled
                                        type: array
                                        items:
                                          allOf:
                                            - *ref_308
                                      location_ids:
                                        description: >-
                                          Provider Locations this item is
                                          available in
                                        type: array
                                        items:
                                          allOf:
                                            - *ref_303
                                      payment_ids:
                                        description: >-
                                          Payment modalities through which this
                                          item can be ordered
                                        type: array
                                        items:
                                          allOf:
                                            - *ref_309
                                      add_ons:
                                        type: array
                                        items: &ref_315
                                          description: >-
                                            Describes an additional item offered as
                                            a value-addition to a product or
                                            service. This does not exist
                                            independently in a catalog and is always
                                            associated with an item.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            id:
                                              description: Provider-defined ID of the add-on
                                              type: string
                                            descriptor: *ref_290
                                            price: *ref_310
                                            quantity: *ref_307
                                      cancellation_terms:
                                        description: Cancellation terms of this item
                                        type: array
                                        items: &ref_318
                                          description: >-
                                            Describes the cancellation terms of an
                                            item or an order. This can be referenced
                                            at an item or order level. Item-level
                                            cancellation terms can override the
                                            terms at the order level.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            fulfillment_state:
                                              description: >-
                                                The state of fulfillment during which
                                                this term is applicable.
                                              allOf:
                                                - *ref_311
                                            reason_required:
                                              description: >-
                                                Indicates whether a reason is required
                                                to cancel the order
                                              type: boolean
                                            cancel_by:
                                              description: >-
                                                Information related to the time of
                                                cancellation.
                                              allOf:
                                                - *ref_294
                                            cancellation_fee:
                                              description: A fee applied on a particular entity
                                              type: object
                                              additionalProperties: false
                                              properties:
                                                percentage:
                                                  description: Percentage of a value
                                                  allOf:
                                                    - *ref_287
                                                amount:
                                                  description: A fixed value
                                                  allOf:
                                                    - *ref_310
                                            xinput: &ref_313
                                              description: >-
                                                Contains any additional or extended
                                                inputs required to confirm an order.
                                                This is typically a Form Input.
                                                Sometimes, selection of catalog elements
                                                is not enough for the BPP to confirm an
                                                order. For example, to confirm a flight
                                                ticket, the airline requires details of
                                                the passengers along with information on
                                                baggage, identity, in addition to the
                                                class of ticket. Similarly, a logistics
                                                company may require details on the
                                                nature of shipment in order to confirm
                                                the shipping. A recruiting firm may
                                                require additional details on the
                                                applicant in order to confirm a job
                                                application. For all such purposes, the
                                                BPP can choose to send this object
                                                attached to any object in the catalog
                                                that is required to be sent while
                                                placing the order. This object can
                                                typically be sent at an item level or at
                                                the order level. The item level XInput
                                                will override the Order level XInput as
                                                it indicates a special requirement of
                                                information for that particular item.
                                                Hence the BAP must render a separate
                                                form for the Item and another form at
                                                the Order level before confirmation.
                                              type: object
                                              additionalProperties: false
                                              properties:
                                                form:
                                                  description: Describes a form
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    url:
                                                      description: >-
                                                        The URL from where the form can be
                                                        fetched. The content fetched from the
                                                        url must be processed as per the
                                                        mime_type specified in this object. Once
                                                        fetched, the rendering platform can
                                                        choosed to render the form as-is as an
                                                        embeddable element; or process it
                                                        further to blend with the theme of the
                                                        application. In case the interface is
                                                        non-visual, the the render can process
                                                        the form data and reproduce it as per
                                                        the standard specified in the form.
                                                      type: string
                                                      format: uri
                                                    data:
                                                      description: The form submission data
                                                      type: object
                                                      additionalProperties:
                                                        type: string
                                                    mime_type:
                                                      description: >-
                                                        This field indicates the nature and
                                                        format of the form received by querying
                                                        the url. MIME types are defined and
                                                        standardized in IETF's RFC 6838.
                                                      type: string
                                                      enum:
                                                        - text/html
                                                        - application/xml
                                                    submission_id:
                                                      type: string
                                                      format: uuid
                                                required:
                                                  description: >-
                                                    Indicates whether the form data is
                                                    mandatorily required by the BPP to
                                                    confirm the order.
                                                  type: boolean
                                            external_ref: *ref_312
                                      refund_terms:
                                        description: Refund terms of this item
                                        type: array
                                        items: &ref_319
                                          description: Refund term of an item or an order
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            fulfillment_state:
                                              description: >-
                                                The state of fulfillment during which
                                                this term is applicable.
                                              allOf:
                                                - *ref_300
                                            refund_eligible:
                                              description: >-
                                                Indicates if cancellation will result in
                                                a refund
                                              type: boolean
                                            refund_within:
                                              description: >-
                                                Time within which refund will be
                                                processed after successful cancellation.
                                              allOf:
                                                - *ref_294
                                            refund_amount: *ref_310
                                      replacement_terms:
                                        description: >-
                                          Terms that are applicable be met when
                                          this item is replaced
                                        type: array
                                        items: &ref_320
                                          description: >-
                                            The replacement policy of an item or an
                                            order
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            fulfillment_state:
                                              description: >-
                                                The state of fulfillment during which
                                                this term is applicable.
                                              allOf:
                                                - *ref_300
                                            replace_within:
                                              description: >-
                                                Applicable only for buyer managed
                                                returns where the buyer has to replace
                                                the item before a certain date-time,
                                                failing which they will not be eligible
                                                for replacement
                                              allOf:
                                                - *ref_294
                                            external_ref: *ref_312
                                      return_terms:
                                        description: >-
                                          Terms that are applicable when this item
                                          is returned
                                        type: array
                                        items: &ref_321
                                          description: >-
                                            Describes the return policy of an item
                                            or an order
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            fulfillment_state:
                                              description: >-
                                                The state of fulfillment during which
                                                this term IETF''s applicable.
                                              allOf:
                                                - *ref_300
                                            return_eligible:
                                              description: >-
                                                Indicates whether the item is eligible
                                                for return
                                              type: boolean
                                            return_time:
                                              description: >-
                                                Applicable only for buyer managed
                                                returns where the buyer has to return
                                                the item to the origin before a certain
                                                date-time, failing which they will not
                                                be eligible for refund.
                                              allOf:
                                                - *ref_294
                                            return_location:
                                              description: >-
                                                The location where the item or order
                                                must / will be returned to
                                              allOf:
                                                - *ref_302
                                            fulfillment_managed_by:
                                              description: The entity that will perform the return
                                              type: string
                                              enum:
                                                - CONSUMER
                                                - PROVIDER
                                      xinput:
                                        description: >-
                                          Additional input required from the
                                          customer to purchase / avail this item
                                        allOf:
                                          - *ref_313
                                      time:
                                        description: >-
                                          Temporal attributes of this item. This
                                          property is used when the item exists on
                                          the catalog only for a limited period of
                                          time.
                                        allOf:
                                          - *ref_294
                                      rateable:
                                        description: Whether this item can be rated
                                        type: boolean
                                      rating:
                                        description: The rating of the item
                                        allOf:
                                          - *ref_291
                                      matched:
                                        description: >-
                                          Whether this item is an exact match of
                                          the request
                                        type: boolean
                                      related:
                                        description: >-
                                          Whether this item is a related item to
                                          the exactly matched item
                                        type: boolean
                                      recommended:
                                        description: >-
                                          Whether this item is a recommended item
                                          to a response
                                        type: boolean
                                      ttl:
                                        description: >-
                                          Time to live in seconds for an instance
                                          of this schema
                                        type: string
                                      tags:
                                        type: array
                                        items: *ref_296
                                exp:
                                  type: string
                                  description: Time after which catalog has to be refreshed
                                  format: date-time
                                rateable:
                                  description: Whether this provider can be rated or not
                                  type: boolean
                                ttl:
                                  description: >-
                                    The time-to-live in seconds, for this
                                    object. This can be overriden at deeper
                                    levels. A value of -1 indicates that this
                                    object is not cacheable.
                                  type: string
                                tags:
                                  type: array
                                  items: *ref_296
                        items:
                          description: The items purchased / availed in this order
                          type: array
                          items: *ref_314
                        add_ons:
                          description: The add-ons purchased / availed in this order
                          type: array
                          items: *ref_315
                        offers:
                          description: The offers applied in this order
                          type: array
                          items: *ref_316
                        billing:
                          description: The billing details of this order
                          allOf:
                            - description: >-
                                Describes the billing details of an
                                entity.<br>This has properties like
                                name,organization,address,email,phone,time,tax_number,
                                created_at,updated_at
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  description: Name of the billable entity
                                  type: string
                                organization:
                                  description: Details of the organization being billed.
                                  allOf:
                                    - *ref_306
                                address:
                                  description: The address of the billable entity
                                  allOf:
                                    - *ref_299
                                state:
                                  description: >-
                                    The state where the billable entity resides.
                                    This is important for state-level tax
                                    calculation
                                  allOf:
                                    - *ref_300
                                city:
                                  description: The city where the billable entity resides.
                                  allOf:
                                    - *ref_301
                                email:
                                  description: Email address where the bill is sent to
                                  type: string
                                  format: email
                                phone:
                                  description: Phone number of the billable entity
                                  type: string
                                time:
                                  description: Details regarding the billing period
                                  allOf:
                                    - *ref_294
                                tax_id:
                                  description: >-
                                    ID of the billable entity as recognized by
                                    the taxation authority
                                  type: string
                        fulfillments:
                          description: The fulfillments involved in completing this order
                          type: array
                          items: *ref_317
                        cancellation:
                          description: The cancellation details of this order
                          allOf:
                            - description: Describes a cancellation event
                              type: object
                              additionalProperties: false
                              properties:
                                time:
                                  description: >-
                                    Date-time when the order was cancelled by
                                    the buyer
                                  type: string
                                  format: date-time
                                cancelled_by:
                                  type: string
                                  enum:
                                    - CONSUMER
                                    - PROVIDER
                                reason:
                                  description: The reason for cancellation
                                  allOf:
                                    - description: Describes a selectable option
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          type: string
                                        descriptor: *ref_290
                                additional_description:
                                  description: >-
                                    Any additional information regarding the
                                    nature of cancellation
                                  allOf:
                                    - *ref_290
                        cancellation_terms:
                          description: Cancellation terms of this item
                          type: array
                          items: *ref_318
                        documents:
                          type: array
                          items:
                            description: Documnents associated to the order
                            type: object
                            additionalProperties: false
                            properties:
                              descriptor: *ref_290
                              mime_type:
                                description: >-
                                  This field indicates the nature and format of
                                  the form received by querying the url. MIME
                                  types are defined and standardized in IETF's
                                  RFC 6838.
                                type: string
                                enum:
                                  - text/html
                                  - application/html
                                  - application/xml
                                  - application/pdf
                              url:
                                description: >-
                                  The URL from where the form can be fetched.
                                  The content fetched from the url must be
                                  processed as per the mime_type specified in
                                  this object.
                                type: string
                                format: uri
                        refund_terms:
                          description: Refund terms of this item
                          type: array
                          items: *ref_319
                        replacement_terms:
                          description: Replacement terms of this item
                          type: array
                          items: *ref_320
                        return_terms:
                          description: Return terms of this item
                          type: array
                          items: *ref_321
                        quote:
                          description: The mutually agreed upon quotation for this order.
                          allOf:
                            - description: >-
                                Describes a quote. It is the estimated price of
                                products or services from the BPP.<br>This has
                                properties like price, breakup, ttl
                              type: object
                              additionalProperties: false
                              properties:
                                id:
                                  description: ID of the quote.
                                  type: string
                                  format: uuid
                                price:
                                  description: The total quoted price
                                  allOf:
                                    - *ref_310
                                breakup:
                                  description: the breakup of the total quoted price
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      item: *ref_314
                                      title:
                                        type: string
                                      price: *ref_310
                                ttl: *ref_292
                        payments:
                          description: The terms of settlement for this order
                          type: array
                          items: *ref_322
                        created_at:
                          description: The date-time of creation of this order
                          type: string
                          format: date-time
                        updated_at:
                          description: The date-time of updated of this order
                          type: string
                          format: date-time
                        xinput:
                          description: >-
                            Additional input required from the customer to
                            confirm this order
                          allOf:
                            - *ref_313
                        tags:
                          type: array
                          items: *ref_296
              required:
                - update_target
                - order
          required:
            - context
            - message
        on_update:
          type: object
          properties:
            context:
              allOf:
                - description: >-
                    Every API call in beckn protocol has a context. It provides
                    a high-level overview to the receiver about the nature of
                    the intended transaction. Typically, it is the BAP that sets
                    the transaction context based on the consumer's location and
                    action on their UI. But sometimes, during unsolicited
                    callbacks, the BPP also sets the transaction context but it
                    is usually the same as the context of a previous full-cycle,
                    request-callback interaction between the BAP and the BPP.
                    The context object contains four types of fields.
                    <ol><li>Demographic information about the transaction using
                    fields like `domain`, `country`, and
                    `region`.</li><li>Addressing details like the sending and
                    receiving platform's ID and API
                    URL.</li><li>Interoperability information like the protocol
                    version that implemented by the sender
                    and,</li><li>Transaction details like the method being
                    called at the receiver's endpoint, the transaction_id that
                    represents an end-to-end user session at the BAP, a message
                    ID to pair requests with callbacks, a timestamp to capture
                    sending times, a ttl to specifiy the validity of the
                    request, and a key to encrypt information if
                    necessary.</li></ol> This object must be passed in every
                    interaction between a BAP and a BPP. In HTTP/S
                    implementations, it is not necessary to send the context
                    during the synchronous response. However, in asynchronous
                    protocols, the context must be sent during all interactions,
                  type: object
                  additionalProperties: false
                  properties:
                    domain:
                      description: Domain code that is relevant to this transaction context
                      allOf:
                        - type: string
                          description: >-
                            Standard code representing the domain. The standard
                            is usually published as part of the network policy.
                            Furthermore, the network facilitator should also
                            provide a mechanism to provide the supported domains
                            of a network.
                    location:
                      description: >-
                        The location where the transaction is intended to be
                        fulfilled.
                      allOf:
                        - &ref_339
                          description: The physical location of something
                          type: object
                          additionalProperties: false
                          properties:
                            id: &ref_340
                              type: string
                            descriptor: &ref_327
                              description: Physical description of something.
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  type: string
                                code:
                                  type: string
                                short_desc:
                                  type: string
                                long_desc:
                                  type: string
                                additional_desc:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    content_type:
                                      type: string
                                      enum:
                                        - text/plain
                                        - text/html
                                        - application/json
                                media:
                                  type: array
                                  items: &ref_349
                                    description: >-
                                      This object contains a url to a media
                                      file.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      mimetype:
                                        description: >-
                                          indicates the nature and format of the
                                          document, file, or assortment of bytes.
                                          MIME types are defined and standardized
                                          in IETF's RFC 6838
                                        type: string
                                      url:
                                        description: The URL of the file
                                        type: string
                                        format: uri
                                      signature:
                                        description: >-
                                          The digital signature of the file signed
                                          by the sender
                                        type: string
                                      dsa:
                                        description: The signing algorithm used by the sender
                                        type: string
                                images:
                                  type: array
                                  items: &ref_332
                                    description: Describes an image
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      url:
                                        description: >-
                                          URL to the image. This can be a data url
                                          or an remote url
                                        type: string
                                        format: uri
                                      size_type:
                                        description: >-
                                          The size of the image. The network
                                          policy can define the default dimensions
                                          of each type
                                        type: string
                                        enum:
                                          - xs
                                          - sm
                                          - md
                                          - lg
                                          - xl
                                          - custom
                                      width:
                                        description: Width of the image in pixels
                                        type: string
                                      height:
                                        description: Height of the image in pixels
                                        type: string
                            map_url:
                              description: >-
                                The url to the map of the location. This can be
                                a globally recognized map url or the one
                                specified by the network policy.
                              type: string
                              format: uri
                            gps:
                              description: The GPS co-ordinates of this location.
                              allOf:
                                - &ref_323
                                  description: Describes a GPS coordinate
                                  type: string
                                  pattern: >-
                                    ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                            address:
                              description: The address of this location.
                              allOf:
                                - &ref_336
                                  description: Describes a postal address.
                                  type: string
                            city:
                              description: The city this location is, or is located within
                              allOf:
                                - &ref_338
                                  description: Describes a city
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      description: Name of the city
                                      type: string
                                    code:
                                      description: City code
                                      type: string
                            district:
                              description: The state this location is, or is located within
                              type: string
                            state:
                              description: The state this location is, or is located within
                              allOf:
                                - &ref_337
                                  description: >-
                                    A bounded geopolitical region of governance
                                    inside a country.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the state
                                    code:
                                      type: string
                                      description: >-
                                        State code as per country or
                                        international standards
                            country:
                              description: >-
                                The country this location is, or is located
                                within
                              allOf:
                                - description: Describes a country
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the country
                                    code:
                                      type: string
                                      description: >-
                                        Country code as per ISO 3166-1 and ISO
                                        3166-2 format
                            area_code:
                              type: string
                            circle:
                              description: >-
                                Describes a circular region of a specified
                                radius centered at a specified GPS coordinate.
                              type: object
                              additionalProperties: false
                              properties:
                                gps: *ref_323
                                radius: &ref_342
                                  description: Describes a scalar
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - CONSTANT
                                        - VARIABLE
                                    value: &ref_324
                                      description: >-
                                        Describes a numerical value in decimal
                                        form
                                      type: string
                                      pattern: '[+-]?([0-9]*[.])?[0-9]+'
                                    estimated_value: *ref_324
                                    computed_value: *ref_324
                                    range:
                                      type: object
                                      properties:
                                        min: *ref_324
                                        max: *ref_324
                                    unit:
                                      type: string
                            polygon:
                              description: The boundary polygon of this location
                              type: string
                            3dspace:
                              description: >-
                                The three dimensional region describing this
                                location
                              type: string
                            rating:
                              description: The rating of this location
                              allOf:
                                - &ref_328
                                  description: >-
                                    Rating value given to the object. This can
                                    be a single value or can also contain an
                                    inequality operator like gt, gte, lt, lte.
                                    This can also contain an inequality
                                    expression containing logical operators like
                                    && and ||.
                                  type: string
                    action:
                      description: >-
                        The Beckn protocol method being called by the sender and
                        executed at the receiver.
                      type: string
                    version:
                      type: string
                      description: >-
                        Version of transaction protocol being used by the
                        sender.
                    bap_id:
                      description: Subscriber ID of the BAP
                      allOf:
                        - &ref_325
                          description: >-
                            A globally unique identifier of the platform,
                            Typically it is the fully qualified domain name
                            (FQDN) of the platform.
                          type: string
                    bap_uri:
                      description: >-
                        Subscriber URL of the BAP for accepting callbacks from
                        BPPs.
                      allOf:
                        - &ref_326
                          description: >-
                            The callback URL of the Subscriber. This should
                            necessarily contain the same domain name as set in
                            `subscriber_id``.
                          type: string
                          format: uri
                    bpp_id:
                      description: Subscriber ID of the BPP
                      allOf:
                        - *ref_325
                    bpp_uri:
                      description: Subscriber URL of the BPP for accepting calls from BAPs.
                      allOf:
                        - *ref_326
                    transaction_id:
                      description: >-
                        This is a unique value which persists across all API
                        calls from `search` through `confirm`. This is done to
                        indicate an active user session across multiple
                        requests. The BPPs can use this value to push
                        personalized recommendations, and dynamic offerings
                        related to an ongoing transaction despite being unaware
                        of the user active on the BAP.
                      type: string
                      format: uuid
                    message_id:
                      description: >-
                        This is a unique value which persists during a request /
                        callback cycle. Since beckn protocol APIs are
                        asynchronous, BAPs need a common value to match an
                        incoming callback from a BPP to an earlier call. This
                        value can also be used to ignore duplicate messages
                        coming from the BPP. It is recommended to generate a
                        fresh message_id for every new interaction. When sending
                        unsolicited callbacks, BPPs must generate a new
                        message_id.
                      type: string
                      format: uuid
                    timestamp:
                      description: Time of request generation in RFC3339 format
                      type: string
                      format: date-time
                    key:
                      description: The encryption public key of the sender
                      type: string
                    ttl:
                      description: >-
                        The duration in ISO8601 format after timestamp for which
                        this message holds valid
                      type: string
                - type: object
                  properties:
                    action:
                      enum:
                        - on_update
                  required:
                    - action
            message:
              type: object
              properties:
                order:
                  description: >-
                    Describes a legal purchase order. It contains the complete
                    details of the legal contract created between the buyer and
                    the seller.
                  type: object
                  additionalProperties: false
                  properties:
                    id:
                      type: string
                      description: >-
                        Human-readable ID of the order. This is generated at the
                        BPP layer. The BPP can either generate order id within
                        its system or forward the order ID created at the
                        provider level.
                    ref_order_ids:
                      description: >-
                        A list of order IDs to link this order to previous
                        orders.
                      type: array
                      items:
                        type: string
                        description: ID of a previous order
                    status:
                      description: >-
                        Status of the order. Allowed values can be defined by
                        the network policy
                      type: string
                    type:
                      description: >-
                        This is used to indicate the type of order being created
                        to BPPs. Sometimes orders can be linked to previous
                        orders, like a replacement order in a retail domain. A
                        follow-up consultation in healthcare domain. A single
                        order part of a subscription order. The list of order
                        types can be standardized at the network level.
                      type: string
                      default: DEFAULT
                      enum:
                        - DRAFT
                        - DEFAULT
                    provider:
                      description: >-
                        Details of the provider whose catalog items have been
                        selected.
                      allOf:
                        - description: Describes the catalog of a business.
                          type: object
                          properties:
                            id:
                              type: string
                              description: Id of the provider
                            descriptor: *ref_327
                            category_id:
                              type: string
                              description: >-
                                Category Id of the provider at the BPP-level
                                catalog
                            rating: *ref_328
                            time: &ref_331
                              description: >-
                                Describes time in its various forms. It can be a
                                single point in time; duration; or a structured
                                timetable of operations<br>This has properties
                                like label, time stamp,duration,range, days,
                                schedule
                              type: object
                              additionalProperties: false
                              properties:
                                label:
                                  type: string
                                timestamp:
                                  type: string
                                  format: date-time
                                duration: &ref_329
                                  description: Describes duration as per ISO8601 format
                                  type: string
                                range:
                                  type: object
                                  properties:
                                    start:
                                      type: string
                                      format: date-time
                                    end:
                                      type: string
                                      format: date-time
                                days:
                                  type: string
                                  description: >-
                                    comma separated values representing days of
                                    the week
                                schedule:
                                  description: >-
                                    Describes schedule as a repeating time
                                    period used to describe a regularly
                                    recurring event. At a minimum a schedule
                                    will specify frequency which describes the
                                    interval between occurrences of the event.
                                    Additional information can be provided to
                                    specify the schedule more precisely. This
                                    includes identifying the timestamps(s) of
                                    when the event will take place. Schedules
                                    may also have holidays to exclude a specific
                                    day from the schedule.<br>This has
                                    properties like frequency, holidays, times
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    frequency: *ref_329
                                    holidays:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                                    times:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                            categories:
                              type: array
                              items:
                                description: >-
                                  A label under which a collection of items can
                                  be grouped.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_330
                                    description: ID of the category
                                    type: string
                                  parent_category_id: *ref_330
                                  descriptor: *ref_327
                                  time: *ref_331
                                  ttl:
                                    description: >-
                                      Time to live for an instance of this
                                      schema
                                  tags:
                                    type: array
                                    items: &ref_333
                                      description: >-
                                        A collection of tag objects with group
                                        level attributes. For detailed
                                        documentation on the Tags and Tag Groups
                                        schema go to
                                        https://github.com/beckn/protocol-specifications/discussions/316
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        display:
                                          description: >-
                                            Indicates the display properties of the
                                            tag group. If display is set to false,
                                            then the group will not be displayed. If
                                            it is set to true, it should be
                                            displayed. However, group-level display
                                            properties can be overriden by
                                            individual tag-level display property.
                                            As this schema is purely for catalog
                                            display purposes, it is not recommended
                                            to send this value during search.
                                          type: boolean
                                          default: true
                                        descriptor:
                                          description: >-
                                            Description of the TagGroup, can be used
                                            to store detailed information.
                                          allOf:
                                            - *ref_327
                                        list:
                                          description: >-
                                            An array of Tag objects listed under
                                            this group. This property can be set by
                                            BAPs during search to narrow the
                                            `search` and achieve more relevant
                                            results. When received during
                                            `on_search`, BAPs must render this list
                                            under the heading described by the
                                            `name` property of this schema.
                                          type: array
                                          items:
                                            description: >-
                                              Describes a tag. This is used to contain
                                              extended metadata. This object can be
                                              added as a property to any schema to
                                              describe extended attributes. For BAPs,
                                              tags can be sent during search to
                                              optimize and filter search results. BPPs
                                              can use tags to index their catalog to
                                              allow better search functionality. Tags
                                              are sent by the BPP as part of the
                                              catalog response in the `on_search`
                                              callback. Tags are also meant for
                                              display purposes. Upon receiving a tag,
                                              BAPs are meant to render them as
                                              name-value pairs. This is particularly
                                              useful when rendering tabular
                                              information about a product or service.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor:
                                                description: >-
                                                  Description of the Tag, can be used to
                                                  store detailed information.
                                                allOf:
                                                  - *ref_327
                                              value:
                                                description: >-
                                                  The value of the tag. This set by the
                                                  BPP and rendered as-is by the BAP.
                                                type: string
                                              display:
                                                description: >-
                                                  This value indicates if the tag is
                                                  intended for display purposes. If set to
                                                  `true`, then this tag must be displayed.
                                                  If it is set to `false`, it should not
                                                  be displayed. This value can override
                                                  the group display value.
                                                type: boolean
                            fulfillments:
                              type: array
                              items: &ref_354
                                description: >-
                                  Describes how a an order will be
                                  rendered/fulfilled to the end-customer
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_345
                                    description: >-
                                      Unique reference ID to the fulfillment of
                                      an order
                                    type: string
                                  type:
                                    description: >-
                                      A code that describes the mode of
                                      fulfillment. This is typically set when
                                      there are multiple ways an order can be
                                      fulfilled. For example, a retail order can
                                      be fulfilled either via store pickup or a
                                      home delivery. Similarly, a medical
                                      consultation can be provided either
                                      in-person or via tele-consultation. The
                                      network policy must publish standard
                                      fulfillment type codes for the different
                                      modes of fulfillment.
                                    type: string
                                  rateable:
                                    description: >-
                                      Whether the fulfillment can be rated or
                                      not
                                    type: boolean
                                  rating:
                                    description: >-
                                      The rating value of the fulfullment
                                      service.
                                    allOf:
                                      - *ref_328
                                  state:
                                    description: >-
                                      The current state of fulfillment. The BPP
                                      must set this value whenever the state of
                                      the order fulfillment changes and fire an
                                      unsolicited `on_status` call.
                                    allOf:
                                      - &ref_348
                                        description: Describes the state of fulfillment
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          descriptor: *ref_327
                                          updated_at:
                                            type: string
                                            format: date-time
                                          updated_by:
                                            type: string
                                            description: ID of entity which changed the state
                                  tracking:
                                    type: boolean
                                    description: >-
                                      Indicates whether the fulfillment allows
                                      tracking
                                    default: false
                                  customer:
                                    description: >-
                                      The person that will ultimately receive
                                      the order
                                    allOf:
                                      - description: >-
                                          Describes a customer buying/availing a
                                          product or a service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: &ref_334
                                            description: Describes a person as any individual
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              id:
                                                type: string
                                                description: Describes the identity of the person
                                              url:
                                                description: Profile url of the person
                                                type: string
                                                format: uri
                                              name:
                                                description: the name of the person
                                                type: string
                                              image: *ref_332
                                              age:
                                                description: Age of the person
                                                allOf:
                                                  - *ref_329
                                              dob:
                                                description: Date of birth of the person
                                                type: string
                                                format: date
                                              gender:
                                                type: string
                                                description: >-
                                                  Gender of something, typically a Person,
                                                  but possibly also fictional characters,
                                                  animals, etc. While Male and Female may
                                                  be used, text strings are also
                                                  acceptable for people who do not
                                                  identify as a binary gender.Allowed
                                                  values for this field can be published
                                                  in the network policy
                                              creds:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a credential of an entity -
                                                    Person or Organization
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    id:
                                                      type: string
                                                    type:
                                                      type: string
                                                      default: VerifiableCredential
                                                    url:
                                                      description: URL of the credential
                                                      type: string
                                                      format: uri
                                              languages:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a language known to the
                                                    person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              skills:
                                                type: array
                                                items:
                                                  description: Describes a skill of the person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              tags:
                                                type: array
                                                items: *ref_333
                                          contact: &ref_335
                                            description: >-
                                              Describes the contact information of an
                                              entity
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              phone:
                                                type: string
                                              email:
                                                type: string
                                              jcard:
                                                type: object
                                                description: >-
                                                  A Jcard object as per
                                                  draft-ietf-jcardcal-jcard-03
                                                  specification
                                  agent:
                                    description: >-
                                      The agent that is currently handling the
                                      fulfillment of the order
                                    allOf:
                                      - description: >-
                                          Describes the direct performer, driver
                                          or executor that fulfills an order. It
                                          is usually a person. But in some rare
                                          cases, it could be a non-living entity
                                          like a drone, or a bot. Some examples of
                                          agents are Doctor in the healthcare
                                          sector, a driver in the mobility sector,
                                          or a delivery person in the logistics
                                          sector. This object can be set at any
                                          stage of the order lifecycle. This can
                                          be set at the discovery stage when the
                                          BPP wants to provide details on the
                                          agent fulfilling the order, like in
                                          healthcare, where the doctor's name
                                          appears during search. This object can
                                          also used to search for a particular
                                          person that the customer wants
                                          fulfilling an order. Sometimes, this
                                          object gets instantiated after the order
                                          is confirmed, like in the case of
                                          on-demand taxis, where the driver is
                                          assigned after the user confirms the
                                          ride.
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: *ref_334
                                          contact: *ref_335
                                          organization: &ref_343
                                            description: >-
                                              An organization. Usually a recognized
                                              business entity.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor: *ref_327
                                              address:
                                                description: The postal address of the organization
                                                allOf:
                                                  - *ref_336
                                              state:
                                                description: >-
                                                  The state where the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_337
                                              city:
                                                description: >-
                                                  The city where the the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_338
                                              contact: *ref_335
                                          rating: *ref_328
                                  contact: *ref_335
                                  vehicle:
                                    description: >-
                                      Describes a vehicle is a device that is
                                      designed or used to transport people or
                                      cargo over land, water, air, or through
                                      space.<br>This has properties like
                                      category, capacity, make, model,
                                      size,variant,color,energy_type,registration
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      category:
                                        type: string
                                      capacity:
                                        type: integer
                                      make:
                                        type: string
                                      model:
                                        type: string
                                      size:
                                        type: string
                                      variant:
                                        type: string
                                      color:
                                        type: string
                                      energy_type:
                                        type: string
                                      registration:
                                        type: string
                                      wheels_count:
                                        type: string
                                      cargo_volumne:
                                        type: string
                                      wheelchair_access:
                                        type: string
                                      code:
                                        type: string
                                      emission_standard:
                                        type: string
                                  stops:
                                    description: >-
                                      The list of logical stops encountered
                                      during the fulfillment of an order.
                                    type: array
                                    items:
                                      description: >-
                                        A logical point in space and time during
                                        the fulfillment of an order.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          type: string
                                        parent_stop_id:
                                          type: string
                                        location:
                                          description: Location of the stop
                                          allOf:
                                            - *ref_339
                                        type:
                                          description: >-
                                            The type of stop. Allowed values of this
                                            property can be defined by the network
                                            policy.
                                          type: string
                                        time:
                                          description: Timings applicable at the stop.
                                          allOf:
                                            - *ref_331
                                        instructions:
                                          description: >-
                                            Instructions that need to be followed at
                                            the stop
                                          allOf:
                                            - *ref_327
                                        contact:
                                          description: Contact details of the stop
                                          allOf:
                                            - *ref_335
                                        person:
                                          description: >-
                                            The details of the person present at the
                                            stop
                                          allOf:
                                            - *ref_334
                                        authorization:
                                          description: >-
                                            Describes an authorization mechanism
                                            used to start or end the fulfillment of
                                            an order. For example, in the mobility
                                            sector, the driver may require a
                                            one-time password to initiate the ride.
                                            In the healthcare sector, a patient may
                                            need to provide a password to open a
                                            video conference link during a
                                            teleconsultation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            type:
                                              description: >-
                                                Type of authorization mechanism used.
                                                The allowed values for this field can be
                                                published as part of the network policy.
                                              type: string
                                            token:
                                              description: >-
                                                Token used for authorization. This is
                                                typically generated at the BPP. The BAP
                                                can send this value to the user via any
                                                channel that it uses to authenticate the
                                                user like SMS, Email, Push notification,
                                                or in-app rendering.
                                              type: string
                                            valid_from:
                                              description: >-
                                                Timestamp in RFC3339 format from which
                                                token is valid
                                              type: string
                                              format: date-time
                                            valid_to:
                                              description: >-
                                                Timestamp in RFC3339 format until which
                                                token is valid
                                              type: string
                                              format: date-time
                                            status:
                                              description: Status of the token
                                              type: string
                                  path:
                                    description: >-
                                      The physical path taken by the agent that
                                      can be rendered on a map. The allowed
                                      format of this property can be set by the
                                      network.
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_333
                            payments:
                              type: array
                              items: &ref_359
                                description: >-
                                  Describes the terms of settlement between the
                                  BAP and the BPP for a single transaction. When
                                  instantiated, this object contains <ol><li>the
                                  amount that has to be settled,</li><li>The
                                  payment destination destination
                                  details</li><li>When the settlement should
                                  happen, and</li><li>A transaction reference
                                  ID</li></ol>. During a transaction, the BPP
                                  reserves the right to decide the terms of
                                  payment. However, the BAP can send its terms
                                  to the BPP first. If the BPP does not agree to
                                  those terms, it must overwrite the terms and
                                  return them to the BAP. If overridden, the BAP
                                  must either agree to the terms sent by the BPP
                                  in order to preserve the provider's autonomy,
                                  or abort the transaction. In case of such
                                  disagreements, the BAP and the BPP can perform
                                  offline negotiations on the payment terms.
                                  Once an agreement is reached, the BAP and BPP
                                  can resume transactions.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_346
                                    description: >-
                                      ID of the payment term that can be
                                      referred at an item or an order level in a
                                      catalog
                                    type: string
                                  collected_by:
                                    description: >-
                                      This field indicates who is the collector
                                      of payment. The BAP can set this value to
                                      'bap' if it wants to collect the payment
                                      first and  settle it to the BPP. If the
                                      BPP agrees to those terms, the BPP should
                                      not send the payment url. Alternatively,
                                      the BPP can set this field with the value
                                      'bpp' if it wants the payment to be made
                                      directly.
                                    type: string
                                  url:
                                    type: string
                                    description: >-
                                      A payment url to be called by the BAP. If
                                      empty, then the payment is to be done
                                      offline. The details of payment should be
                                      present in the params object. If tl_method
                                      = http/get, then the payment details will
                                      be sent as url params. Two url param
                                      values, ```$transaction_id``` and
                                      ```$amount``` are mandatory.
                                    format: uri
                                  tl_method:
                                    type: string
                                  params:
                                    type: object
                                    properties:
                                      transaction_id:
                                        type: string
                                        description: >-
                                          The reference transaction ID associated
                                          with a payment activity
                                      amount:
                                        type: string
                                      currency:
                                        type: string
                                      bank_code:
                                        type: string
                                      bank_account_number:
                                        type: string
                                      virtual_payment_address:
                                        type: string
                                      source_bank_code:
                                        type: string
                                      source_bank_account_number:
                                        type: string
                                      source_virtual_payment_address:
                                        type: string
                                  type:
                                    type: string
                                    enum:
                                      - PRE-ORDER
                                      - PRE-FULFILLMENT
                                      - ON-FULFILLMENT
                                      - POST-FULFILLMENT
                                      - ON-ORDER
                                  status:
                                    type: string
                                    enum:
                                      - PAID
                                      - NOT-PAID
                                  time: *ref_331
                                  tags:
                                    type: array
                                    items: *ref_333
                            locations:
                              type: array
                              items: *ref_339
                            offers:
                              type: array
                              items: &ref_353
                                description: >-
                                  An offer associated with a catalog. This is
                                  typically used to promote a particular product
                                  and enable more purchases.
                                type: object
                                additionalProperties: false
                                properties:
                                  id:
                                    type: string
                                  descriptor: *ref_327
                                  location_ids:
                                    type: array
                                    items: *ref_340
                                  category_ids:
                                    type: array
                                    items: *ref_330
                                  item_ids:
                                    type: array
                                    items: &ref_341
                                      description: ID of the item.
                                      type: string
                                  time: *ref_331
                                  tags:
                                    type: array
                                    items: *ref_333
                            items:
                              type: array
                              items: &ref_351
                                description: >-
                                  Describes a product or a service offered to
                                  the end consumer by the provider. In the
                                  mobility sector, it can represent a fare
                                  product like one way journey. In the logistics
                                  sector, it can represent the delivery service
                                  offering. In the retail domain it can
                                  represent a product like a grocery item.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: *ref_341
                                  parent_item_id:
                                    description: ID of the item, this item is a variant of
                                    allOf:
                                      - *ref_341
                                  parent_item_quantity:
                                    description: >-
                                      The number of units of the parent item
                                      this item is a multiple of
                                    allOf:
                                      - &ref_344
                                        description: Describes the count or amount of an item
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          allocated:
                                            description: >-
                                              This represents the exact quantity
                                              allocated for purchase of the item.
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_342
                                          available:
                                            description: >-
                                              This represents the exact quantity
                                              available for purchase of the item. The
                                              buyer can only purchase multiples of
                                              this
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_342
                                          maximum:
                                            description: >-
                                              This represents the maximum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                              measure: *ref_342
                                          minimum:
                                            description: >-
                                              This represents the minimum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_342
                                          selected:
                                            description: >-
                                              This represents the quantity selected
                                              for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_342
                                          unitized:
                                            description: >-
                                              This represents the quantity available
                                              in a single unit of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                                maximum: 1
                                              measure: *ref_342
                                  descriptor:
                                    description: Physical description of the item
                                    allOf:
                                      - *ref_327
                                  creator:
                                    description: The creator of this item
                                    allOf:
                                      - *ref_343
                                  price:
                                    description: >-
                                      The price of this item, if it has
                                      intrinsic value
                                    allOf:
                                      - &ref_347
                                        description: >-
                                          Describes the price of a product or
                                          service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          currency:
                                            type: string
                                          value: *ref_324
                                          estimated_value: *ref_324
                                          computed_value: *ref_324
                                          listed_value: *ref_324
                                          offered_value: *ref_324
                                          minimum_value: *ref_324
                                          maximum_value: *ref_324
                                  quantity:
                                    description: The selling quantity of the item
                                    allOf:
                                      - *ref_344
                                  category_ids:
                                    description: Categories this item can be listed under
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_330
                                  fulfillment_ids:
                                    description: >-
                                      Modes through which this item can be
                                      fulfilled
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_345
                                  location_ids:
                                    description: >-
                                      Provider Locations this item is available
                                      in
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_340
                                  payment_ids:
                                    description: >-
                                      Payment modalities through which this item
                                      can be ordered
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_346
                                  add_ons:
                                    type: array
                                    items: &ref_352
                                      description: >-
                                        Describes an additional item offered as
                                        a value-addition to a product or
                                        service. This does not exist
                                        independently in a catalog and is always
                                        associated with an item.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          description: Provider-defined ID of the add-on
                                          type: string
                                        descriptor: *ref_327
                                        price: *ref_347
                                        quantity: *ref_344
                                  cancellation_terms:
                                    description: Cancellation terms of this item
                                    type: array
                                    items: &ref_355
                                      description: >-
                                        Describes the cancellation terms of an
                                        item or an order. This can be referenced
                                        at an item or order level. Item-level
                                        cancellation terms can override the
                                        terms at the order level.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_348
                                        reason_required:
                                          description: >-
                                            Indicates whether a reason is required
                                            to cancel the order
                                          type: boolean
                                        cancel_by:
                                          description: >-
                                            Information related to the time of
                                            cancellation.
                                          allOf:
                                            - *ref_331
                                        cancellation_fee:
                                          description: A fee applied on a particular entity
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            percentage:
                                              description: Percentage of a value
                                              allOf:
                                                - *ref_324
                                            amount:
                                              description: A fixed value
                                              allOf:
                                                - *ref_347
                                        xinput: &ref_350
                                          description: >-
                                            Contains any additional or extended
                                            inputs required to confirm an order.
                                            This is typically a Form Input.
                                            Sometimes, selection of catalog elements
                                            is not enough for the BPP to confirm an
                                            order. For example, to confirm a flight
                                            ticket, the airline requires details of
                                            the passengers along with information on
                                            baggage, identity, in addition to the
                                            class of ticket. Similarly, a logistics
                                            company may require details on the
                                            nature of shipment in order to confirm
                                            the shipping. A recruiting firm may
                                            require additional details on the
                                            applicant in order to confirm a job
                                            application. For all such purposes, the
                                            BPP can choose to send this object
                                            attached to any object in the catalog
                                            that is required to be sent while
                                            placing the order. This object can
                                            typically be sent at an item level or at
                                            the order level. The item level XInput
                                            will override the Order level XInput as
                                            it indicates a special requirement of
                                            information for that particular item.
                                            Hence the BAP must render a separate
                                            form for the Item and another form at
                                            the Order level before confirmation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            form:
                                              description: Describes a form
                                              type: object
                                              additionalProperties: false
                                              properties:
                                                url:
                                                  description: >-
                                                    The URL from where the form can be
                                                    fetched. The content fetched from the
                                                    url must be processed as per the
                                                    mime_type specified in this object. Once
                                                    fetched, the rendering platform can
                                                    choosed to render the form as-is as an
                                                    embeddable element; or process it
                                                    further to blend with the theme of the
                                                    application. In case the interface is
                                                    non-visual, the the render can process
                                                    the form data and reproduce it as per
                                                    the standard specified in the form.
                                                  type: string
                                                  format: uri
                                                data:
                                                  description: The form submission data
                                                  type: object
                                                  additionalProperties:
                                                    type: string
                                                mime_type:
                                                  description: >-
                                                    This field indicates the nature and
                                                    format of the form received by querying
                                                    the url. MIME types are defined and
                                                    standardized in IETF's RFC 6838.
                                                  type: string
                                                  enum:
                                                    - text/html
                                                    - application/xml
                                                submission_id:
                                                  type: string
                                                  format: uuid
                                            required:
                                              description: >-
                                                Indicates whether the form data is
                                                mandatorily required by the BPP to
                                                confirm the order.
                                              type: boolean
                                        external_ref: *ref_349
                                  refund_terms:
                                    description: Refund terms of this item
                                    type: array
                                    items: &ref_356
                                      description: Refund term of an item or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_337
                                        refund_eligible:
                                          description: >-
                                            Indicates if cancellation will result in
                                            a refund
                                          type: boolean
                                        refund_within:
                                          description: >-
                                            Time within which refund will be
                                            processed after successful cancellation.
                                          allOf:
                                            - *ref_331
                                        refund_amount: *ref_347
                                  replacement_terms:
                                    description: >-
                                      Terms that are applicable be met when this
                                      item is replaced
                                    type: array
                                    items: &ref_357
                                      description: >-
                                        The replacement policy of an item or an
                                        order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_337
                                        replace_within:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to replace
                                            the item before a certain date-time,
                                            failing which they will not be eligible
                                            for replacement
                                          allOf:
                                            - *ref_331
                                        external_ref: *ref_349
                                  return_terms:
                                    description: >-
                                      Terms that are applicable when this item
                                      is returned
                                    type: array
                                    items: &ref_358
                                      description: >-
                                        Describes the return policy of an item
                                        or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term IETF''s applicable.
                                          allOf:
                                            - *ref_337
                                        return_eligible:
                                          description: >-
                                            Indicates whether the item is eligible
                                            for return
                                          type: boolean
                                        return_time:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to return
                                            the item to the origin before a certain
                                            date-time, failing which they will not
                                            be eligible for refund.
                                          allOf:
                                            - *ref_331
                                        return_location:
                                          description: >-
                                            The location where the item or order
                                            must / will be returned to
                                          allOf:
                                            - *ref_339
                                        fulfillment_managed_by:
                                          description: The entity that will perform the return
                                          type: string
                                          enum:
                                            - CONSUMER
                                            - PROVIDER
                                  xinput:
                                    description: >-
                                      Additional input required from the
                                      customer to purchase / avail this item
                                    allOf:
                                      - *ref_350
                                  time:
                                    description: >-
                                      Temporal attributes of this item. This
                                      property is used when the item exists on
                                      the catalog only for a limited period of
                                      time.
                                    allOf:
                                      - *ref_331
                                  rateable:
                                    description: Whether this item can be rated
                                    type: boolean
                                  rating:
                                    description: The rating of the item
                                    allOf:
                                      - *ref_328
                                  matched:
                                    description: >-
                                      Whether this item is an exact match of the
                                      request
                                    type: boolean
                                  related:
                                    description: >-
                                      Whether this item is a related item to the
                                      exactly matched item
                                    type: boolean
                                  recommended:
                                    description: >-
                                      Whether this item is a recommended item to
                                      a response
                                    type: boolean
                                  ttl:
                                    description: >-
                                      Time to live in seconds for an instance of
                                      this schema
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_333
                            exp:
                              type: string
                              description: Time after which catalog has to be refreshed
                              format: date-time
                            rateable:
                              description: Whether this provider can be rated or not
                              type: boolean
                            ttl:
                              description: >-
                                The time-to-live in seconds, for this object.
                                This can be overriden at deeper levels. A value
                                of -1 indicates that this object is not
                                cacheable.
                              type: string
                            tags:
                              type: array
                              items: *ref_333
                    items:
                      description: The items purchased / availed in this order
                      type: array
                      items: *ref_351
                    add_ons:
                      description: The add-ons purchased / availed in this order
                      type: array
                      items: *ref_352
                    offers:
                      description: The offers applied in this order
                      type: array
                      items: *ref_353
                    billing:
                      description: The billing details of this order
                      allOf:
                        - description: >-
                            Describes the billing details of an entity.<br>This
                            has properties like
                            name,organization,address,email,phone,time,tax_number,
                            created_at,updated_at
                          type: object
                          additionalProperties: false
                          properties:
                            name:
                              description: Name of the billable entity
                              type: string
                            organization:
                              description: Details of the organization being billed.
                              allOf:
                                - *ref_343
                            address:
                              description: The address of the billable entity
                              allOf:
                                - *ref_336
                            state:
                              description: >-
                                The state where the billable entity resides.
                                This is important for state-level tax
                                calculation
                              allOf:
                                - *ref_337
                            city:
                              description: The city where the billable entity resides.
                              allOf:
                                - *ref_338
                            email:
                              description: Email address where the bill is sent to
                              type: string
                              format: email
                            phone:
                              description: Phone number of the billable entity
                              type: string
                            time:
                              description: Details regarding the billing period
                              allOf:
                                - *ref_331
                            tax_id:
                              description: >-
                                ID of the billable entity as recognized by the
                                taxation authority
                              type: string
                    fulfillments:
                      description: The fulfillments involved in completing this order
                      type: array
                      items: *ref_354
                    cancellation:
                      description: The cancellation details of this order
                      allOf:
                        - description: Describes a cancellation event
                          type: object
                          additionalProperties: false
                          properties:
                            time:
                              description: >-
                                Date-time when the order was cancelled by the
                                buyer
                              type: string
                              format: date-time
                            cancelled_by:
                              type: string
                              enum:
                                - CONSUMER
                                - PROVIDER
                            reason:
                              description: The reason for cancellation
                              allOf:
                                - description: Describes a selectable option
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    id:
                                      type: string
                                    descriptor: *ref_327
                            additional_description:
                              description: >-
                                Any additional information regarding the nature
                                of cancellation
                              allOf:
                                - *ref_327
                    cancellation_terms:
                      description: Cancellation terms of this item
                      type: array
                      items: *ref_355
                    documents:
                      type: array
                      items:
                        description: Documnents associated to the order
                        type: object
                        additionalProperties: false
                        properties:
                          descriptor: *ref_327
                          mime_type:
                            description: >-
                              This field indicates the nature and format of the
                              form received by querying the url. MIME types are
                              defined and standardized in IETF's RFC 6838.
                            type: string
                            enum:
                              - text/html
                              - application/html
                              - application/xml
                              - application/pdf
                          url:
                            description: >-
                              The URL from where the form can be fetched. The
                              content fetched from the url must be processed as
                              per the mime_type specified in this object.
                            type: string
                            format: uri
                    refund_terms:
                      description: Refund terms of this item
                      type: array
                      items: *ref_356
                    replacement_terms:
                      description: Replacement terms of this item
                      type: array
                      items: *ref_357
                    return_terms:
                      description: Return terms of this item
                      type: array
                      items: *ref_358
                    quote:
                      description: The mutually agreed upon quotation for this order.
                      allOf:
                        - description: >-
                            Describes a quote. It is the estimated price of
                            products or services from the BPP.<br>This has
                            properties like price, breakup, ttl
                          type: object
                          additionalProperties: false
                          properties:
                            id:
                              description: ID of the quote.
                              type: string
                              format: uuid
                            price:
                              description: The total quoted price
                              allOf:
                                - *ref_347
                            breakup:
                              description: the breakup of the total quoted price
                              type: array
                              items:
                                type: object
                                properties:
                                  item: *ref_351
                                  title:
                                    type: string
                                  price: *ref_347
                            ttl: *ref_329
                    payments:
                      description: The terms of settlement for this order
                      type: array
                      items: *ref_359
                    created_at:
                      description: The date-time of creation of this order
                      type: string
                      format: date-time
                    updated_at:
                      description: The date-time of updated of this order
                      type: string
                      format: date-time
                    xinput:
                      description: >-
                        Additional input required from the customer to confirm
                        this order
                      allOf:
                        - *ref_350
                    tags:
                      type: array
                      items: *ref_333
              required:
                - order
            error:
              description: >-
                Describes an error object that is returned by a BAP, BPP or BG
                as a response or callback to an action by another network
                participant. This object is sent when any request received by a
                network participant is unacceptable. This object can be sent
                either during Ack or with the callback.
              type: object
              additionalProperties: false
              properties:
                code:
                  type: string
                  description: >-
                    Standard error code. For full list of error codes, refer to
                    docs/protocol-drafts/BECKN-005-ERROR-CODES-DRAFT-01.md of
                    this repo"
                paths:
                  type: string
                  description: >-
                    Path to json schema generating the error. Used only during
                    json schema validation errors
                message:
                  type: string
                  description: >-
                    Human readable message describing the error. Used mainly for
                    logging. Not recommended to be shown to the user.
          required:
            - context
        cancel:
          type: object
          properties:
            context:
              allOf:
                - description: >-
                    Every API call in beckn protocol has a context. It provides
                    a high-level overview to the receiver about the nature of
                    the intended transaction. Typically, it is the BAP that sets
                    the transaction context based on the consumer's location and
                    action on their UI. But sometimes, during unsolicited
                    callbacks, the BPP also sets the transaction context but it
                    is usually the same as the context of a previous full-cycle,
                    request-callback interaction between the BAP and the BPP.
                    The context object contains four types of fields.
                    <ol><li>Demographic information about the transaction using
                    fields like `domain`, `country`, and
                    `region`.</li><li>Addressing details like the sending and
                    receiving platform's ID and API
                    URL.</li><li>Interoperability information like the protocol
                    version that implemented by the sender
                    and,</li><li>Transaction details like the method being
                    called at the receiver's endpoint, the transaction_id that
                    represents an end-to-end user session at the BAP, a message
                    ID to pair requests with callbacks, a timestamp to capture
                    sending times, a ttl to specifiy the validity of the
                    request, and a key to encrypt information if
                    necessary.</li></ol> This object must be passed in every
                    interaction between a BAP and a BPP. In HTTP/S
                    implementations, it is not necessary to send the context
                    during the synchronous response. However, in asynchronous
                    protocols, the context must be sent during all interactions,
                  type: object
                  additionalProperties: false
                  properties:
                    domain:
                      description: Domain code that is relevant to this transaction context
                      allOf:
                        - type: string
                          description: >-
                            Standard code representing the domain. The standard
                            is usually published as part of the network policy.
                            Furthermore, the network facilitator should also
                            provide a mechanism to provide the supported domains
                            of a network.
                    location:
                      description: >-
                        The location where the transaction is intended to be
                        fulfilled.
                      allOf:
                        - description: The physical location of something
                          type: object
                          additionalProperties: false
                          properties:
                            id:
                              type: string
                            descriptor: &ref_364
                              description: Physical description of something.
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  type: string
                                code:
                                  type: string
                                short_desc:
                                  type: string
                                long_desc:
                                  type: string
                                additional_desc:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    content_type:
                                      type: string
                                      enum:
                                        - text/plain
                                        - text/html
                                        - application/json
                                media:
                                  type: array
                                  items:
                                    description: >-
                                      This object contains a url to a media
                                      file.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      mimetype:
                                        description: >-
                                          indicates the nature and format of the
                                          document, file, or assortment of bytes.
                                          MIME types are defined and standardized
                                          in IETF's RFC 6838
                                        type: string
                                      url:
                                        description: The URL of the file
                                        type: string
                                        format: uri
                                      signature:
                                        description: >-
                                          The digital signature of the file signed
                                          by the sender
                                        type: string
                                      dsa:
                                        description: The signing algorithm used by the sender
                                        type: string
                                images:
                                  type: array
                                  items:
                                    description: Describes an image
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      url:
                                        description: >-
                                          URL to the image. This can be a data url
                                          or an remote url
                                        type: string
                                        format: uri
                                      size_type:
                                        description: >-
                                          The size of the image. The network
                                          policy can define the default dimensions
                                          of each type
                                        type: string
                                        enum:
                                          - xs
                                          - sm
                                          - md
                                          - lg
                                          - xl
                                          - custom
                                      width:
                                        description: Width of the image in pixels
                                        type: string
                                      height:
                                        description: Height of the image in pixels
                                        type: string
                            map_url:
                              description: >-
                                The url to the map of the location. This can be
                                a globally recognized map url or the one
                                specified by the network policy.
                              type: string
                              format: uri
                            gps:
                              description: The GPS co-ordinates of this location.
                              allOf:
                                - &ref_360
                                  description: Describes a GPS coordinate
                                  type: string
                                  pattern: >-
                                    ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                            address:
                              description: The address of this location.
                              allOf:
                                - description: Describes a postal address.
                                  type: string
                            city:
                              description: The city this location is, or is located within
                              allOf:
                                - description: Describes a city
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      description: Name of the city
                                      type: string
                                    code:
                                      description: City code
                                      type: string
                            district:
                              description: The state this location is, or is located within
                              type: string
                            state:
                              description: The state this location is, or is located within
                              allOf:
                                - description: >-
                                    A bounded geopolitical region of governance
                                    inside a country.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the state
                                    code:
                                      type: string
                                      description: >-
                                        State code as per country or
                                        international standards
                            country:
                              description: >-
                                The country this location is, or is located
                                within
                              allOf:
                                - description: Describes a country
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the country
                                    code:
                                      type: string
                                      description: >-
                                        Country code as per ISO 3166-1 and ISO
                                        3166-2 format
                            area_code:
                              type: string
                            circle:
                              description: >-
                                Describes a circular region of a specified
                                radius centered at a specified GPS coordinate.
                              type: object
                              additionalProperties: false
                              properties:
                                gps: *ref_360
                                radius:
                                  description: Describes a scalar
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - CONSTANT
                                        - VARIABLE
                                    value: &ref_361
                                      description: >-
                                        Describes a numerical value in decimal
                                        form
                                      type: string
                                      pattern: '[+-]?([0-9]*[.])?[0-9]+'
                                    estimated_value: *ref_361
                                    computed_value: *ref_361
                                    range:
                                      type: object
                                      properties:
                                        min: *ref_361
                                        max: *ref_361
                                    unit:
                                      type: string
                            polygon:
                              description: The boundary polygon of this location
                              type: string
                            3dspace:
                              description: >-
                                The three dimensional region describing this
                                location
                              type: string
                            rating:
                              description: The rating of this location
                              allOf:
                                - description: >-
                                    Rating value given to the object. This can
                                    be a single value or can also contain an
                                    inequality operator like gt, gte, lt, lte.
                                    This can also contain an inequality
                                    expression containing logical operators like
                                    && and ||.
                                  type: string
                    action:
                      description: >-
                        The Beckn protocol method being called by the sender and
                        executed at the receiver.
                      type: string
                    version:
                      type: string
                      description: >-
                        Version of transaction protocol being used by the
                        sender.
                    bap_id:
                      description: Subscriber ID of the BAP
                      allOf:
                        - &ref_362
                          description: >-
                            A globally unique identifier of the platform,
                            Typically it is the fully qualified domain name
                            (FQDN) of the platform.
                          type: string
                    bap_uri:
                      description: >-
                        Subscriber URL of the BAP for accepting callbacks from
                        BPPs.
                      allOf:
                        - &ref_363
                          description: >-
                            The callback URL of the Subscriber. This should
                            necessarily contain the same domain name as set in
                            `subscriber_id``.
                          type: string
                          format: uri
                    bpp_id:
                      description: Subscriber ID of the BPP
                      allOf:
                        - *ref_362
                    bpp_uri:
                      description: Subscriber URL of the BPP for accepting calls from BAPs.
                      allOf:
                        - *ref_363
                    transaction_id:
                      description: >-
                        This is a unique value which persists across all API
                        calls from `search` through `confirm`. This is done to
                        indicate an active user session across multiple
                        requests. The BPPs can use this value to push
                        personalized recommendations, and dynamic offerings
                        related to an ongoing transaction despite being unaware
                        of the user active on the BAP.
                      type: string
                      format: uuid
                    message_id:
                      description: >-
                        This is a unique value which persists during a request /
                        callback cycle. Since beckn protocol APIs are
                        asynchronous, BAPs need a common value to match an
                        incoming callback from a BPP to an earlier call. This
                        value can also be used to ignore duplicate messages
                        coming from the BPP. It is recommended to generate a
                        fresh message_id for every new interaction. When sending
                        unsolicited callbacks, BPPs must generate a new
                        message_id.
                      type: string
                      format: uuid
                    timestamp:
                      description: Time of request generation in RFC3339 format
                      type: string
                      format: date-time
                    key:
                      description: The encryption public key of the sender
                      type: string
                    ttl:
                      description: >-
                        The duration in ISO8601 format after timestamp for which
                        this message holds valid
                      type: string
                - type: object
                  properties:
                    action:
                      enum:
                        - cancel
                  required:
                    - action
            message:
              type: object
              properties:
                order_id:
                  type: string
                  description: >-
                    Human-readable ID of the order. This is generated at the BPP
                    layer. The BPP can either generate order id within its
                    system or forward the order ID created at the provider
                    level.
                cancellation_reason_id:
                  type: string
                descriptor: *ref_364
              required:
                - order_id
          required:
            - context
            - message
        on_cancel:
          type: object
          properties:
            context:
              allOf:
                - description: >-
                    Every API call in beckn protocol has a context. It provides
                    a high-level overview to the receiver about the nature of
                    the intended transaction. Typically, it is the BAP that sets
                    the transaction context based on the consumer's location and
                    action on their UI. But sometimes, during unsolicited
                    callbacks, the BPP also sets the transaction context but it
                    is usually the same as the context of a previous full-cycle,
                    request-callback interaction between the BAP and the BPP.
                    The context object contains four types of fields.
                    <ol><li>Demographic information about the transaction using
                    fields like `domain`, `country`, and
                    `region`.</li><li>Addressing details like the sending and
                    receiving platform's ID and API
                    URL.</li><li>Interoperability information like the protocol
                    version that implemented by the sender
                    and,</li><li>Transaction details like the method being
                    called at the receiver's endpoint, the transaction_id that
                    represents an end-to-end user session at the BAP, a message
                    ID to pair requests with callbacks, a timestamp to capture
                    sending times, a ttl to specifiy the validity of the
                    request, and a key to encrypt information if
                    necessary.</li></ol> This object must be passed in every
                    interaction between a BAP and a BPP. In HTTP/S
                    implementations, it is not necessary to send the context
                    during the synchronous response. However, in asynchronous
                    protocols, the context must be sent during all interactions,
                  type: object
                  additionalProperties: false
                  properties:
                    domain:
                      description: Domain code that is relevant to this transaction context
                      allOf:
                        - type: string
                          description: >-
                            Standard code representing the domain. The standard
                            is usually published as part of the network policy.
                            Furthermore, the network facilitator should also
                            provide a mechanism to provide the supported domains
                            of a network.
                    location:
                      description: >-
                        The location where the transaction is intended to be
                        fulfilled.
                      allOf:
                        - &ref_381
                          description: The physical location of something
                          type: object
                          additionalProperties: false
                          properties:
                            id: &ref_382
                              type: string
                            descriptor: &ref_369
                              description: Physical description of something.
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  type: string
                                code:
                                  type: string
                                short_desc:
                                  type: string
                                long_desc:
                                  type: string
                                additional_desc:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    content_type:
                                      type: string
                                      enum:
                                        - text/plain
                                        - text/html
                                        - application/json
                                media:
                                  type: array
                                  items: &ref_391
                                    description: >-
                                      This object contains a url to a media
                                      file.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      mimetype:
                                        description: >-
                                          indicates the nature and format of the
                                          document, file, or assortment of bytes.
                                          MIME types are defined and standardized
                                          in IETF's RFC 6838
                                        type: string
                                      url:
                                        description: The URL of the file
                                        type: string
                                        format: uri
                                      signature:
                                        description: >-
                                          The digital signature of the file signed
                                          by the sender
                                        type: string
                                      dsa:
                                        description: The signing algorithm used by the sender
                                        type: string
                                images:
                                  type: array
                                  items: &ref_374
                                    description: Describes an image
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      url:
                                        description: >-
                                          URL to the image. This can be a data url
                                          or an remote url
                                        type: string
                                        format: uri
                                      size_type:
                                        description: >-
                                          The size of the image. The network
                                          policy can define the default dimensions
                                          of each type
                                        type: string
                                        enum:
                                          - xs
                                          - sm
                                          - md
                                          - lg
                                          - xl
                                          - custom
                                      width:
                                        description: Width of the image in pixels
                                        type: string
                                      height:
                                        description: Height of the image in pixels
                                        type: string
                            map_url:
                              description: >-
                                The url to the map of the location. This can be
                                a globally recognized map url or the one
                                specified by the network policy.
                              type: string
                              format: uri
                            gps:
                              description: The GPS co-ordinates of this location.
                              allOf:
                                - &ref_365
                                  description: Describes a GPS coordinate
                                  type: string
                                  pattern: >-
                                    ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                            address:
                              description: The address of this location.
                              allOf:
                                - &ref_378
                                  description: Describes a postal address.
                                  type: string
                            city:
                              description: The city this location is, or is located within
                              allOf:
                                - &ref_380
                                  description: Describes a city
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      description: Name of the city
                                      type: string
                                    code:
                                      description: City code
                                      type: string
                            district:
                              description: The state this location is, or is located within
                              type: string
                            state:
                              description: The state this location is, or is located within
                              allOf:
                                - &ref_379
                                  description: >-
                                    A bounded geopolitical region of governance
                                    inside a country.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the state
                                    code:
                                      type: string
                                      description: >-
                                        State code as per country or
                                        international standards
                            country:
                              description: >-
                                The country this location is, or is located
                                within
                              allOf:
                                - description: Describes a country
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the country
                                    code:
                                      type: string
                                      description: >-
                                        Country code as per ISO 3166-1 and ISO
                                        3166-2 format
                            area_code:
                              type: string
                            circle:
                              description: >-
                                Describes a circular region of a specified
                                radius centered at a specified GPS coordinate.
                              type: object
                              additionalProperties: false
                              properties:
                                gps: *ref_365
                                radius: &ref_384
                                  description: Describes a scalar
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - CONSTANT
                                        - VARIABLE
                                    value: &ref_366
                                      description: >-
                                        Describes a numerical value in decimal
                                        form
                                      type: string
                                      pattern: '[+-]?([0-9]*[.])?[0-9]+'
                                    estimated_value: *ref_366
                                    computed_value: *ref_366
                                    range:
                                      type: object
                                      properties:
                                        min: *ref_366
                                        max: *ref_366
                                    unit:
                                      type: string
                            polygon:
                              description: The boundary polygon of this location
                              type: string
                            3dspace:
                              description: >-
                                The three dimensional region describing this
                                location
                              type: string
                            rating:
                              description: The rating of this location
                              allOf:
                                - &ref_370
                                  description: >-
                                    Rating value given to the object. This can
                                    be a single value or can also contain an
                                    inequality operator like gt, gte, lt, lte.
                                    This can also contain an inequality
                                    expression containing logical operators like
                                    && and ||.
                                  type: string
                    action:
                      description: >-
                        The Beckn protocol method being called by the sender and
                        executed at the receiver.
                      type: string
                    version:
                      type: string
                      description: >-
                        Version of transaction protocol being used by the
                        sender.
                    bap_id:
                      description: Subscriber ID of the BAP
                      allOf:
                        - &ref_367
                          description: >-
                            A globally unique identifier of the platform,
                            Typically it is the fully qualified domain name
                            (FQDN) of the platform.
                          type: string
                    bap_uri:
                      description: >-
                        Subscriber URL of the BAP for accepting callbacks from
                        BPPs.
                      allOf:
                        - &ref_368
                          description: >-
                            The callback URL of the Subscriber. This should
                            necessarily contain the same domain name as set in
                            `subscriber_id``.
                          type: string
                          format: uri
                    bpp_id:
                      description: Subscriber ID of the BPP
                      allOf:
                        - *ref_367
                    bpp_uri:
                      description: Subscriber URL of the BPP for accepting calls from BAPs.
                      allOf:
                        - *ref_368
                    transaction_id:
                      description: >-
                        This is a unique value which persists across all API
                        calls from `search` through `confirm`. This is done to
                        indicate an active user session across multiple
                        requests. The BPPs can use this value to push
                        personalized recommendations, and dynamic offerings
                        related to an ongoing transaction despite being unaware
                        of the user active on the BAP.
                      type: string
                      format: uuid
                    message_id:
                      description: >-
                        This is a unique value which persists during a request /
                        callback cycle. Since beckn protocol APIs are
                        asynchronous, BAPs need a common value to match an
                        incoming callback from a BPP to an earlier call. This
                        value can also be used to ignore duplicate messages
                        coming from the BPP. It is recommended to generate a
                        fresh message_id for every new interaction. When sending
                        unsolicited callbacks, BPPs must generate a new
                        message_id.
                      type: string
                      format: uuid
                    timestamp:
                      description: Time of request generation in RFC3339 format
                      type: string
                      format: date-time
                    key:
                      description: The encryption public key of the sender
                      type: string
                    ttl:
                      description: >-
                        The duration in ISO8601 format after timestamp for which
                        this message holds valid
                      type: string
                - type: object
                  properties:
                    action:
                      enum:
                        - on_cancel
                  required:
                    - action
            message:
              type: object
              properties:
                order:
                  description: >-
                    Describes a legal purchase order. It contains the complete
                    details of the legal contract created between the buyer and
                    the seller.
                  type: object
                  additionalProperties: false
                  properties:
                    id:
                      type: string
                      description: >-
                        Human-readable ID of the order. This is generated at the
                        BPP layer. The BPP can either generate order id within
                        its system or forward the order ID created at the
                        provider level.
                    ref_order_ids:
                      description: >-
                        A list of order IDs to link this order to previous
                        orders.
                      type: array
                      items:
                        type: string
                        description: ID of a previous order
                    status:
                      description: >-
                        Status of the order. Allowed values can be defined by
                        the network policy
                      type: string
                    type:
                      description: >-
                        This is used to indicate the type of order being created
                        to BPPs. Sometimes orders can be linked to previous
                        orders, like a replacement order in a retail domain. A
                        follow-up consultation in healthcare domain. A single
                        order part of a subscription order. The list of order
                        types can be standardized at the network level.
                      type: string
                      default: DEFAULT
                      enum:
                        - DRAFT
                        - DEFAULT
                    provider:
                      description: >-
                        Details of the provider whose catalog items have been
                        selected.
                      allOf:
                        - description: Describes the catalog of a business.
                          type: object
                          properties:
                            id:
                              type: string
                              description: Id of the provider
                            descriptor: *ref_369
                            category_id:
                              type: string
                              description: >-
                                Category Id of the provider at the BPP-level
                                catalog
                            rating: *ref_370
                            time: &ref_373
                              description: >-
                                Describes time in its various forms. It can be a
                                single point in time; duration; or a structured
                                timetable of operations<br>This has properties
                                like label, time stamp,duration,range, days,
                                schedule
                              type: object
                              additionalProperties: false
                              properties:
                                label:
                                  type: string
                                timestamp:
                                  type: string
                                  format: date-time
                                duration: &ref_371
                                  description: Describes duration as per ISO8601 format
                                  type: string
                                range:
                                  type: object
                                  properties:
                                    start:
                                      type: string
                                      format: date-time
                                    end:
                                      type: string
                                      format: date-time
                                days:
                                  type: string
                                  description: >-
                                    comma separated values representing days of
                                    the week
                                schedule:
                                  description: >-
                                    Describes schedule as a repeating time
                                    period used to describe a regularly
                                    recurring event. At a minimum a schedule
                                    will specify frequency which describes the
                                    interval between occurrences of the event.
                                    Additional information can be provided to
                                    specify the schedule more precisely. This
                                    includes identifying the timestamps(s) of
                                    when the event will take place. Schedules
                                    may also have holidays to exclude a specific
                                    day from the schedule.<br>This has
                                    properties like frequency, holidays, times
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    frequency: *ref_371
                                    holidays:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                                    times:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                            categories:
                              type: array
                              items:
                                description: >-
                                  A label under which a collection of items can
                                  be grouped.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_372
                                    description: ID of the category
                                    type: string
                                  parent_category_id: *ref_372
                                  descriptor: *ref_369
                                  time: *ref_373
                                  ttl:
                                    description: >-
                                      Time to live for an instance of this
                                      schema
                                  tags:
                                    type: array
                                    items: &ref_375
                                      description: >-
                                        A collection of tag objects with group
                                        level attributes. For detailed
                                        documentation on the Tags and Tag Groups
                                        schema go to
                                        https://github.com/beckn/protocol-specifications/discussions/316
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        display:
                                          description: >-
                                            Indicates the display properties of the
                                            tag group. If display is set to false,
                                            then the group will not be displayed. If
                                            it is set to true, it should be
                                            displayed. However, group-level display
                                            properties can be overriden by
                                            individual tag-level display property.
                                            As this schema is purely for catalog
                                            display purposes, it is not recommended
                                            to send this value during search.
                                          type: boolean
                                          default: true
                                        descriptor:
                                          description: >-
                                            Description of the TagGroup, can be used
                                            to store detailed information.
                                          allOf:
                                            - *ref_369
                                        list:
                                          description: >-
                                            An array of Tag objects listed under
                                            this group. This property can be set by
                                            BAPs during search to narrow the
                                            `search` and achieve more relevant
                                            results. When received during
                                            `on_search`, BAPs must render this list
                                            under the heading described by the
                                            `name` property of this schema.
                                          type: array
                                          items:
                                            description: >-
                                              Describes a tag. This is used to contain
                                              extended metadata. This object can be
                                              added as a property to any schema to
                                              describe extended attributes. For BAPs,
                                              tags can be sent during search to
                                              optimize and filter search results. BPPs
                                              can use tags to index their catalog to
                                              allow better search functionality. Tags
                                              are sent by the BPP as part of the
                                              catalog response in the `on_search`
                                              callback. Tags are also meant for
                                              display purposes. Upon receiving a tag,
                                              BAPs are meant to render them as
                                              name-value pairs. This is particularly
                                              useful when rendering tabular
                                              information about a product or service.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor:
                                                description: >-
                                                  Description of the Tag, can be used to
                                                  store detailed information.
                                                allOf:
                                                  - *ref_369
                                              value:
                                                description: >-
                                                  The value of the tag. This set by the
                                                  BPP and rendered as-is by the BAP.
                                                type: string
                                              display:
                                                description: >-
                                                  This value indicates if the tag is
                                                  intended for display purposes. If set to
                                                  `true`, then this tag must be displayed.
                                                  If it is set to `false`, it should not
                                                  be displayed. This value can override
                                                  the group display value.
                                                type: boolean
                            fulfillments:
                              type: array
                              items: &ref_396
                                description: >-
                                  Describes how a an order will be
                                  rendered/fulfilled to the end-customer
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_387
                                    description: >-
                                      Unique reference ID to the fulfillment of
                                      an order
                                    type: string
                                  type:
                                    description: >-
                                      A code that describes the mode of
                                      fulfillment. This is typically set when
                                      there are multiple ways an order can be
                                      fulfilled. For example, a retail order can
                                      be fulfilled either via store pickup or a
                                      home delivery. Similarly, a medical
                                      consultation can be provided either
                                      in-person or via tele-consultation. The
                                      network policy must publish standard
                                      fulfillment type codes for the different
                                      modes of fulfillment.
                                    type: string
                                  rateable:
                                    description: >-
                                      Whether the fulfillment can be rated or
                                      not
                                    type: boolean
                                  rating:
                                    description: >-
                                      The rating value of the fulfullment
                                      service.
                                    allOf:
                                      - *ref_370
                                  state:
                                    description: >-
                                      The current state of fulfillment. The BPP
                                      must set this value whenever the state of
                                      the order fulfillment changes and fire an
                                      unsolicited `on_status` call.
                                    allOf:
                                      - &ref_390
                                        description: Describes the state of fulfillment
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          descriptor: *ref_369
                                          updated_at:
                                            type: string
                                            format: date-time
                                          updated_by:
                                            type: string
                                            description: ID of entity which changed the state
                                  tracking:
                                    type: boolean
                                    description: >-
                                      Indicates whether the fulfillment allows
                                      tracking
                                    default: false
                                  customer:
                                    description: >-
                                      The person that will ultimately receive
                                      the order
                                    allOf:
                                      - description: >-
                                          Describes a customer buying/availing a
                                          product or a service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: &ref_376
                                            description: Describes a person as any individual
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              id:
                                                type: string
                                                description: Describes the identity of the person
                                              url:
                                                description: Profile url of the person
                                                type: string
                                                format: uri
                                              name:
                                                description: the name of the person
                                                type: string
                                              image: *ref_374
                                              age:
                                                description: Age of the person
                                                allOf:
                                                  - *ref_371
                                              dob:
                                                description: Date of birth of the person
                                                type: string
                                                format: date
                                              gender:
                                                type: string
                                                description: >-
                                                  Gender of something, typically a Person,
                                                  but possibly also fictional characters,
                                                  animals, etc. While Male and Female may
                                                  be used, text strings are also
                                                  acceptable for people who do not
                                                  identify as a binary gender.Allowed
                                                  values for this field can be published
                                                  in the network policy
                                              creds:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a credential of an entity -
                                                    Person or Organization
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    id:
                                                      type: string
                                                    type:
                                                      type: string
                                                      default: VerifiableCredential
                                                    url:
                                                      description: URL of the credential
                                                      type: string
                                                      format: uri
                                              languages:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a language known to the
                                                    person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              skills:
                                                type: array
                                                items:
                                                  description: Describes a skill of the person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              tags:
                                                type: array
                                                items: *ref_375
                                          contact: &ref_377
                                            description: >-
                                              Describes the contact information of an
                                              entity
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              phone:
                                                type: string
                                              email:
                                                type: string
                                              jcard:
                                                type: object
                                                description: >-
                                                  A Jcard object as per
                                                  draft-ietf-jcardcal-jcard-03
                                                  specification
                                  agent:
                                    description: >-
                                      The agent that is currently handling the
                                      fulfillment of the order
                                    allOf:
                                      - description: >-
                                          Describes the direct performer, driver
                                          or executor that fulfills an order. It
                                          is usually a person. But in some rare
                                          cases, it could be a non-living entity
                                          like a drone, or a bot. Some examples of
                                          agents are Doctor in the healthcare
                                          sector, a driver in the mobility sector,
                                          or a delivery person in the logistics
                                          sector. This object can be set at any
                                          stage of the order lifecycle. This can
                                          be set at the discovery stage when the
                                          BPP wants to provide details on the
                                          agent fulfilling the order, like in
                                          healthcare, where the doctor's name
                                          appears during search. This object can
                                          also used to search for a particular
                                          person that the customer wants
                                          fulfilling an order. Sometimes, this
                                          object gets instantiated after the order
                                          is confirmed, like in the case of
                                          on-demand taxis, where the driver is
                                          assigned after the user confirms the
                                          ride.
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: *ref_376
                                          contact: *ref_377
                                          organization: &ref_385
                                            description: >-
                                              An organization. Usually a recognized
                                              business entity.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor: *ref_369
                                              address:
                                                description: The postal address of the organization
                                                allOf:
                                                  - *ref_378
                                              state:
                                                description: >-
                                                  The state where the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_379
                                              city:
                                                description: >-
                                                  The city where the the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_380
                                              contact: *ref_377
                                          rating: *ref_370
                                  contact: *ref_377
                                  vehicle:
                                    description: >-
                                      Describes a vehicle is a device that is
                                      designed or used to transport people or
                                      cargo over land, water, air, or through
                                      space.<br>This has properties like
                                      category, capacity, make, model,
                                      size,variant,color,energy_type,registration
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      category:
                                        type: string
                                      capacity:
                                        type: integer
                                      make:
                                        type: string
                                      model:
                                        type: string
                                      size:
                                        type: string
                                      variant:
                                        type: string
                                      color:
                                        type: string
                                      energy_type:
                                        type: string
                                      registration:
                                        type: string
                                      wheels_count:
                                        type: string
                                      cargo_volumne:
                                        type: string
                                      wheelchair_access:
                                        type: string
                                      code:
                                        type: string
                                      emission_standard:
                                        type: string
                                  stops:
                                    description: >-
                                      The list of logical stops encountered
                                      during the fulfillment of an order.
                                    type: array
                                    items:
                                      description: >-
                                        A logical point in space and time during
                                        the fulfillment of an order.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          type: string
                                        parent_stop_id:
                                          type: string
                                        location:
                                          description: Location of the stop
                                          allOf:
                                            - *ref_381
                                        type:
                                          description: >-
                                            The type of stop. Allowed values of this
                                            property can be defined by the network
                                            policy.
                                          type: string
                                        time:
                                          description: Timings applicable at the stop.
                                          allOf:
                                            - *ref_373
                                        instructions:
                                          description: >-
                                            Instructions that need to be followed at
                                            the stop
                                          allOf:
                                            - *ref_369
                                        contact:
                                          description: Contact details of the stop
                                          allOf:
                                            - *ref_377
                                        person:
                                          description: >-
                                            The details of the person present at the
                                            stop
                                          allOf:
                                            - *ref_376
                                        authorization:
                                          description: >-
                                            Describes an authorization mechanism
                                            used to start or end the fulfillment of
                                            an order. For example, in the mobility
                                            sector, the driver may require a
                                            one-time password to initiate the ride.
                                            In the healthcare sector, a patient may
                                            need to provide a password to open a
                                            video conference link during a
                                            teleconsultation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            type:
                                              description: >-
                                                Type of authorization mechanism used.
                                                The allowed values for this field can be
                                                published as part of the network policy.
                                              type: string
                                            token:
                                              description: >-
                                                Token used for authorization. This is
                                                typically generated at the BPP. The BAP
                                                can send this value to the user via any
                                                channel that it uses to authenticate the
                                                user like SMS, Email, Push notification,
                                                or in-app rendering.
                                              type: string
                                            valid_from:
                                              description: >-
                                                Timestamp in RFC3339 format from which
                                                token is valid
                                              type: string
                                              format: date-time
                                            valid_to:
                                              description: >-
                                                Timestamp in RFC3339 format until which
                                                token is valid
                                              type: string
                                              format: date-time
                                            status:
                                              description: Status of the token
                                              type: string
                                  path:
                                    description: >-
                                      The physical path taken by the agent that
                                      can be rendered on a map. The allowed
                                      format of this property can be set by the
                                      network.
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_375
                            payments:
                              type: array
                              items: &ref_401
                                description: >-
                                  Describes the terms of settlement between the
                                  BAP and the BPP for a single transaction. When
                                  instantiated, this object contains <ol><li>the
                                  amount that has to be settled,</li><li>The
                                  payment destination destination
                                  details</li><li>When the settlement should
                                  happen, and</li><li>A transaction reference
                                  ID</li></ol>. During a transaction, the BPP
                                  reserves the right to decide the terms of
                                  payment. However, the BAP can send its terms
                                  to the BPP first. If the BPP does not agree to
                                  those terms, it must overwrite the terms and
                                  return them to the BAP. If overridden, the BAP
                                  must either agree to the terms sent by the BPP
                                  in order to preserve the provider's autonomy,
                                  or abort the transaction. In case of such
                                  disagreements, the BAP and the BPP can perform
                                  offline negotiations on the payment terms.
                                  Once an agreement is reached, the BAP and BPP
                                  can resume transactions.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_388
                                    description: >-
                                      ID of the payment term that can be
                                      referred at an item or an order level in a
                                      catalog
                                    type: string
                                  collected_by:
                                    description: >-
                                      This field indicates who is the collector
                                      of payment. The BAP can set this value to
                                      'bap' if it wants to collect the payment
                                      first and  settle it to the BPP. If the
                                      BPP agrees to those terms, the BPP should
                                      not send the payment url. Alternatively,
                                      the BPP can set this field with the value
                                      'bpp' if it wants the payment to be made
                                      directly.
                                    type: string
                                  url:
                                    type: string
                                    description: >-
                                      A payment url to be called by the BAP. If
                                      empty, then the payment is to be done
                                      offline. The details of payment should be
                                      present in the params object. If tl_method
                                      = http/get, then the payment details will
                                      be sent as url params. Two url param
                                      values, ```$transaction_id``` and
                                      ```$amount``` are mandatory.
                                    format: uri
                                  tl_method:
                                    type: string
                                  params:
                                    type: object
                                    properties:
                                      transaction_id:
                                        type: string
                                        description: >-
                                          The reference transaction ID associated
                                          with a payment activity
                                      amount:
                                        type: string
                                      currency:
                                        type: string
                                      bank_code:
                                        type: string
                                      bank_account_number:
                                        type: string
                                      virtual_payment_address:
                                        type: string
                                      source_bank_code:
                                        type: string
                                      source_bank_account_number:
                                        type: string
                                      source_virtual_payment_address:
                                        type: string
                                  type:
                                    type: string
                                    enum:
                                      - PRE-ORDER
                                      - PRE-FULFILLMENT
                                      - ON-FULFILLMENT
                                      - POST-FULFILLMENT
                                      - ON-ORDER
                                  status:
                                    type: string
                                    enum:
                                      - PAID
                                      - NOT-PAID
                                  time: *ref_373
                                  tags:
                                    type: array
                                    items: *ref_375
                            locations:
                              type: array
                              items: *ref_381
                            offers:
                              type: array
                              items: &ref_395
                                description: >-
                                  An offer associated with a catalog. This is
                                  typically used to promote a particular product
                                  and enable more purchases.
                                type: object
                                additionalProperties: false
                                properties:
                                  id:
                                    type: string
                                  descriptor: *ref_369
                                  location_ids:
                                    type: array
                                    items: *ref_382
                                  category_ids:
                                    type: array
                                    items: *ref_372
                                  item_ids:
                                    type: array
                                    items: &ref_383
                                      description: ID of the item.
                                      type: string
                                  time: *ref_373
                                  tags:
                                    type: array
                                    items: *ref_375
                            items:
                              type: array
                              items: &ref_393
                                description: >-
                                  Describes a product or a service offered to
                                  the end consumer by the provider. In the
                                  mobility sector, it can represent a fare
                                  product like one way journey. In the logistics
                                  sector, it can represent the delivery service
                                  offering. In the retail domain it can
                                  represent a product like a grocery item.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: *ref_383
                                  parent_item_id:
                                    description: ID of the item, this item is a variant of
                                    allOf:
                                      - *ref_383
                                  parent_item_quantity:
                                    description: >-
                                      The number of units of the parent item
                                      this item is a multiple of
                                    allOf:
                                      - &ref_386
                                        description: Describes the count or amount of an item
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          allocated:
                                            description: >-
                                              This represents the exact quantity
                                              allocated for purchase of the item.
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_384
                                          available:
                                            description: >-
                                              This represents the exact quantity
                                              available for purchase of the item. The
                                              buyer can only purchase multiples of
                                              this
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_384
                                          maximum:
                                            description: >-
                                              This represents the maximum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                              measure: *ref_384
                                          minimum:
                                            description: >-
                                              This represents the minimum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_384
                                          selected:
                                            description: >-
                                              This represents the quantity selected
                                              for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_384
                                          unitized:
                                            description: >-
                                              This represents the quantity available
                                              in a single unit of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                                maximum: 1
                                              measure: *ref_384
                                  descriptor:
                                    description: Physical description of the item
                                    allOf:
                                      - *ref_369
                                  creator:
                                    description: The creator of this item
                                    allOf:
                                      - *ref_385
                                  price:
                                    description: >-
                                      The price of this item, if it has
                                      intrinsic value
                                    allOf:
                                      - &ref_389
                                        description: >-
                                          Describes the price of a product or
                                          service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          currency:
                                            type: string
                                          value: *ref_366
                                          estimated_value: *ref_366
                                          computed_value: *ref_366
                                          listed_value: *ref_366
                                          offered_value: *ref_366
                                          minimum_value: *ref_366
                                          maximum_value: *ref_366
                                  quantity:
                                    description: The selling quantity of the item
                                    allOf:
                                      - *ref_386
                                  category_ids:
                                    description: Categories this item can be listed under
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_372
                                  fulfillment_ids:
                                    description: >-
                                      Modes through which this item can be
                                      fulfilled
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_387
                                  location_ids:
                                    description: >-
                                      Provider Locations this item is available
                                      in
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_382
                                  payment_ids:
                                    description: >-
                                      Payment modalities through which this item
                                      can be ordered
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_388
                                  add_ons:
                                    type: array
                                    items: &ref_394
                                      description: >-
                                        Describes an additional item offered as
                                        a value-addition to a product or
                                        service. This does not exist
                                        independently in a catalog and is always
                                        associated with an item.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          description: Provider-defined ID of the add-on
                                          type: string
                                        descriptor: *ref_369
                                        price: *ref_389
                                        quantity: *ref_386
                                  cancellation_terms:
                                    description: Cancellation terms of this item
                                    type: array
                                    items: &ref_397
                                      description: >-
                                        Describes the cancellation terms of an
                                        item or an order. This can be referenced
                                        at an item or order level. Item-level
                                        cancellation terms can override the
                                        terms at the order level.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_390
                                        reason_required:
                                          description: >-
                                            Indicates whether a reason is required
                                            to cancel the order
                                          type: boolean
                                        cancel_by:
                                          description: >-
                                            Information related to the time of
                                            cancellation.
                                          allOf:
                                            - *ref_373
                                        cancellation_fee:
                                          description: A fee applied on a particular entity
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            percentage:
                                              description: Percentage of a value
                                              allOf:
                                                - *ref_366
                                            amount:
                                              description: A fixed value
                                              allOf:
                                                - *ref_389
                                        xinput: &ref_392
                                          description: >-
                                            Contains any additional or extended
                                            inputs required to confirm an order.
                                            This is typically a Form Input.
                                            Sometimes, selection of catalog elements
                                            is not enough for the BPP to confirm an
                                            order. For example, to confirm a flight
                                            ticket, the airline requires details of
                                            the passengers along with information on
                                            baggage, identity, in addition to the
                                            class of ticket. Similarly, a logistics
                                            company may require details on the
                                            nature of shipment in order to confirm
                                            the shipping. A recruiting firm may
                                            require additional details on the
                                            applicant in order to confirm a job
                                            application. For all such purposes, the
                                            BPP can choose to send this object
                                            attached to any object in the catalog
                                            that is required to be sent while
                                            placing the order. This object can
                                            typically be sent at an item level or at
                                            the order level. The item level XInput
                                            will override the Order level XInput as
                                            it indicates a special requirement of
                                            information for that particular item.
                                            Hence the BAP must render a separate
                                            form for the Item and another form at
                                            the Order level before confirmation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            form:
                                              description: Describes a form
                                              type: object
                                              additionalProperties: false
                                              properties:
                                                url:
                                                  description: >-
                                                    The URL from where the form can be
                                                    fetched. The content fetched from the
                                                    url must be processed as per the
                                                    mime_type specified in this object. Once
                                                    fetched, the rendering platform can
                                                    choosed to render the form as-is as an
                                                    embeddable element; or process it
                                                    further to blend with the theme of the
                                                    application. In case the interface is
                                                    non-visual, the the render can process
                                                    the form data and reproduce it as per
                                                    the standard specified in the form.
                                                  type: string
                                                  format: uri
                                                data:
                                                  description: The form submission data
                                                  type: object
                                                  additionalProperties:
                                                    type: string
                                                mime_type:
                                                  description: >-
                                                    This field indicates the nature and
                                                    format of the form received by querying
                                                    the url. MIME types are defined and
                                                    standardized in IETF's RFC 6838.
                                                  type: string
                                                  enum:
                                                    - text/html
                                                    - application/xml
                                                submission_id:
                                                  type: string
                                                  format: uuid
                                            required:
                                              description: >-
                                                Indicates whether the form data is
                                                mandatorily required by the BPP to
                                                confirm the order.
                                              type: boolean
                                        external_ref: *ref_391
                                  refund_terms:
                                    description: Refund terms of this item
                                    type: array
                                    items: &ref_398
                                      description: Refund term of an item or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_379
                                        refund_eligible:
                                          description: >-
                                            Indicates if cancellation will result in
                                            a refund
                                          type: boolean
                                        refund_within:
                                          description: >-
                                            Time within which refund will be
                                            processed after successful cancellation.
                                          allOf:
                                            - *ref_373
                                        refund_amount: *ref_389
                                  replacement_terms:
                                    description: >-
                                      Terms that are applicable be met when this
                                      item is replaced
                                    type: array
                                    items: &ref_399
                                      description: >-
                                        The replacement policy of an item or an
                                        order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_379
                                        replace_within:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to replace
                                            the item before a certain date-time,
                                            failing which they will not be eligible
                                            for replacement
                                          allOf:
                                            - *ref_373
                                        external_ref: *ref_391
                                  return_terms:
                                    description: >-
                                      Terms that are applicable when this item
                                      is returned
                                    type: array
                                    items: &ref_400
                                      description: >-
                                        Describes the return policy of an item
                                        or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term IETF''s applicable.
                                          allOf:
                                            - *ref_379
                                        return_eligible:
                                          description: >-
                                            Indicates whether the item is eligible
                                            for return
                                          type: boolean
                                        return_time:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to return
                                            the item to the origin before a certain
                                            date-time, failing which they will not
                                            be eligible for refund.
                                          allOf:
                                            - *ref_373
                                        return_location:
                                          description: >-
                                            The location where the item or order
                                            must / will be returned to
                                          allOf:
                                            - *ref_381
                                        fulfillment_managed_by:
                                          description: The entity that will perform the return
                                          type: string
                                          enum:
                                            - CONSUMER
                                            - PROVIDER
                                  xinput:
                                    description: >-
                                      Additional input required from the
                                      customer to purchase / avail this item
                                    allOf:
                                      - *ref_392
                                  time:
                                    description: >-
                                      Temporal attributes of this item. This
                                      property is used when the item exists on
                                      the catalog only for a limited period of
                                      time.
                                    allOf:
                                      - *ref_373
                                  rateable:
                                    description: Whether this item can be rated
                                    type: boolean
                                  rating:
                                    description: The rating of the item
                                    allOf:
                                      - *ref_370
                                  matched:
                                    description: >-
                                      Whether this item is an exact match of the
                                      request
                                    type: boolean
                                  related:
                                    description: >-
                                      Whether this item is a related item to the
                                      exactly matched item
                                    type: boolean
                                  recommended:
                                    description: >-
                                      Whether this item is a recommended item to
                                      a response
                                    type: boolean
                                  ttl:
                                    description: >-
                                      Time to live in seconds for an instance of
                                      this schema
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_375
                            exp:
                              type: string
                              description: Time after which catalog has to be refreshed
                              format: date-time
                            rateable:
                              description: Whether this provider can be rated or not
                              type: boolean
                            ttl:
                              description: >-
                                The time-to-live in seconds, for this object.
                                This can be overriden at deeper levels. A value
                                of -1 indicates that this object is not
                                cacheable.
                              type: string
                            tags:
                              type: array
                              items: *ref_375
                    items:
                      description: The items purchased / availed in this order
                      type: array
                      items: *ref_393
                    add_ons:
                      description: The add-ons purchased / availed in this order
                      type: array
                      items: *ref_394
                    offers:
                      description: The offers applied in this order
                      type: array
                      items: *ref_395
                    billing:
                      description: The billing details of this order
                      allOf:
                        - description: >-
                            Describes the billing details of an entity.<br>This
                            has properties like
                            name,organization,address,email,phone,time,tax_number,
                            created_at,updated_at
                          type: object
                          additionalProperties: false
                          properties:
                            name:
                              description: Name of the billable entity
                              type: string
                            organization:
                              description: Details of the organization being billed.
                              allOf:
                                - *ref_385
                            address:
                              description: The address of the billable entity
                              allOf:
                                - *ref_378
                            state:
                              description: >-
                                The state where the billable entity resides.
                                This is important for state-level tax
                                calculation
                              allOf:
                                - *ref_379
                            city:
                              description: The city where the billable entity resides.
                              allOf:
                                - *ref_380
                            email:
                              description: Email address where the bill is sent to
                              type: string
                              format: email
                            phone:
                              description: Phone number of the billable entity
                              type: string
                            time:
                              description: Details regarding the billing period
                              allOf:
                                - *ref_373
                            tax_id:
                              description: >-
                                ID of the billable entity as recognized by the
                                taxation authority
                              type: string
                    fulfillments:
                      description: The fulfillments involved in completing this order
                      type: array
                      items: *ref_396
                    cancellation:
                      description: The cancellation details of this order
                      allOf:
                        - description: Describes a cancellation event
                          type: object
                          additionalProperties: false
                          properties:
                            time:
                              description: >-
                                Date-time when the order was cancelled by the
                                buyer
                              type: string
                              format: date-time
                            cancelled_by:
                              type: string
                              enum:
                                - CONSUMER
                                - PROVIDER
                            reason:
                              description: The reason for cancellation
                              allOf:
                                - description: Describes a selectable option
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    id:
                                      type: string
                                    descriptor: *ref_369
                            additional_description:
                              description: >-
                                Any additional information regarding the nature
                                of cancellation
                              allOf:
                                - *ref_369
                    cancellation_terms:
                      description: Cancellation terms of this item
                      type: array
                      items: *ref_397
                    documents:
                      type: array
                      items:
                        description: Documnents associated to the order
                        type: object
                        additionalProperties: false
                        properties:
                          descriptor: *ref_369
                          mime_type:
                            description: >-
                              This field indicates the nature and format of the
                              form received by querying the url. MIME types are
                              defined and standardized in IETF's RFC 6838.
                            type: string
                            enum:
                              - text/html
                              - application/html
                              - application/xml
                              - application/pdf
                          url:
                            description: >-
                              The URL from where the form can be fetched. The
                              content fetched from the url must be processed as
                              per the mime_type specified in this object.
                            type: string
                            format: uri
                    refund_terms:
                      description: Refund terms of this item
                      type: array
                      items: *ref_398
                    replacement_terms:
                      description: Replacement terms of this item
                      type: array
                      items: *ref_399
                    return_terms:
                      description: Return terms of this item
                      type: array
                      items: *ref_400
                    quote:
                      description: The mutually agreed upon quotation for this order.
                      allOf:
                        - description: >-
                            Describes a quote. It is the estimated price of
                            products or services from the BPP.<br>This has
                            properties like price, breakup, ttl
                          type: object
                          additionalProperties: false
                          properties:
                            id:
                              description: ID of the quote.
                              type: string
                              format: uuid
                            price:
                              description: The total quoted price
                              allOf:
                                - *ref_389
                            breakup:
                              description: the breakup of the total quoted price
                              type: array
                              items:
                                type: object
                                properties:
                                  item: *ref_393
                                  title:
                                    type: string
                                  price: *ref_389
                            ttl: *ref_371
                    payments:
                      description: The terms of settlement for this order
                      type: array
                      items: *ref_401
                    created_at:
                      description: The date-time of creation of this order
                      type: string
                      format: date-time
                    updated_at:
                      description: The date-time of updated of this order
                      type: string
                      format: date-time
                    xinput:
                      description: >-
                        Additional input required from the customer to confirm
                        this order
                      allOf:
                        - *ref_392
                    tags:
                      type: array
                      items: *ref_375
              required:
                - order
            error:
              description: >-
                Describes an error object that is returned by a BAP, BPP or BG
                as a response or callback to an action by another network
                participant. This object is sent when any request received by a
                network participant is unacceptable. This object can be sent
                either during Ack or with the callback.
              type: object
              additionalProperties: false
              properties:
                code:
                  type: string
                  description: >-
                    Standard error code. For full list of error codes, refer to
                    docs/protocol-drafts/BECKN-005-ERROR-CODES-DRAFT-01.md of
                    this repo"
                paths:
                  type: string
                  description: >-
                    Path to json schema generating the error. Used only during
                    json schema validation errors
                message:
                  type: string
                  description: >-
                    Human readable message describing the error. Used mainly for
                    logging. Not recommended to be shown to the user.
          required:
            - context
        status:
          type: object
          properties:
            context:
              allOf:
                - description: >-
                    Every API call in beckn protocol has a context. It provides
                    a high-level overview to the receiver about the nature of
                    the intended transaction. Typically, it is the BAP that sets
                    the transaction context based on the consumer's location and
                    action on their UI. But sometimes, during unsolicited
                    callbacks, the BPP also sets the transaction context but it
                    is usually the same as the context of a previous full-cycle,
                    request-callback interaction between the BAP and the BPP.
                    The context object contains four types of fields.
                    <ol><li>Demographic information about the transaction using
                    fields like `domain`, `country`, and
                    `region`.</li><li>Addressing details like the sending and
                    receiving platform's ID and API
                    URL.</li><li>Interoperability information like the protocol
                    version that implemented by the sender
                    and,</li><li>Transaction details like the method being
                    called at the receiver's endpoint, the transaction_id that
                    represents an end-to-end user session at the BAP, a message
                    ID to pair requests with callbacks, a timestamp to capture
                    sending times, a ttl to specifiy the validity of the
                    request, and a key to encrypt information if
                    necessary.</li></ol> This object must be passed in every
                    interaction between a BAP and a BPP. In HTTP/S
                    implementations, it is not necessary to send the context
                    during the synchronous response. However, in asynchronous
                    protocols, the context must be sent during all interactions,
                  type: object
                  additionalProperties: false
                  properties:
                    domain:
                      description: Domain code that is relevant to this transaction context
                      allOf:
                        - type: string
                          description: >-
                            Standard code representing the domain. The standard
                            is usually published as part of the network policy.
                            Furthermore, the network facilitator should also
                            provide a mechanism to provide the supported domains
                            of a network.
                    location:
                      description: >-
                        The location where the transaction is intended to be
                        fulfilled.
                      allOf:
                        - description: The physical location of something
                          type: object
                          additionalProperties: false
                          properties:
                            id:
                              type: string
                            descriptor:
                              description: Physical description of something.
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  type: string
                                code:
                                  type: string
                                short_desc:
                                  type: string
                                long_desc:
                                  type: string
                                additional_desc:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    content_type:
                                      type: string
                                      enum:
                                        - text/plain
                                        - text/html
                                        - application/json
                                media:
                                  type: array
                                  items:
                                    description: >-
                                      This object contains a url to a media
                                      file.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      mimetype:
                                        description: >-
                                          indicates the nature and format of the
                                          document, file, or assortment of bytes.
                                          MIME types are defined and standardized
                                          in IETF's RFC 6838
                                        type: string
                                      url:
                                        description: The URL of the file
                                        type: string
                                        format: uri
                                      signature:
                                        description: >-
                                          The digital signature of the file signed
                                          by the sender
                                        type: string
                                      dsa:
                                        description: The signing algorithm used by the sender
                                        type: string
                                images:
                                  type: array
                                  items:
                                    description: Describes an image
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      url:
                                        description: >-
                                          URL to the image. This can be a data url
                                          or an remote url
                                        type: string
                                        format: uri
                                      size_type:
                                        description: >-
                                          The size of the image. The network
                                          policy can define the default dimensions
                                          of each type
                                        type: string
                                        enum:
                                          - xs
                                          - sm
                                          - md
                                          - lg
                                          - xl
                                          - custom
                                      width:
                                        description: Width of the image in pixels
                                        type: string
                                      height:
                                        description: Height of the image in pixels
                                        type: string
                            map_url:
                              description: >-
                                The url to the map of the location. This can be
                                a globally recognized map url or the one
                                specified by the network policy.
                              type: string
                              format: uri
                            gps:
                              description: The GPS co-ordinates of this location.
                              allOf:
                                - &ref_402
                                  description: Describes a GPS coordinate
                                  type: string
                                  pattern: >-
                                    ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                            address:
                              description: The address of this location.
                              allOf:
                                - description: Describes a postal address.
                                  type: string
                            city:
                              description: The city this location is, or is located within
                              allOf:
                                - description: Describes a city
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      description: Name of the city
                                      type: string
                                    code:
                                      description: City code
                                      type: string
                            district:
                              description: The state this location is, or is located within
                              type: string
                            state:
                              description: The state this location is, or is located within
                              allOf:
                                - description: >-
                                    A bounded geopolitical region of governance
                                    inside a country.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the state
                                    code:
                                      type: string
                                      description: >-
                                        State code as per country or
                                        international standards
                            country:
                              description: >-
                                The country this location is, or is located
                                within
                              allOf:
                                - description: Describes a country
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the country
                                    code:
                                      type: string
                                      description: >-
                                        Country code as per ISO 3166-1 and ISO
                                        3166-2 format
                            area_code:
                              type: string
                            circle:
                              description: >-
                                Describes a circular region of a specified
                                radius centered at a specified GPS coordinate.
                              type: object
                              additionalProperties: false
                              properties:
                                gps: *ref_402
                                radius:
                                  description: Describes a scalar
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - CONSTANT
                                        - VARIABLE
                                    value: &ref_403
                                      description: >-
                                        Describes a numerical value in decimal
                                        form
                                      type: string
                                      pattern: '[+-]?([0-9]*[.])?[0-9]+'
                                    estimated_value: *ref_403
                                    computed_value: *ref_403
                                    range:
                                      type: object
                                      properties:
                                        min: *ref_403
                                        max: *ref_403
                                    unit:
                                      type: string
                            polygon:
                              description: The boundary polygon of this location
                              type: string
                            3dspace:
                              description: >-
                                The three dimensional region describing this
                                location
                              type: string
                            rating:
                              description: The rating of this location
                              allOf:
                                - description: >-
                                    Rating value given to the object. This can
                                    be a single value or can also contain an
                                    inequality operator like gt, gte, lt, lte.
                                    This can also contain an inequality
                                    expression containing logical operators like
                                    && and ||.
                                  type: string
                    action:
                      description: >-
                        The Beckn protocol method being called by the sender and
                        executed at the receiver.
                      type: string
                    version:
                      type: string
                      description: >-
                        Version of transaction protocol being used by the
                        sender.
                    bap_id:
                      description: Subscriber ID of the BAP
                      allOf:
                        - &ref_404
                          description: >-
                            A globally unique identifier of the platform,
                            Typically it is the fully qualified domain name
                            (FQDN) of the platform.
                          type: string
                    bap_uri:
                      description: >-
                        Subscriber URL of the BAP for accepting callbacks from
                        BPPs.
                      allOf:
                        - &ref_405
                          description: >-
                            The callback URL of the Subscriber. This should
                            necessarily contain the same domain name as set in
                            `subscriber_id``.
                          type: string
                          format: uri
                    bpp_id:
                      description: Subscriber ID of the BPP
                      allOf:
                        - *ref_404
                    bpp_uri:
                      description: Subscriber URL of the BPP for accepting calls from BAPs.
                      allOf:
                        - *ref_405
                    transaction_id:
                      description: >-
                        This is a unique value which persists across all API
                        calls from `search` through `confirm`. This is done to
                        indicate an active user session across multiple
                        requests. The BPPs can use this value to push
                        personalized recommendations, and dynamic offerings
                        related to an ongoing transaction despite being unaware
                        of the user active on the BAP.
                      type: string
                      format: uuid
                    message_id:
                      description: >-
                        This is a unique value which persists during a request /
                        callback cycle. Since beckn protocol APIs are
                        asynchronous, BAPs need a common value to match an
                        incoming callback from a BPP to an earlier call. This
                        value can also be used to ignore duplicate messages
                        coming from the BPP. It is recommended to generate a
                        fresh message_id for every new interaction. When sending
                        unsolicited callbacks, BPPs must generate a new
                        message_id.
                      type: string
                      format: uuid
                    timestamp:
                      description: Time of request generation in RFC3339 format
                      type: string
                      format: date-time
                    key:
                      description: The encryption public key of the sender
                      type: string
                    ttl:
                      description: >-
                        The duration in ISO8601 format after timestamp for which
                        this message holds valid
                      type: string
                - type: object
                  properties:
                    action:
                      enum:
                        - status
                  required:
                    - action
            message:
              type: object
              properties:
                order_id:
                  type: string
                  description: >-
                    Human-readable ID of the order. This is generated at the BPP
                    layer. The BPP can either generate order id within its
                    system or forward the order ID created at the provider
                    level.
              required:
                - order_id
          required:
            - context
            - message
        on_status:
          type: object
          properties:
            context:
              allOf:
                - description: >-
                    Every API call in beckn protocol has a context. It provides
                    a high-level overview to the receiver about the nature of
                    the intended transaction. Typically, it is the BAP that sets
                    the transaction context based on the consumer's location and
                    action on their UI. But sometimes, during unsolicited
                    callbacks, the BPP also sets the transaction context but it
                    is usually the same as the context of a previous full-cycle,
                    request-callback interaction between the BAP and the BPP.
                    The context object contains four types of fields.
                    <ol><li>Demographic information about the transaction using
                    fields like `domain`, `country`, and
                    `region`.</li><li>Addressing details like the sending and
                    receiving platform's ID and API
                    URL.</li><li>Interoperability information like the protocol
                    version that implemented by the sender
                    and,</li><li>Transaction details like the method being
                    called at the receiver's endpoint, the transaction_id that
                    represents an end-to-end user session at the BAP, a message
                    ID to pair requests with callbacks, a timestamp to capture
                    sending times, a ttl to specifiy the validity of the
                    request, and a key to encrypt information if
                    necessary.</li></ol> This object must be passed in every
                    interaction between a BAP and a BPP. In HTTP/S
                    implementations, it is not necessary to send the context
                    during the synchronous response. However, in asynchronous
                    protocols, the context must be sent during all interactions,
                  type: object
                  additionalProperties: false
                  properties:
                    domain:
                      description: Domain code that is relevant to this transaction context
                      allOf:
                        - type: string
                          description: >-
                            Standard code representing the domain. The standard
                            is usually published as part of the network policy.
                            Furthermore, the network facilitator should also
                            provide a mechanism to provide the supported domains
                            of a network.
                    location:
                      description: >-
                        The location where the transaction is intended to be
                        fulfilled.
                      allOf:
                        - &ref_422
                          description: The physical location of something
                          type: object
                          additionalProperties: false
                          properties:
                            id: &ref_423
                              type: string
                            descriptor: &ref_410
                              description: Physical description of something.
                              type: object
                              additionalProperties: false
                              properties:
                                name:
                                  type: string
                                code:
                                  type: string
                                short_desc:
                                  type: string
                                long_desc:
                                  type: string
                                additional_desc:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                    content_type:
                                      type: string
                                      enum:
                                        - text/plain
                                        - text/html
                                        - application/json
                                media:
                                  type: array
                                  items: &ref_432
                                    description: >-
                                      This object contains a url to a media
                                      file.
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      mimetype:
                                        description: >-
                                          indicates the nature and format of the
                                          document, file, or assortment of bytes.
                                          MIME types are defined and standardized
                                          in IETF's RFC 6838
                                        type: string
                                      url:
                                        description: The URL of the file
                                        type: string
                                        format: uri
                                      signature:
                                        description: >-
                                          The digital signature of the file signed
                                          by the sender
                                        type: string
                                      dsa:
                                        description: The signing algorithm used by the sender
                                        type: string
                                images:
                                  type: array
                                  items: &ref_415
                                    description: Describes an image
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      url:
                                        description: >-
                                          URL to the image. This can be a data url
                                          or an remote url
                                        type: string
                                        format: uri
                                      size_type:
                                        description: >-
                                          The size of the image. The network
                                          policy can define the default dimensions
                                          of each type
                                        type: string
                                        enum:
                                          - xs
                                          - sm
                                          - md
                                          - lg
                                          - xl
                                          - custom
                                      width:
                                        description: Width of the image in pixels
                                        type: string
                                      height:
                                        description: Height of the image in pixels
                                        type: string
                            map_url:
                              description: >-
                                The url to the map of the location. This can be
                                a globally recognized map url or the one
                                specified by the network policy.
                              type: string
                              format: uri
                            gps:
                              description: The GPS co-ordinates of this location.
                              allOf:
                                - &ref_406
                                  description: Describes a GPS coordinate
                                  type: string
                                  pattern: >-
                                    ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                            address:
                              description: The address of this location.
                              allOf:
                                - &ref_419
                                  description: Describes a postal address.
                                  type: string
                            city:
                              description: The city this location is, or is located within
                              allOf:
                                - &ref_421
                                  description: Describes a city
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      description: Name of the city
                                      type: string
                                    code:
                                      description: City code
                                      type: string
                            district:
                              description: The state this location is, or is located within
                              type: string
                            state:
                              description: The state this location is, or is located within
                              allOf:
                                - &ref_420
                                  description: >-
                                    A bounded geopolitical region of governance
                                    inside a country.
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the state
                                    code:
                                      type: string
                                      description: >-
                                        State code as per country or
                                        international standards
                            country:
                              description: >-
                                The country this location is, or is located
                                within
                              allOf:
                                - description: Describes a country
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    name:
                                      type: string
                                      description: Name of the country
                                    code:
                                      type: string
                                      description: >-
                                        Country code as per ISO 3166-1 and ISO
                                        3166-2 format
                            area_code:
                              type: string
                            circle:
                              description: >-
                                Describes a circular region of a specified
                                radius centered at a specified GPS coordinate.
                              type: object
                              additionalProperties: false
                              properties:
                                gps: *ref_406
                                radius: &ref_425
                                  description: Describes a scalar
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    type:
                                      type: string
                                      enum:
                                        - CONSTANT
                                        - VARIABLE
                                    value: &ref_407
                                      description: >-
                                        Describes a numerical value in decimal
                                        form
                                      type: string
                                      pattern: '[+-]?([0-9]*[.])?[0-9]+'
                                    estimated_value: *ref_407
                                    computed_value: *ref_407
                                    range:
                                      type: object
                                      properties:
                                        min: *ref_407
                                        max: *ref_407
                                    unit:
                                      type: string
                            polygon:
                              description: The boundary polygon of this location
                              type: string
                            3dspace:
                              description: >-
                                The three dimensional region describing this
                                location
                              type: string
                            rating:
                              description: The rating of this location
                              allOf:
                                - &ref_411
                                  description: >-
                                    Rating value given to the object. This can
                                    be a single value or can also contain an
                                    inequality operator like gt, gte, lt, lte.
                                    This can also contain an inequality
                                    expression containing logical operators like
                                    && and ||.
                                  type: string
                    action:
                      description: >-
                        The Beckn protocol method being called by the sender and
                        executed at the receiver.
                      type: string
                    version:
                      type: string
                      description: >-
                        Version of transaction protocol being used by the
                        sender.
                    bap_id:
                      description: Subscriber ID of the BAP
                      allOf:
                        - &ref_408
                          description: >-
                            A globally unique identifier of the platform,
                            Typically it is the fully qualified domain name
                            (FQDN) of the platform.
                          type: string
                    bap_uri:
                      description: >-
                        Subscriber URL of the BAP for accepting callbacks from
                        BPPs.
                      allOf:
                        - &ref_409
                          description: >-
                            The callback URL of the Subscriber. This should
                            necessarily contain the same domain name as set in
                            `subscriber_id``.
                          type: string
                          format: uri
                    bpp_id:
                      description: Subscriber ID of the BPP
                      allOf:
                        - *ref_408
                    bpp_uri:
                      description: Subscriber URL of the BPP for accepting calls from BAPs.
                      allOf:
                        - *ref_409
                    transaction_id:
                      description: >-
                        This is a unique value which persists across all API
                        calls from `search` through `confirm`. This is done to
                        indicate an active user session across multiple
                        requests. The BPPs can use this value to push
                        personalized recommendations, and dynamic offerings
                        related to an ongoing transaction despite being unaware
                        of the user active on the BAP.
                      type: string
                      format: uuid
                    message_id:
                      description: >-
                        This is a unique value which persists during a request /
                        callback cycle. Since beckn protocol APIs are
                        asynchronous, BAPs need a common value to match an
                        incoming callback from a BPP to an earlier call. This
                        value can also be used to ignore duplicate messages
                        coming from the BPP. It is recommended to generate a
                        fresh message_id for every new interaction. When sending
                        unsolicited callbacks, BPPs must generate a new
                        message_id.
                      type: string
                      format: uuid
                    timestamp:
                      description: Time of request generation in RFC3339 format
                      type: string
                      format: date-time
                    key:
                      description: The encryption public key of the sender
                      type: string
                    ttl:
                      description: >-
                        The duration in ISO8601 format after timestamp for which
                        this message holds valid
                      type: string
                - type: object
                  properties:
                    action:
                      enum:
                        - on_status
                  required:
                    - action
            message:
              type: object
              properties:
                order:
                  description: >-
                    Describes a legal purchase order. It contains the complete
                    details of the legal contract created between the buyer and
                    the seller.
                  type: object
                  additionalProperties: false
                  properties:
                    id:
                      type: string
                      description: >-
                        Human-readable ID of the order. This is generated at the
                        BPP layer. The BPP can either generate order id within
                        its system or forward the order ID created at the
                        provider level.
                    ref_order_ids:
                      description: >-
                        A list of order IDs to link this order to previous
                        orders.
                      type: array
                      items:
                        type: string
                        description: ID of a previous order
                    status:
                      description: >-
                        Status of the order. Allowed values can be defined by
                        the network policy
                      type: string
                    type:
                      description: >-
                        This is used to indicate the type of order being created
                        to BPPs. Sometimes orders can be linked to previous
                        orders, like a replacement order in a retail domain. A
                        follow-up consultation in healthcare domain. A single
                        order part of a subscription order. The list of order
                        types can be standardized at the network level.
                      type: string
                      default: DEFAULT
                      enum:
                        - DRAFT
                        - DEFAULT
                    provider:
                      description: >-
                        Details of the provider whose catalog items have been
                        selected.
                      allOf:
                        - description: Describes the catalog of a business.
                          type: object
                          properties:
                            id:
                              type: string
                              description: Id of the provider
                            descriptor: *ref_410
                            category_id:
                              type: string
                              description: >-
                                Category Id of the provider at the BPP-level
                                catalog
                            rating: *ref_411
                            time: &ref_414
                              description: >-
                                Describes time in its various forms. It can be a
                                single point in time; duration; or a structured
                                timetable of operations<br>This has properties
                                like label, time stamp,duration,range, days,
                                schedule
                              type: object
                              additionalProperties: false
                              properties:
                                label:
                                  type: string
                                timestamp:
                                  type: string
                                  format: date-time
                                duration: &ref_412
                                  description: Describes duration as per ISO8601 format
                                  type: string
                                range:
                                  type: object
                                  properties:
                                    start:
                                      type: string
                                      format: date-time
                                    end:
                                      type: string
                                      format: date-time
                                days:
                                  type: string
                                  description: >-
                                    comma separated values representing days of
                                    the week
                                schedule:
                                  description: >-
                                    Describes schedule as a repeating time
                                    period used to describe a regularly
                                    recurring event. At a minimum a schedule
                                    will specify frequency which describes the
                                    interval between occurrences of the event.
                                    Additional information can be provided to
                                    specify the schedule more precisely. This
                                    includes identifying the timestamps(s) of
                                    when the event will take place. Schedules
                                    may also have holidays to exclude a specific
                                    day from the schedule.<br>This has
                                    properties like frequency, holidays, times
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    frequency: *ref_412
                                    holidays:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                                    times:
                                      type: array
                                      items:
                                        type: string
                                        format: date-time
                            categories:
                              type: array
                              items:
                                description: >-
                                  A label under which a collection of items can
                                  be grouped.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_413
                                    description: ID of the category
                                    type: string
                                  parent_category_id: *ref_413
                                  descriptor: *ref_410
                                  time: *ref_414
                                  ttl:
                                    description: >-
                                      Time to live for an instance of this
                                      schema
                                  tags:
                                    type: array
                                    items: &ref_416
                                      description: >-
                                        A collection of tag objects with group
                                        level attributes. For detailed
                                        documentation on the Tags and Tag Groups
                                        schema go to
                                        https://github.com/beckn/protocol-specifications/discussions/316
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        display:
                                          description: >-
                                            Indicates the display properties of the
                                            tag group. If display is set to false,
                                            then the group will not be displayed. If
                                            it is set to true, it should be
                                            displayed. However, group-level display
                                            properties can be overriden by
                                            individual tag-level display property.
                                            As this schema is purely for catalog
                                            display purposes, it is not recommended
                                            to send this value during search.
                                          type: boolean
                                          default: true
                                        descriptor:
                                          description: >-
                                            Description of the TagGroup, can be used
                                            to store detailed information.
                                          allOf:
                                            - *ref_410
                                        list:
                                          description: >-
                                            An array of Tag objects listed under
                                            this group. This property can be set by
                                            BAPs during search to narrow the
                                            `search` and achieve more relevant
                                            results. When received during
                                            `on_search`, BAPs must render this list
                                            under the heading described by the
                                            `name` property of this schema.
                                          type: array
                                          items:
                                            description: >-
                                              Describes a tag. This is used to contain
                                              extended metadata. This object can be
                                              added as a property to any schema to
                                              describe extended attributes. For BAPs,
                                              tags can be sent during search to
                                              optimize and filter search results. BPPs
                                              can use tags to index their catalog to
                                              allow better search functionality. Tags
                                              are sent by the BPP as part of the
                                              catalog response in the `on_search`
                                              callback. Tags are also meant for
                                              display purposes. Upon receiving a tag,
                                              BAPs are meant to render them as
                                              name-value pairs. This is particularly
                                              useful when rendering tabular
                                              information about a product or service.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor:
                                                description: >-
                                                  Description of the Tag, can be used to
                                                  store detailed information.
                                                allOf:
                                                  - *ref_410
                                              value:
                                                description: >-
                                                  The value of the tag. This set by the
                                                  BPP and rendered as-is by the BAP.
                                                type: string
                                              display:
                                                description: >-
                                                  This value indicates if the tag is
                                                  intended for display purposes. If set to
                                                  `true`, then this tag must be displayed.
                                                  If it is set to `false`, it should not
                                                  be displayed. This value can override
                                                  the group display value.
                                                type: boolean
                            fulfillments:
                              type: array
                              items: &ref_437
                                description: >-
                                  Describes how a an order will be
                                  rendered/fulfilled to the end-customer
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_428
                                    description: >-
                                      Unique reference ID to the fulfillment of
                                      an order
                                    type: string
                                  type:
                                    description: >-
                                      A code that describes the mode of
                                      fulfillment. This is typically set when
                                      there are multiple ways an order can be
                                      fulfilled. For example, a retail order can
                                      be fulfilled either via store pickup or a
                                      home delivery. Similarly, a medical
                                      consultation can be provided either
                                      in-person or via tele-consultation. The
                                      network policy must publish standard
                                      fulfillment type codes for the different
                                      modes of fulfillment.
                                    type: string
                                  rateable:
                                    description: >-
                                      Whether the fulfillment can be rated or
                                      not
                                    type: boolean
                                  rating:
                                    description: >-
                                      The rating value of the fulfullment
                                      service.
                                    allOf:
                                      - *ref_411
                                  state:
                                    description: >-
                                      The current state of fulfillment. The BPP
                                      must set this value whenever the state of
                                      the order fulfillment changes and fire an
                                      unsolicited `on_status` call.
                                    allOf:
                                      - &ref_431
                                        description: Describes the state of fulfillment
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          descriptor: *ref_410
                                          updated_at:
                                            type: string
                                            format: date-time
                                          updated_by:
                                            type: string
                                            description: ID of entity which changed the state
                                  tracking:
                                    type: boolean
                                    description: >-
                                      Indicates whether the fulfillment allows
                                      tracking
                                    default: false
                                  customer:
                                    description: >-
                                      The person that will ultimately receive
                                      the order
                                    allOf:
                                      - description: >-
                                          Describes a customer buying/availing a
                                          product or a service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: &ref_417
                                            description: Describes a person as any individual
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              id:
                                                type: string
                                                description: Describes the identity of the person
                                              url:
                                                description: Profile url of the person
                                                type: string
                                                format: uri
                                              name:
                                                description: the name of the person
                                                type: string
                                              image: *ref_415
                                              age:
                                                description: Age of the person
                                                allOf:
                                                  - *ref_412
                                              dob:
                                                description: Date of birth of the person
                                                type: string
                                                format: date
                                              gender:
                                                type: string
                                                description: >-
                                                  Gender of something, typically a Person,
                                                  but possibly also fictional characters,
                                                  animals, etc. While Male and Female may
                                                  be used, text strings are also
                                                  acceptable for people who do not
                                                  identify as a binary gender.Allowed
                                                  values for this field can be published
                                                  in the network policy
                                              creds:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a credential of an entity -
                                                    Person or Organization
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    id:
                                                      type: string
                                                    type:
                                                      type: string
                                                      default: VerifiableCredential
                                                    url:
                                                      description: URL of the credential
                                                      type: string
                                                      format: uri
                                              languages:
                                                type: array
                                                items:
                                                  description: >-
                                                    Describes a language known to the
                                                    person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              skills:
                                                type: array
                                                items:
                                                  description: Describes a skill of the person.
                                                  type: object
                                                  additionalProperties: false
                                                  properties:
                                                    code:
                                                      type: string
                                                    name:
                                                      type: string
                                              tags:
                                                type: array
                                                items: *ref_416
                                          contact: &ref_418
                                            description: >-
                                              Describes the contact information of an
                                              entity
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              phone:
                                                type: string
                                              email:
                                                type: string
                                              jcard:
                                                type: object
                                                description: >-
                                                  A Jcard object as per
                                                  draft-ietf-jcardcal-jcard-03
                                                  specification
                                  agent:
                                    description: >-
                                      The agent that is currently handling the
                                      fulfillment of the order
                                    allOf:
                                      - description: >-
                                          Describes the direct performer, driver
                                          or executor that fulfills an order. It
                                          is usually a person. But in some rare
                                          cases, it could be a non-living entity
                                          like a drone, or a bot. Some examples of
                                          agents are Doctor in the healthcare
                                          sector, a driver in the mobility sector,
                                          or a delivery person in the logistics
                                          sector. This object can be set at any
                                          stage of the order lifecycle. This can
                                          be set at the discovery stage when the
                                          BPP wants to provide details on the
                                          agent fulfilling the order, like in
                                          healthcare, where the doctor's name
                                          appears during search. This object can
                                          also used to search for a particular
                                          person that the customer wants
                                          fulfilling an order. Sometimes, this
                                          object gets instantiated after the order
                                          is confirmed, like in the case of
                                          on-demand taxis, where the driver is
                                          assigned after the user confirms the
                                          ride.
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          person: *ref_417
                                          contact: *ref_418
                                          organization: &ref_426
                                            description: >-
                                              An organization. Usually a recognized
                                              business entity.
                                            type: object
                                            additionalProperties: false
                                            properties:
                                              descriptor: *ref_410
                                              address:
                                                description: The postal address of the organization
                                                allOf:
                                                  - *ref_419
                                              state:
                                                description: >-
                                                  The state where the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_420
                                              city:
                                                description: >-
                                                  The city where the the organization's
                                                  address is registered
                                                allOf:
                                                  - *ref_421
                                              contact: *ref_418
                                          rating: *ref_411
                                  contact: *ref_418
                                  vehicle:
                                    description: >-
                                      Describes a vehicle is a device that is
                                      designed or used to transport people or
                                      cargo over land, water, air, or through
                                      space.<br>This has properties like
                                      category, capacity, make, model,
                                      size,variant,color,energy_type,registration
                                    type: object
                                    additionalProperties: false
                                    properties:
                                      category:
                                        type: string
                                      capacity:
                                        type: integer
                                      make:
                                        type: string
                                      model:
                                        type: string
                                      size:
                                        type: string
                                      variant:
                                        type: string
                                      color:
                                        type: string
                                      energy_type:
                                        type: string
                                      registration:
                                        type: string
                                      wheels_count:
                                        type: string
                                      cargo_volumne:
                                        type: string
                                      wheelchair_access:
                                        type: string
                                      code:
                                        type: string
                                      emission_standard:
                                        type: string
                                  stops:
                                    description: >-
                                      The list of logical stops encountered
                                      during the fulfillment of an order.
                                    type: array
                                    items:
                                      description: >-
                                        A logical point in space and time during
                                        the fulfillment of an order.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          type: string
                                        parent_stop_id:
                                          type: string
                                        location:
                                          description: Location of the stop
                                          allOf:
                                            - *ref_422
                                        type:
                                          description: >-
                                            The type of stop. Allowed values of this
                                            property can be defined by the network
                                            policy.
                                          type: string
                                        time:
                                          description: Timings applicable at the stop.
                                          allOf:
                                            - *ref_414
                                        instructions:
                                          description: >-
                                            Instructions that need to be followed at
                                            the stop
                                          allOf:
                                            - *ref_410
                                        contact:
                                          description: Contact details of the stop
                                          allOf:
                                            - *ref_418
                                        person:
                                          description: >-
                                            The details of the person present at the
                                            stop
                                          allOf:
                                            - *ref_417
                                        authorization:
                                          description: >-
                                            Describes an authorization mechanism
                                            used to start or end the fulfillment of
                                            an order. For example, in the mobility
                                            sector, the driver may require a
                                            one-time password to initiate the ride.
                                            In the healthcare sector, a patient may
                                            need to provide a password to open a
                                            video conference link during a
                                            teleconsultation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            type:
                                              description: >-
                                                Type of authorization mechanism used.
                                                The allowed values for this field can be
                                                published as part of the network policy.
                                              type: string
                                            token:
                                              description: >-
                                                Token used for authorization. This is
                                                typically generated at the BPP. The BAP
                                                can send this value to the user via any
                                                channel that it uses to authenticate the
                                                user like SMS, Email, Push notification,
                                                or in-app rendering.
                                              type: string
                                            valid_from:
                                              description: >-
                                                Timestamp in RFC3339 format from which
                                                token is valid
                                              type: string
                                              format: date-time
                                            valid_to:
                                              description: >-
                                                Timestamp in RFC3339 format until which
                                                token is valid
                                              type: string
                                              format: date-time
                                            status:
                                              description: Status of the token
                                              type: string
                                  path:
                                    description: >-
                                      The physical path taken by the agent that
                                      can be rendered on a map. The allowed
                                      format of this property can be set by the
                                      network.
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_416
                            payments:
                              type: array
                              items: &ref_442
                                description: >-
                                  Describes the terms of settlement between the
                                  BAP and the BPP for a single transaction. When
                                  instantiated, this object contains <ol><li>the
                                  amount that has to be settled,</li><li>The
                                  payment destination destination
                                  details</li><li>When the settlement should
                                  happen, and</li><li>A transaction reference
                                  ID</li></ol>. During a transaction, the BPP
                                  reserves the right to decide the terms of
                                  payment. However, the BAP can send its terms
                                  to the BPP first. If the BPP does not agree to
                                  those terms, it must overwrite the terms and
                                  return them to the BAP. If overridden, the BAP
                                  must either agree to the terms sent by the BPP
                                  in order to preserve the provider's autonomy,
                                  or abort the transaction. In case of such
                                  disagreements, the BAP and the BPP can perform
                                  offline negotiations on the payment terms.
                                  Once an agreement is reached, the BAP and BPP
                                  can resume transactions.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: &ref_429
                                    description: >-
                                      ID of the payment term that can be
                                      referred at an item or an order level in a
                                      catalog
                                    type: string
                                  collected_by:
                                    description: >-
                                      This field indicates who is the collector
                                      of payment. The BAP can set this value to
                                      'bap' if it wants to collect the payment
                                      first and  settle it to the BPP. If the
                                      BPP agrees to those terms, the BPP should
                                      not send the payment url. Alternatively,
                                      the BPP can set this field with the value
                                      'bpp' if it wants the payment to be made
                                      directly.
                                    type: string
                                  url:
                                    type: string
                                    description: >-
                                      A payment url to be called by the BAP. If
                                      empty, then the payment is to be done
                                      offline. The details of payment should be
                                      present in the params object. If tl_method
                                      = http/get, then the payment details will
                                      be sent as url params. Two url param
                                      values, ```$transaction_id``` and
                                      ```$amount``` are mandatory.
                                    format: uri
                                  tl_method:
                                    type: string
                                  params:
                                    type: object
                                    properties:
                                      transaction_id:
                                        type: string
                                        description: >-
                                          The reference transaction ID associated
                                          with a payment activity
                                      amount:
                                        type: string
                                      currency:
                                        type: string
                                      bank_code:
                                        type: string
                                      bank_account_number:
                                        type: string
                                      virtual_payment_address:
                                        type: string
                                      source_bank_code:
                                        type: string
                                      source_bank_account_number:
                                        type: string
                                      source_virtual_payment_address:
                                        type: string
                                  type:
                                    type: string
                                    enum:
                                      - PRE-ORDER
                                      - PRE-FULFILLMENT
                                      - ON-FULFILLMENT
                                      - POST-FULFILLMENT
                                      - ON-ORDER
                                  status:
                                    type: string
                                    enum:
                                      - PAID
                                      - NOT-PAID
                                  time: *ref_414
                                  tags:
                                    type: array
                                    items: *ref_416
                            locations:
                              type: array
                              items: *ref_422
                            offers:
                              type: array
                              items: &ref_436
                                description: >-
                                  An offer associated with a catalog. This is
                                  typically used to promote a particular product
                                  and enable more purchases.
                                type: object
                                additionalProperties: false
                                properties:
                                  id:
                                    type: string
                                  descriptor: *ref_410
                                  location_ids:
                                    type: array
                                    items: *ref_423
                                  category_ids:
                                    type: array
                                    items: *ref_413
                                  item_ids:
                                    type: array
                                    items: &ref_424
                                      description: ID of the item.
                                      type: string
                                  time: *ref_414
                                  tags:
                                    type: array
                                    items: *ref_416
                            items:
                              type: array
                              items: &ref_434
                                description: >-
                                  Describes a product or a service offered to
                                  the end consumer by the provider. In the
                                  mobility sector, it can represent a fare
                                  product like one way journey. In the logistics
                                  sector, it can represent the delivery service
                                  offering. In the retail domain it can
                                  represent a product like a grocery item.
                                type: object
                                additionalProperties: false
                                properties:
                                  id: *ref_424
                                  parent_item_id:
                                    description: ID of the item, this item is a variant of
                                    allOf:
                                      - *ref_424
                                  parent_item_quantity:
                                    description: >-
                                      The number of units of the parent item
                                      this item is a multiple of
                                    allOf:
                                      - &ref_427
                                        description: Describes the count or amount of an item
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          allocated:
                                            description: >-
                                              This represents the exact quantity
                                              allocated for purchase of the item.
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_425
                                          available:
                                            description: >-
                                              This represents the exact quantity
                                              available for purchase of the item. The
                                              buyer can only purchase multiples of
                                              this
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_425
                                          maximum:
                                            description: >-
                                              This represents the maximum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                              measure: *ref_425
                                          minimum:
                                            description: >-
                                              This represents the minimum quantity
                                              allowed for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_425
                                          selected:
                                            description: >-
                                              This represents the quantity selected
                                              for purchase of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 0
                                              measure: *ref_425
                                          unitized:
                                            description: >-
                                              This represents the quantity available
                                              in a single unit of the item
                                            type: object
                                            properties:
                                              count:
                                                type: integer
                                                minimum: 1
                                                maximum: 1
                                              measure: *ref_425
                                  descriptor:
                                    description: Physical description of the item
                                    allOf:
                                      - *ref_410
                                  creator:
                                    description: The creator of this item
                                    allOf:
                                      - *ref_426
                                  price:
                                    description: >-
                                      The price of this item, if it has
                                      intrinsic value
                                    allOf:
                                      - &ref_430
                                        description: >-
                                          Describes the price of a product or
                                          service
                                        type: object
                                        additionalProperties: false
                                        properties:
                                          currency:
                                            type: string
                                          value: *ref_407
                                          estimated_value: *ref_407
                                          computed_value: *ref_407
                                          listed_value: *ref_407
                                          offered_value: *ref_407
                                          minimum_value: *ref_407
                                          maximum_value: *ref_407
                                  quantity:
                                    description: The selling quantity of the item
                                    allOf:
                                      - *ref_427
                                  category_ids:
                                    description: Categories this item can be listed under
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_413
                                  fulfillment_ids:
                                    description: >-
                                      Modes through which this item can be
                                      fulfilled
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_428
                                  location_ids:
                                    description: >-
                                      Provider Locations this item is available
                                      in
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_423
                                  payment_ids:
                                    description: >-
                                      Payment modalities through which this item
                                      can be ordered
                                    type: array
                                    items:
                                      allOf:
                                        - *ref_429
                                  add_ons:
                                    type: array
                                    items: &ref_435
                                      description: >-
                                        Describes an additional item offered as
                                        a value-addition to a product or
                                        service. This does not exist
                                        independently in a catalog and is always
                                        associated with an item.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        id:
                                          description: Provider-defined ID of the add-on
                                          type: string
                                        descriptor: *ref_410
                                        price: *ref_430
                                        quantity: *ref_427
                                  cancellation_terms:
                                    description: Cancellation terms of this item
                                    type: array
                                    items: &ref_438
                                      description: >-
                                        Describes the cancellation terms of an
                                        item or an order. This can be referenced
                                        at an item or order level. Item-level
                                        cancellation terms can override the
                                        terms at the order level.
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_431
                                        reason_required:
                                          description: >-
                                            Indicates whether a reason is required
                                            to cancel the order
                                          type: boolean
                                        cancel_by:
                                          description: >-
                                            Information related to the time of
                                            cancellation.
                                          allOf:
                                            - *ref_414
                                        cancellation_fee:
                                          description: A fee applied on a particular entity
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            percentage:
                                              description: Percentage of a value
                                              allOf:
                                                - *ref_407
                                            amount:
                                              description: A fixed value
                                              allOf:
                                                - *ref_430
                                        xinput: &ref_433
                                          description: >-
                                            Contains any additional or extended
                                            inputs required to confirm an order.
                                            This is typically a Form Input.
                                            Sometimes, selection of catalog elements
                                            is not enough for the BPP to confirm an
                                            order. For example, to confirm a flight
                                            ticket, the airline requires details of
                                            the passengers along with information on
                                            baggage, identity, in addition to the
                                            class of ticket. Similarly, a logistics
                                            company may require details on the
                                            nature of shipment in order to confirm
                                            the shipping. A recruiting firm may
                                            require additional details on the
                                            applicant in order to confirm a job
                                            application. For all such purposes, the
                                            BPP can choose to send this object
                                            attached to any object in the catalog
                                            that is required to be sent while
                                            placing the order. This object can
                                            typically be sent at an item level or at
                                            the order level. The item level XInput
                                            will override the Order level XInput as
                                            it indicates a special requirement of
                                            information for that particular item.
                                            Hence the BAP must render a separate
                                            form for the Item and another form at
                                            the Order level before confirmation.
                                          type: object
                                          additionalProperties: false
                                          properties:
                                            form:
                                              description: Describes a form
                                              type: object
                                              additionalProperties: false
                                              properties:
                                                url:
                                                  description: >-
                                                    The URL from where the form can be
                                                    fetched. The content fetched from the
                                                    url must be processed as per the
                                                    mime_type specified in this object. Once
                                                    fetched, the rendering platform can
                                                    choosed to render the form as-is as an
                                                    embeddable element; or process it
                                                    further to blend with the theme of the
                                                    application. In case the interface is
                                                    non-visual, the the render can process
                                                    the form data and reproduce it as per
                                                    the standard specified in the form.
                                                  type: string
                                                  format: uri
                                                data:
                                                  description: The form submission data
                                                  type: object
                                                  additionalProperties:
                                                    type: string
                                                mime_type:
                                                  description: >-
                                                    This field indicates the nature and
                                                    format of the form received by querying
                                                    the url. MIME types are defined and
                                                    standardized in IETF's RFC 6838.
                                                  type: string
                                                  enum:
                                                    - text/html
                                                    - application/xml
                                                submission_id:
                                                  type: string
                                                  format: uuid
                                            required:
                                              description: >-
                                                Indicates whether the form data is
                                                mandatorily required by the BPP to
                                                confirm the order.
                                              type: boolean
                                        external_ref: *ref_432
                                  refund_terms:
                                    description: Refund terms of this item
                                    type: array
                                    items: &ref_439
                                      description: Refund term of an item or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_420
                                        refund_eligible:
                                          description: >-
                                            Indicates if cancellation will result in
                                            a refund
                                          type: boolean
                                        refund_within:
                                          description: >-
                                            Time within which refund will be
                                            processed after successful cancellation.
                                          allOf:
                                            - *ref_414
                                        refund_amount: *ref_430
                                  replacement_terms:
                                    description: >-
                                      Terms that are applicable be met when this
                                      item is replaced
                                    type: array
                                    items: &ref_440
                                      description: >-
                                        The replacement policy of an item or an
                                        order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term is applicable.
                                          allOf:
                                            - *ref_420
                                        replace_within:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to replace
                                            the item before a certain date-time,
                                            failing which they will not be eligible
                                            for replacement
                                          allOf:
                                            - *ref_414
                                        external_ref: *ref_432
                                  return_terms:
                                    description: >-
                                      Terms that are applicable when this item
                                      is returned
                                    type: array
                                    items: &ref_441
                                      description: >-
                                        Describes the return policy of an item
                                        or an order
                                      type: object
                                      additionalProperties: false
                                      properties:
                                        fulfillment_state:
                                          description: >-
                                            The state of fulfillment during which
                                            this term IETF''s applicable.
                                          allOf:
                                            - *ref_420
                                        return_eligible:
                                          description: >-
                                            Indicates whether the item is eligible
                                            for return
                                          type: boolean
                                        return_time:
                                          description: >-
                                            Applicable only for buyer managed
                                            returns where the buyer has to return
                                            the item to the origin before a certain
                                            date-time, failing which they will not
                                            be eligible for refund.
                                          allOf:
                                            - *ref_414
                                        return_location:
                                          description: >-
                                            The location where the item or order
                                            must / will be returned to
                                          allOf:
                                            - *ref_422
                                        fulfillment_managed_by:
                                          description: The entity that will perform the return
                                          type: string
                                          enum:
                                            - CONSUMER
                                            - PROVIDER
                                  xinput:
                                    description: >-
                                      Additional input required from the
                                      customer to purchase / avail this item
                                    allOf:
                                      - *ref_433
                                  time:
                                    description: >-
                                      Temporal attributes of this item. This
                                      property is used when the item exists on
                                      the catalog only for a limited period of
                                      time.
                                    allOf:
                                      - *ref_414
                                  rateable:
                                    description: Whether this item can be rated
                                    type: boolean
                                  rating:
                                    description: The rating of the item
                                    allOf:
                                      - *ref_411
                                  matched:
                                    description: >-
                                      Whether this item is an exact match of the
                                      request
                                    type: boolean
                                  related:
                                    description: >-
                                      Whether this item is a related item to the
                                      exactly matched item
                                    type: boolean
                                  recommended:
                                    description: >-
                                      Whether this item is a recommended item to
                                      a response
                                    type: boolean
                                  ttl:
                                    description: >-
                                      Time to live in seconds for an instance of
                                      this schema
                                    type: string
                                  tags:
                                    type: array
                                    items: *ref_416
                            exp:
                              type: string
                              description: Time after which catalog has to be refreshed
                              format: date-time
                            rateable:
                              description: Whether this provider can be rated or not
                              type: boolean
                            ttl:
                              description: >-
                                The time-to-live in seconds, for this object.
                                This can be overriden at deeper levels. A value
                                of -1 indicates that this object is not
                                cacheable.
                              type: string
                            tags:
                              type: array
                              items: *ref_416
                    items:
                      description: The items purchased / availed in this order
                      type: array
                      items: *ref_434
                    add_ons:
                      description: The add-ons purchased / availed in this order
                      type: array
                      items: *ref_435
                    offers:
                      description: The offers applied in this order
                      type: array
                      items: *ref_436
                    billing:
                      description: The billing details of this order
                      allOf:
                        - description: >-
                            Describes the billing details of an entity.<br>This
                            has properties like
                            name,organization,address,email,phone,time,tax_number,
                            created_at,updated_at
                          type: object
                          additionalProperties: false
                          properties:
                            name:
                              description: Name of the billable entity
                              type: string
                            organization:
                              description: Details of the organization being billed.
                              allOf:
                                - *ref_426
                            address:
                              description: The address of the billable entity
                              allOf:
                                - *ref_419
                            state:
                              description: >-
                                The state where the billable entity resides.
                                This is important for state-level tax
                                calculation
                              allOf:
                                - *ref_420
                            city:
                              description: The city where the billable entity resides.
                              allOf:
                                - *ref_421
                            email:
                              description: Email address where the bill is sent to
                              type: string
                              format: email
                            phone:
                              description: Phone number of the billable entity
                              type: string
                            time:
                              description: Details regarding the billing period
                              allOf:
                                - *ref_414
                            tax_id:
                              description: >-
                                ID of the billable entity as recognized by the
                                taxation authority
                              type: string
                    fulfillments:
                      description: The fulfillments involved in completing this order
                      type: array
                      items: *ref_437
                    cancellation:
                      description: The cancellation details of this order
                      allOf:
                        - description: Describes a cancellation event
                          type: object
                          additionalProperties: false
                          properties:
                            time:
                              description: >-
                                Date-time when the order was cancelled by the
                                buyer
                              type: string
                              format: date-time
                            cancelled_by:
                              type: string
                              enum:
                                - CONSUMER
                                - PROVIDER
                            reason:
                              description: The reason for cancellation
                              allOf:
                                - description: Describes a selectable option
                                  type: object
                                  additionalProperties: false
                                  properties:
                                    id:
                                      type: string
                                    descriptor: *ref_410
                            additional_description:
                              description: >-
                                Any additional information regarding the nature
                                of cancellation
                              allOf:
                                - *ref_410
                    cancellation_terms:
                      description: Cancellation terms of this item
                      type: array
                      items: *ref_438
                    documents:
                      type: array
                      items:
                        description: Documnents associated to the order
                        type: object
                        additionalProperties: false
                        properties:
                          descriptor: *ref_410
                          mime_type:
                            description: >-
                              This field indicates the nature and format of the
                              form received by querying the url. MIME types are
                              defined and standardized in IETF's RFC 6838.
                            type: string
                            enum:
                              - text/html
                              - application/html
                              - application/xml
                              - application/pdf
                          url:
                            description: >-
                              The URL from where the form can be fetched. The
                              content fetched from the url must be processed as
                              per the mime_type specified in this object.
                            type: string
                            format: uri
                    refund_terms:
                      description: Refund terms of this item
                      type: array
                      items: *ref_439
                    replacement_terms:
                      description: Replacement terms of this item
                      type: array
                      items: *ref_440
                    return_terms:
                      description: Return terms of this item
                      type: array
                      items: *ref_441
                    quote:
                      description: The mutually agreed upon quotation for this order.
                      allOf:
                        - description: >-
                            Describes a quote. It is the estimated price of
                            products or services from the BPP.<br>This has
                            properties like price, breakup, ttl
                          type: object
                          additionalProperties: false
                          properties:
                            id:
                              description: ID of the quote.
                              type: string
                              format: uuid
                            price:
                              description: The total quoted price
                              allOf:
                                - *ref_430
                            breakup:
                              description: the breakup of the total quoted price
                              type: array
                              items:
                                type: object
                                properties:
                                  item: *ref_434
                                  title:
                                    type: string
                                  price: *ref_430
                            ttl: *ref_412
                    payments:
                      description: The terms of settlement for this order
                      type: array
                      items: *ref_442
                    created_at:
                      description: The date-time of creation of this order
                      type: string
                      format: date-time
                    updated_at:
                      description: The date-time of updated of this order
                      type: string
                      format: date-time
                    xinput:
                      description: >-
                        Additional input required from the customer to confirm
                        this order
                      allOf:
                        - *ref_433
                    tags:
                      type: array
                      items: *ref_416
              required:
                - order
            error:
              description: >-
                Describes an error object that is returned by a BAP, BPP or BG
                as a response or callback to an action by another network
                participant. This object is sent when any request received by a
                network participant is unacceptable. This object can be sent
                either during Ack or with the callback.
              type: object
              additionalProperties: false
              properties:
                code:
                  type: string
                  description: >-
                    Standard error code. For full list of error codes, refer to
                    docs/protocol-drafts/BECKN-005-ERROR-CODES-DRAFT-01.md of
                    this repo"
                paths:
                  type: string
                  description: >-
                    Path to json schema generating the error. Used only during
                    json schema validation errors
                message:
                  type: string
                  description: >-
                    Human readable message describing the error. Used mainly for
                    logging. Not recommended to be shown to the user.
          required:
            - context
    - summary: IntraCity - Code Based Flow
      id: intracity-flow-1
      domain: ONDC:TRV11
      shouldDispaly: true
      sessionData:
        version: 2.0.0
        collectedBy: BAP
        bankAccountNumber: '123456789'
        virtualPaymentAddress: adasd@okiciic
        bankCode: fj3jf9ij3f02
      protocol:
        search_route:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: messageId
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.intent.fulfillment.vehicle.category
              value: data.vehicleCategaory || session.vehicleCategaory
            - beckn_key: message.intent.payment.tags
              value: data.paymentTagsSearch
              compute: buildTags(data.paymentTagsSearch)
        search_trip:
          sessionData:
            - beckn_key: currentTransactionId
              value: newTranscationId
            - beckn_key: transactionIds
              value: '[...session.transactionIds, newTranscationId]'
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: data.bpp_id
            - beckn_key: context.bpp_uri
              value: data.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: messageId
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.intent.fulfillment.stops[0].type
              value: startPoint
              check: data?.startStop
            - beckn_key: message.intent.fulfillment.stops[0].location.descriptor.code
              value: data?.startStop
            - beckn_key: message.intent.fulfillment.stops[1].type
              value: endPoint
              check: data?.endStop
            - beckn_key: message.intent.fulfillment.stops[1].location.descriptor.code
              value: data?.endStop
            - beckn_key: message.intent.fulfillment.vehicle.category
              value: data.vehicleCategaory || session.vehicleCategaory
            - beckn_key: message.intent.payment.tags
              value: data.paymentTags || session.paymentTagsSearch
              compute: buildTags(data.paymentTags || session.paymentTagsSearch)
        select:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: messageId
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: data.itemId
            - beckn_key: message.order.items[0].quantity.selected.count
              value: parseInt(data.quantity)
            - beckn_key: message.order.provider.id
              value: data.providerId
        init:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: messageId
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: session.itemId
            - beckn_key: message.order.items[0].quantity.selected.count
              value: session.quantitySelected
            - beckn_key: message.order.provider.id
              value: session.providerId
            - beckn_key: message.order.billing.name
              value: data.name
            - beckn_key: message.order.billing.email
              value: data.email
            - beckn_key: message.order.billing.phone
              value: data.phone
            - beckn_key: message.order.payments[0].collected_by
              value: session.collectedBy
            - beckn_key: message.order.payments[0].status
              value: data.paymentStatus
            - beckn_key: message.order.payments[0].type
              value: data.paymentType
            - beckn_key: message.order.payments[0].params.bank_code
              value: session.bankCode
            - beckn_key: message.order.payments[0].params.bank_account_number
              value: session.bankAccountNumber
            - beckn_key: message.order.payments[0].params.virtual_payment_address
              value: session.virtualPaymentAddress
            - beckn_key: message.order.payments[0].tags
              value: data.paymentTagsInit
              compute: buildTags(data.paymentTagsInit)
        confirm:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: messageId
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: session.itemId
            - beckn_key: message.order.items[0].quantity.selected.count
              value: session.quantitySelected
            - beckn_key: message.order.provider.id
              value: session.providerId
            - beckn_key: message.order.billing.name
              value: session.name
            - beckn_key: message.order.billing.email
              value: session.email
            - beckn_key: message.order.billing.phone
              value: session.phone
            - beckn_key: message.order.payments[0].id
              value: data.paymentId
            - beckn_key: message.order.payments[0].collected_by
              value: session.collectedBy
            - beckn_key: message.order.payments[0].status
              value: data.paymentStatusConfirm
            - beckn_key: message.order.payments[0].type
              value: data.paymentTypeConfirm
            - beckn_key: message.order.payments[0].params.transaction_id
              value: data.paymentTranscationId
            - beckn_key: message.order.payments[0].params.currency
              value: data.currency
            - beckn_key: message.order.payments[0].params.amount
              value: data.amount
            - beckn_key: message.order.payments[0].tags
              value: data.paymentTagsConfirm
              compute: buildTags(data.paymentTagsConfirm)
        status:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: messageId
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order_id
              value: data.orderId
        on_search_route:
          mapping:
            - business_key: name
              extractionPath: message.catalog.descriptor.name
            - business_key: bpp_id
              extractionPath: context.bpp_id
            - business_key: bpp_uri
              extractionPath: context.bpp_uri
            - business_key: location
              extractionPath: >-
                message.catalog.providers[].fulfillments[].stops[]{locationName:
                location.descriptor.code}
            - business_key: error
              extractionPath: error
        on_search_trip:
          mapping:
            - business_key: name
              extractionPath: message.catalog.descriptor.name
            - business_key: bpp_id
              extractionPath: context.bpp_id
            - business_key: bpp_uri
              extractionPath: context.bpp_uri
            - business_key: items
              extractionPath: >-
                message.catalog.providers[]{providerId: id}.items[]{id: id,
                name: descriptor.name}
            - business_key: error
              extractionPath: error
        on_select:
          mapping:
            - business_key: breakup
              extractionPath: >-
                message.order.quote.breakup[]{type: title, totalPrice:
                price.value, UOP: price.currency}
            - business_key: error
              extractionPath: error
        on_init:
          sessionData:
            - business_key: paymentID
              extractionPath: 'message.order.payments[]{id: id}'
            - business_key: totalPrice
              extractionPath: message.order.quote.price
          mapping:
            - business_key: paymentDetails
              extractionPath: 'message.order.payments[]{id: id, type: type, status: status}'
            - business_key: totalPrice
              extractionPath: message.order.quote.price
            - business_key: error
              extractionPath: error
        on_confirm:
          mapping:
            - business_key: orderId
              extractionPath: message.order.id
            - business_key: status
              extractionPath: message.order.status
            - business_key: QR code
              extractionPath: >-
                message.order.fulfillments[]{providerId: id}.stops[?(type ===
                "START")]{token: authorization.token, status:
                authorization.status}
            - business_key: error
              extractionPath: error
        on_status:
          mapping:
            - business_key: status
              extractionPath: message.order.status
            - business_key: error
              extractionPath: error
      calls:
        - config: search_route
          mode: ASYNC
        - config: search_trip
          mode: SYNC
        - config: select
          mode: ASYNC
        - config: init
          mode: SYNC
        - config: confirm
          mode: ASYNC
        - config: status
          mode: SYNC
        - config: on_search_route
          endpoint: mapper/ondc
          mode: ASYNC
        - config: on_search_trip
          endpoint: mapper/ondc
          mode: SYNC
        - config: on_select
          endpoint: mapper/ondc
          mode: ASYNC
        - config: on_init
          endpoint: mapper/ondc
          mode: SYNC
        - config: on_confirm
          endpoint: mapper/ondc
          mode: ASYNC
        - config: on_status
          endpoint: mapper/ondc
          mode: SYNC
      schema: *ref_443
BPP:
  flows:
    - summary: Metro - Station Code Based Flow
      id: metro-flow-1
      domain: ONDC:TRV11
      sessionData:
        bpp_uri: http://localhost:81/ondc
        bpp_id: mobility-staging.ondc.org
        collectedBy: BAP
        bankAccountNumber: xxxxxxxxxxxxxx
        virtualPaymentAddress: 9988199772@okicic
        bankCode: XXXXXXXX
        metro_id: '1'
        categories:
          - descriptor:
              name: Ticket
              code: TICKET
            id: C1
          - descriptor:
              name: Pass
              code: PASS
            id: C2
        metro_starttime: '2023-09-14T05:30:00.000Z'
        metro_endtime: '2023-09-14T23:30:00.000Z'
        metro_images:
          - url: https://delhimetrorail.com/logos/logo.ico
        metro_name: Delhi Metro Rail Limited
        currency: INR
        payment_tags:
          BUYER_FINDER_FEES:
            display: false
            BUYER_FINDER_FEES_PERCENTAGE: '1'
          SETTLEMENT_TERMS:
            display: false
            SETTLEMENT_WINDOW: PT30D
            SETTLEMENT_BASIS: INVOICE_RECEIPT
            MANDATORY_ARBITRATION: 'TRUE'
            COURT_JURISDICTION: New Delhi
            STATIC_TERMS: https://api.example-bpp.com/booking/term
          SETTLEMENT_DETAILS:
            display: false
            SETTLEMENT_TYPE: UPI
        tags:
          SCHEDULED_INFO:
            display: false
            GTFS: https://metro-transit/gtfs-realtime
        cancellation_terms:
          - external_ref:
              mimetype: text/html
              url: https://transitsolutions.com/mf/tnc.html
        payment_type: PRE-ORDER
      protocol:
        search:
          sessionData:
            - beckn_key: bap_id
              value: data.context.bap_id
            - beckn_key: bap_uri
              value: data.context.bap_uri
            - beckn_key: cityCode
              value: data.context.location.city.code || session.cityCode
            - beckn_key: countryCode
              value: data.context.location.country.code || session.countryCode
          mapping:
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.transaction_id
              value: session.transaction_id
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.action
              value: data.context.action
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.location.country.code
              value: session.countryCode
            - beckn_key: context.ttl
              value: data.context.ttl
            - beckn_key: message.intent.fulfillment
              value: data.message.intent.fulfillment
        on_search:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.catalog.descriptor.name
              value: data.name
            - beckn_key: message.catalog.descriptor.images
              value: data.images
            - beckn_key: message.catalog.providers[0].id
              value: data.metro_id            ||  session.metro_id
            - beckn_key: message.catalog.providers[0].descriptor.images
              value: data.metro_images        ||  session.metro_images
            - beckn_key: message.catalog.providers[0].descriptor.name
              value: data.metro_name          ||  session.metro_name
            - beckn_key: message.catalog.providers[0].categories
              value: data.categories          ||  session.categories
            - beckn_key: message.catalog.providers[0].items
              value: data.metro_items
            - beckn_key: message.catalog.providers[0].fulfillments
              value: data.trips
            - beckn_key: message.catalog.providers[0].time.range.start
              value: data.metro_starttime     || session.metro_starttime
            - beckn_key: message.catalog.providers[0].time.range.end
              value: data.metro_endtime       || session.metro_endtime
            - beckn_key: message.catalog.providers[0].payments[0].tags
              value: data.payments_tags       || session.payment_tags
              compute: buildTags(data.payments_tags || session.payment_tags)
            - beckn_key: message.catalog.providers[0].tags
              value: data.tags                || session.tags
              compute: buildTags(data.tags    || session.tags)
            - beckn_key: message.catalog.providers[0].payments[0].collected_by
              value: data.payment_collectedby || session.collectedBy
        select:
          sessionData:
            - beckn_key: itemId
              value: data.message.order.items[0].id
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: data.message.order.items[0].id
        on_select:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items
              value: data.metro_items
            - beckn_key: message.order.provider.id
              value: data.metro_id            ||session.metro_id
            - beckn_key: message.order.provider.descriptor.name
              value: data.metro_name          || session.metro_name
            - beckn_key: message.order.provider.descriptor.images
              value: data.metro_images        ||session.metro_images
            - beckn_key: message.order.provider.time.range.start
              value: data.metro_starttime     || session.metro_starttime
            - beckn_key: message.order.provider.time.range.end
              value: data.metro_endtime       || session.metro_endtime
            - beckn_key: message.order.fulfillments
              value: data.trips
            - beckn_key: message.order.quote.price.value
              value: data.price
            - beckn_key: message.order.quote.price.currency
              value: session.currency
            - beckn_key: message.order.cancellation_terms
              value: data.cancellation_terms || session.cancellation_terms
            - beckn_key: message.order.tags
              value: data.tags || session.tags
              compute: buildTags(data.tags    || session.tags)
            - beckn_key: message.order.quote.breakup
              value: data.breakup
        init:
          sessionData:
            - beckn_key: bankCode
              value: >-
                data.message.order.payments[0].collected_by === 'BAP' &&
                data.message.order.payments[0].params.bank_code ||
                session.bankCode
            - beckn_key: bankAccountNumber
              value: >-
                data.message.order.payments[0].collected_by === 'BAP' &&
                data.message.order.payments[0].params.bank_account_number ||
                session.bankAccountNumber
            - beckn_key: virtualPaymentAddress
              value: >-
                data.message.order.payments[0].collected_by === 'BAP' &&
                data.message.order.payments[0].params.virtual_payment_address ||
                session.virtualPaymentAddress
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: data.message.order.items[0].id
        on_init:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items
              value: data.metro_items
            - beckn_key: message.order.provider.id
              value: data.metro_id            ||session.metro_id
            - beckn_key: message.order.provider.descriptor.name
              value: data.metro_name          || session.metro_name
            - beckn_key: message.order.provider.descriptor.images
              value: data.metro_images        ||session.metro_images
            - beckn_key: message.order.provider.time.range.start
              value: data.metro_starttime     || session.metro_starttime
            - beckn_key: message.order.provider.time.range.end
              value: data.metro_endtime       || session.metro_endtime
            - beckn_key: message.order.fulfillments
              value: data.trips
            - beckn_key: message.order.cancellation_terms
              value: data.cancellation_terms || session.cancellation_terms
            - beckn_key: message.order.tags
              value: data.tags || session.tags
              compute: buildTags(data.tags    || session.tags)
            - beckn_key: message.order.billing.name
              value: data.billing_name
            - beckn_key: message.order.billing.phone
              value: data.billing_phone
            - beckn_key: message.order.billing.email
              value: data.billing_email
            - beckn_key: message.order.quote.price.value
              value: data.price
            - beckn_key: message.order.quote.price.currency
              value: session.currency
            - beckn_key: message.order.quote.breakup
              value: data.breakup
            - beckn_key: message.order.payments[0].id
              value: data.payment_id
            - beckn_key: message.order.payments[0].status
              value: data.payment_status
            - beckn_key: message.order.payments[0].collected_by
              value: data.payment_collectedby || session.collectedBy
            - beckn_key: message.order.payments[0].type
              value: data.payment_type || session.payment_type
            - beckn_key: message.order.payments[0].params.bank_code
              value: data.bankCode || session.bankCode
            - beckn_key: message.order.payments[0].params.bank_account_number
              value: data.bankAccountNumber || session.bankAccountNumber
            - beckn_key: message.order.payments[0].params.virtual_payment_address
              value: data.virtualPaymentAddress || session.virtualPaymentAddress
            - beckn_key: message.order.payments[0].tags
              value: data.payments_tags || session.payment_tags
              compute: buildTags({ ...session.payment_tags,  ...data.payment_tags })
        confirm:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: data.message.order.items[0].id
        on_confirm:
          sessionData:
            - beckn_key: billing_name
              value: data.billing_name
            - beckn_key: billing_phone
              value: data.billing_phone
            - beckn_key: billing_email
              value: data.billing_email
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items
              value: data.metro_items
            - beckn_key: message.order.id
              value: data.order_id
            - beckn_key: message.order.created_at
              value: data.order_created_at
            - beckn_key: message.order.updated_at
              value: data.order_updated_at
            - beckn_key: message.order.status
              value: data.order_status
            - beckn_key: message.order.provider.id
              value: data.metro_id            ||session.metro_id
            - beckn_key: message.order.provider.descriptor.name
              value: data.metro_name          || session.metro_name
            - beckn_key: message.order.provider.descriptor.images
              value: data.metro_images        ||session.metro_images
            - beckn_key: message.order.provider.time.range.start
              value: data.metro_starttime     || session.metro_starttime
            - beckn_key: message.order.provider.time.range.end
              value: data.metro_endtime       || session.metro_endtime
            - beckn_key: message.order.fulfillments
              value: data.trips
            - beckn_key: message.order.billing.name
              value: data.billing_name
            - beckn_key: message.order.billing.phone
              value: data.billing_phone
            - beckn_key: message.order.billing.email
              value: data.billing_email
            - beckn_key: message.order.quote.price.value
              value: data.price
            - beckn_key: message.order.quote.price.currency
              value: session.currency
            - beckn_key: message.order.quote.breakup
              value: data.breakup
            - beckn_key: message.order.payments[0].id
              value: data.payment_id
            - beckn_key: message.order.payments[0].status
              value: data.payment_status
            - beckn_key: message.order.payments[0].collected_by
              value: data.payment_collectedby || session.collectedBy
            - beckn_key: message.order.payments[0].type
              value: data.payment_type || session.payment_type
            - beckn_key: message.order.payments[0].params.bank_code
              value: data.bankCode || session.bankCode
            - beckn_key: message.order.payments[0].params.currency
              value: data.currency || session.currency
            - beckn_key: message.order.payments[0].params.amount
              value: data.amount
            - beckn_key: message.order.payments[0].params.transaction_id
              value: session.currentTransactionId
            - beckn_key: message.order.payments[0].params.bank_account_number
              value: data.bankAccountNumber || session.bankAccountNumber
            - beckn_key: message.order.payments[0].params.virtual_payment_address
              value: data.virtualPaymentAddress || session.virtualPaymentAddress
            - beckn_key: message.order.payments[0].tags
              value: data.payments_tags || session.payment_tags
              compute: buildTags({ ...session.payment_tags,  ...data.payment_tags })
            - beckn_key: message.order.tags
              value: data.tags || session.tags
              compute: buildTags(data.tags    || session.tags)
        status:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order_id
              value: data.message.order_id
        on_status:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.id
              value: data.order_id
            - beckn_key: message.order.billing.name
              value: session.billing_name
            - beckn_key: message.order.billing.phone
              value: session.billing_phone
            - beckn_key: message.order.billing.email
              value: session.billing_email
            - beckn_key: message.order.cancellation_terms
              value: data.cancellation_terms || session.cancellation_terms
            - beckn_key: message.order.fulfillments
              value: data.trips
            - beckn_key: message.order.payments[0].id
              value: data.payment_id
            - beckn_key: message.order.payments[0].status
              value: data.payment_status
            - beckn_key: message.order.payments[0].collected_by
              value: data.payment_collectedby || session.collectedBy
            - beckn_key: message.order.payments[0].type
              value: data.payment_type || session.payment_type
            - beckn_key: message.order.payments[0].params.bank_code
              value: data.bankCode || session.bankCode
            - beckn_key: message.order.payments[0].params.currency
              value: data.currency || session.currency
            - beckn_key: message.order.payments[0].params.amount
              value: data.amount
            - beckn_key: message.order.payments[0].params.transaction_id
              value: session.currentTransactionId
            - beckn_key: message.order.payments[0].params.bank_account_number
              value: data.bankAccountNumber || session.bankAccountNumber
            - beckn_key: message.order.payments[0].params.virtual_payment_address
              value: data.virtualPaymentAddress || session.virtualPaymentAddress
            - beckn_key: message.order.payments[0].tags
              value: data.payments_tags || session.payment_tags
              compute: buildTags({ ...session.payment_tags,  ...data.payment_tags })
            - beckn_key: message.order.tags
              value: data.tags || session.tags
              compute: buildTags(data.tags    || session.tags)
            - beckn_key: message.order.updated_at
              value: data.order_updated_at
            - beckn_key: message.order.items
              value: data.metro_items
            - beckn_key: message.order.id
              value: data.order_id
            - beckn_key: message.order.quote.price.value
              value: data.price
            - beckn_key: message.order.quote.price.currency
              value: session.currency
            - beckn_key: message.order.quote.breakup
              value: data.breakup
            - beckn_key: message.order.provider.id
              value: data.metro_id            ||session.metro_id
            - beckn_key: message.order.provider.descriptor.name
              value: data.metro_name          || session.metro_name
            - beckn_key: message.order.provider.descriptor.images
              value: data.metro_images        ||session.metro_images
            - beckn_key: message.order.provider.time.range.start
              value: data.metro_starttime     || session.metro_starttime
            - beckn_key: message.order.provider.time.range.end
              value: data.metro_endtime       || session.metro_endtime
            - beckn_key: message.order.status
              value: data.order_status
        search_route:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.intent.fulfillment.vehicle.category
              value: data.vehicleCategaory || session.vehicleCategaory
            - beckn_key: message.intent.payment.tags
              value: data.paymentTagsSearch
              compute: buildTags(data.paymentTagsSearch)
        on_search_route:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
        search_trip:
          sessionData:
            - beckn_key: currentTransactionId
              value: newTranscationId
            - beckn_key: transactionIds
              value: '[...session.transactionIds, newTranscationId]'
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.intent.fulfillment.stops[0].type
              value: startPoint
              check: data?.startStop
            - beckn_key: message.intent.fulfillment.stops[0].location.descriptor.code
              value: data?.startStop
            - beckn_key: message.intent.fulfillment.stops[1].type
              value: endPoint
              check: data?.endStop
            - beckn_key: message.intent.fulfillment.stops[1].location.descriptor.code
              value: data?.endStop
            - beckn_key: message.intent.fulfillment.vehicle.category
              value: data.vehicleCategaory || session.vehicleCategaory
            - beckn_key: message.intent.payment.tags
              value: data.paymentTags || session.paymentTagsSearch
              compute: buildTags(data.paymentTags || session.paymentTagsSearch)
        on_search_trip:
          mapping:
            - business_key: name
              extractionPath: message.catalog.descriptor.name
            - business_key: bpp_id
              extractionPath: context.bpp_id
            - business_key: bpp_uri
              extractionPath: context.bpp_uri
            - business_key: items
              extractionPath: >-
                message.catalog.providers[]{providerId: id}.items[]{id: id,
                name: descriptor.name}
      schema: *ref_443
      api:
        search:
          default:
            callback: on_search
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - search
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.message.intent.fulfillment.stops
                            - undefined
            service_url: http://localhost:5500/getallstationcode
            sync: false
          getonestationcodetrips:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - search
            service_url: http://localhost:5500/getonestationcodetrips
            sync: false
        select:
          default:
            callback: on_select
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - select
            service_url: http://localhost:5500/getfare
            sync: false
        init:
          default:
            callback: on_init
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - init
            service_url: http://localhost:5500/getfare
            sync: false
        confirm:
          default:
            callback: on_confirm
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - confirm
            service_url: http://localhost:5500/confirmticket
            sync: false
        status:
          default:
            callback: on_status
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - status
            service_url: http://localhost:5500/status
            sync: false
    - summary: IntraCity - Code Based Flow
      id: intracity-flow-1
      domain: ONDC:TRV11
      sessionData:
        bpp_uri: http://localhost:81/ondc
        bpp_id: mobility-staging.ondc.org
        collectedBy: BAP
        bankAccountNumber: xxxxxxxxxxxxxx
        virtualPaymentAddress: 9988199772@okicic
        bankCode: XXXXXXXX
        metro_id: '1'
        categories:
          - descriptor:
              name: Ticket
              code: TICKET
            id: C1
          - descriptor:
              name: Pass
              code: PASS
            id: C2
        metro_starttime: '2023-09-14T05:30:00.000Z'
        metro_endtime: '2023-09-14T23:30:00.000Z'
        metro_images:
          - url: https://delhimetrorail.com/logos/logo.ico
        metro_name: Delhi Metro Rail Limited
        currency: INR
        payment_tags:
          BUYER_FINDER_FEES:
            display: false
            BUYER_FINDER_FEES_PERCENTAGE: '1'
          SETTLEMENT_TERMS:
            display: false
            SETTLEMENT_WINDOW: PT30D
            SETTLEMENT_BASIS: INVOICE_RECEIPT
            MANDATORY_ARBITRATION: 'TRUE'
            COURT_JURISDICTION: New Delhi
            STATIC_TERMS: https://api.example-bpp.com/booking/term
          SETTLEMENT_DETAILS:
            display: false
            SETTLEMENT_TYPE: UPI
        tags:
          SCHEDULED_INFO:
            display: false
            GTFS: https://metro-transit/gtfs-realtime
        cancellation_terms:
          - external_ref:
              mimetype: text/html
              url: https://transitsolutions.com/mf/tnc.html
        payment_type: PRE-ORDER
      protocol:
        search:
          sessionData:
            - beckn_key: bap_id
              value: data.context.bap_id
            - beckn_key: bap_uri
              value: data.context.bap_uri
            - beckn_key: cityCode
              value: data.context.location.city.code || session.cityCode
            - beckn_key: countryCode
              value: data.context.location.country.code || session.countryCode
          mapping:
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.transaction_id
              value: session.transaction_id
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.action
              value: data.context.action
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.location.country.code
              value: session.countryCode
            - beckn_key: context.ttl
              value: data.context.ttl
            - beckn_key: message.intent.fulfillment
              value: data.message.intent.fulfillment
        on_search:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.catalog.descriptor.name
              value: data.name
            - beckn_key: message.catalog.descriptor.images
              value: data.images
            - beckn_key: message.catalog.providers[0].id
              value: data.metro_id            ||  session.metro_id
            - beckn_key: message.catalog.providers[0].descriptor.images
              value: data.metro_images        ||  session.metro_images
            - beckn_key: message.catalog.providers[0].descriptor.name
              value: data.metro_name          ||  session.metro_name
            - beckn_key: message.catalog.providers[0].categories
              value: data.categories          ||  session.categories
            - beckn_key: message.catalog.providers[0].items
              value: data.metro_items
            - beckn_key: message.catalog.providers[0].fulfillments
              value: data.trips
            - beckn_key: message.catalog.providers[0].time.range.start
              value: data.metro_starttime     || session.metro_starttime
            - beckn_key: message.catalog.providers[0].time.range.end
              value: data.metro_endtime       || session.metro_endtime
            - beckn_key: message.catalog.providers[0].payments[0].tags
              value: data.payments_tags       || session.payment_tags
              compute: buildTags(data.payments_tags || session.payment_tags)
            - beckn_key: message.catalog.providers[0].tags
              value: data.tags                || session.tags
              compute: buildTags(data.tags    || session.tags)
            - beckn_key: message.catalog.providers[0].payments[0].collected_by
              value: data.payment_collectedby || session.collectedBy
        select:
          sessionData:
            - beckn_key: itemId
              value: data.message.order.items[0].id
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: data.message.order.items[0].id
        on_select:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items
              value: data.metro_items
            - beckn_key: message.order.provider.id
              value: data.metro_id            ||session.metro_id
            - beckn_key: message.order.provider.descriptor.name
              value: data.metro_name          || session.metro_name
            - beckn_key: message.order.provider.descriptor.images
              value: data.metro_images        ||session.metro_images
            - beckn_key: message.order.provider.time.range.start
              value: data.metro_starttime     || session.metro_starttime
            - beckn_key: message.order.provider.time.range.end
              value: data.metro_endtime       || session.metro_endtime
            - beckn_key: message.order.fulfillments
              value: data.trips
            - beckn_key: message.order.quote.price.value
              value: data.price
            - beckn_key: message.order.quote.price.currency
              value: session.currency
            - beckn_key: message.order.cancellation_terms
              value: data.cancellation_terms || session.cancellation_terms
            - beckn_key: message.order.tags
              value: data.tags || session.tags
              compute: buildTags(data.tags    || session.tags)
            - beckn_key: message.order.quote.breakup
              value: data.breakup
        init:
          sessionData:
            - beckn_key: bankCode
              value: >-
                data.message.order.payments[0].collected_by === 'BAP' &&
                data.message.order.payments[0].params.bank_code ||
                session.bankCode
            - beckn_key: bankAccountNumber
              value: >-
                data.message.order.payments[0].collected_by === 'BAP' &&
                data.message.order.payments[0].params.bank_account_number ||
                session.bankAccountNumber
            - beckn_key: virtualPaymentAddress
              value: >-
                data.message.order.payments[0].collected_by === 'BAP' &&
                data.message.order.payments[0].params.virtual_payment_address ||
                session.virtualPaymentAddress
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: data.message.order.items[0].id
        on_init:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items
              value: data.metro_items
            - beckn_key: message.order.provider.id
              value: data.metro_id            ||session.metro_id
            - beckn_key: message.order.provider.descriptor.name
              value: data.metro_name          || session.metro_name
            - beckn_key: message.order.provider.descriptor.images
              value: data.metro_images        ||session.metro_images
            - beckn_key: message.order.provider.time.range.start
              value: data.metro_starttime     || session.metro_starttime
            - beckn_key: message.order.provider.time.range.end
              value: data.metro_endtime       || session.metro_endtime
            - beckn_key: message.order.fulfillments
              value: data.trips
            - beckn_key: message.order.cancellation_terms
              value: data.cancellation_terms || session.cancellation_terms
            - beckn_key: message.order.tags
              value: data.tags || session.tags
              compute: buildTags(data.tags    || session.tags)
            - beckn_key: message.order.billing.name
              value: data.billing_name
            - beckn_key: message.order.billing.phone
              value: data.billing_phone
            - beckn_key: message.order.billing.email
              value: data.billing_email
            - beckn_key: message.order.quote.price.value
              value: data.price
            - beckn_key: message.order.quote.price.currency
              value: session.currency
            - beckn_key: message.order.quote.breakup
              value: data.breakup
            - beckn_key: message.order.payments[0].id
              value: data.payment_id
            - beckn_key: message.order.payments[0].status
              value: data.payment_status
            - beckn_key: message.order.payments[0].collected_by
              value: data.payment_collectedby || session.collectedBy
            - beckn_key: message.order.payments[0].type
              value: data.payment_type || session.payment_type
            - beckn_key: message.order.payments[0].params.bank_code
              value: data.bankCode || session.bankCode
            - beckn_key: message.order.payments[0].params.bank_account_number
              value: data.bankAccountNumber || session.bankAccountNumber
            - beckn_key: message.order.payments[0].params.virtual_payment_address
              value: data.virtualPaymentAddress || session.virtualPaymentAddress
            - beckn_key: message.order.payments[0].tags
              value: data.payments_tags || session.payment_tags
              compute: buildTags({ ...session.payment_tags,  ...data.payment_tags })
        confirm:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: data.message.order.items[0].id
        on_confirm:
          sessionData:
            - beckn_key: billing_name
              value: data.billing_name
            - beckn_key: billing_phone
              value: data.billing_phone
            - beckn_key: billing_email
              value: data.billing_email
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items
              value: data.metro_items
            - beckn_key: message.order.id
              value: data.order_id
            - beckn_key: message.order.created_at
              value: data.order_created_at
            - beckn_key: message.order.updated_at
              value: data.order_updated_at
            - beckn_key: message.order.status
              value: data.order_status
            - beckn_key: message.order.provider.id
              value: data.metro_id            ||session.metro_id
            - beckn_key: message.order.provider.descriptor.name
              value: data.metro_name          || session.metro_name
            - beckn_key: message.order.provider.descriptor.images
              value: data.metro_images        ||session.metro_images
            - beckn_key: message.order.provider.time.range.start
              value: data.metro_starttime     || session.metro_starttime
            - beckn_key: message.order.provider.time.range.end
              value: data.metro_endtime       || session.metro_endtime
            - beckn_key: message.order.fulfillments
              value: data.trips
            - beckn_key: message.order.billing.name
              value: data.billing_name
            - beckn_key: message.order.billing.phone
              value: data.billing_phone
            - beckn_key: message.order.billing.email
              value: data.billing_email
            - beckn_key: message.order.quote.price.value
              value: data.price
            - beckn_key: message.order.quote.price.currency
              value: session.currency
            - beckn_key: message.order.quote.breakup
              value: data.breakup
            - beckn_key: message.order.payments[0].id
              value: data.payment_id
            - beckn_key: message.order.payments[0].status
              value: data.payment_status
            - beckn_key: message.order.payments[0].collected_by
              value: data.payment_collectedby || session.collectedBy
            - beckn_key: message.order.payments[0].type
              value: data.payment_type || session.payment_type
            - beckn_key: message.order.payments[0].params.bank_code
              value: data.bankCode || session.bankCode
            - beckn_key: message.order.payments[0].params.currency
              value: data.currency || session.currency
            - beckn_key: message.order.payments[0].params.amount
              value: data.amount
            - beckn_key: message.order.payments[0].params.transaction_id
              value: session.currentTransactionId
            - beckn_key: message.order.payments[0].params.bank_account_number
              value: data.bankAccountNumber || session.bankAccountNumber
            - beckn_key: message.order.payments[0].params.virtual_payment_address
              value: data.virtualPaymentAddress || session.virtualPaymentAddress
            - beckn_key: message.order.payments[0].tags
              value: data.payments_tags || session.payment_tags
              compute: buildTags({ ...session.payment_tags,  ...data.payment_tags })
            - beckn_key: message.order.tags
              value: data.tags || session.tags
              compute: buildTags(data.tags    || session.tags)
        status:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order_id
              value: data.message.order_id
        on_status:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.id
              value: data.order_id
            - beckn_key: message.order.billing.name
              value: session.billing_name
            - beckn_key: message.order.billing.phone
              value: session.billing_phone
            - beckn_key: message.order.billing.email
              value: session.billing_email
            - beckn_key: message.order.cancellation_terms
              value: data.cancellation_terms || session.cancellation_terms
            - beckn_key: message.order.fulfillments
              value: data.trips
            - beckn_key: message.order.payments[0].id
              value: data.payment_id
            - beckn_key: message.order.payments[0].status
              value: data.payment_status
            - beckn_key: message.order.payments[0].collected_by
              value: data.payment_collectedby || session.collectedBy
            - beckn_key: message.order.payments[0].type
              value: data.payment_type || session.payment_type
            - beckn_key: message.order.payments[0].params.bank_code
              value: data.bankCode || session.bankCode
            - beckn_key: message.order.payments[0].params.currency
              value: data.currency || session.currency
            - beckn_key: message.order.payments[0].params.amount
              value: data.amount
            - beckn_key: message.order.payments[0].params.transaction_id
              value: session.currentTransactionId
            - beckn_key: message.order.payments[0].params.bank_account_number
              value: data.bankAccountNumber || session.bankAccountNumber
            - beckn_key: message.order.payments[0].params.virtual_payment_address
              value: data.virtualPaymentAddress || session.virtualPaymentAddress
            - beckn_key: message.order.payments[0].tags
              value: data.payments_tags || session.payment_tags
              compute: buildTags({ ...session.payment_tags,  ...data.payment_tags })
            - beckn_key: message.order.tags
              value: data.tags || session.tags
              compute: buildTags(data.tags    || session.tags)
            - beckn_key: message.order.updated_at
              value: data.order_updated_at
            - beckn_key: message.order.items
              value: data.metro_items
            - beckn_key: message.order.id
              value: data.order_id
            - beckn_key: message.order.quote.price.value
              value: data.price
            - beckn_key: message.order.quote.price.currency
              value: session.currency
            - beckn_key: message.order.quote.breakup
              value: data.breakup
            - beckn_key: message.order.provider.id
              value: data.metro_id            ||session.metro_id
            - beckn_key: message.order.provider.descriptor.name
              value: data.metro_name          || session.metro_name
            - beckn_key: message.order.provider.descriptor.images
              value: data.metro_images        ||session.metro_images
            - beckn_key: message.order.provider.time.range.start
              value: data.metro_starttime     || session.metro_starttime
            - beckn_key: message.order.provider.time.range.end
              value: data.metro_endtime       || session.metro_endtime
            - beckn_key: message.order.status
              value: data.order_status
        search_route:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.intent.fulfillment.vehicle.category
              value: data.vehicleCategaory || session.vehicleCategaory
            - beckn_key: message.intent.payment.tags
              value: data.paymentTagsSearch
              compute: buildTags(data.paymentTagsSearch)
        on_search_route:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
        search_trip:
          sessionData:
            - beckn_key: currentTransactionId
              value: newTranscationId
            - beckn_key: transactionIds
              value: '[...session.transactionIds, newTranscationId]'
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.intent.fulfillment.stops[0].type
              value: startPoint
              check: data?.startStop
            - beckn_key: message.intent.fulfillment.stops[0].location.descriptor.code
              value: data?.startStop
            - beckn_key: message.intent.fulfillment.stops[1].type
              value: endPoint
              check: data?.endStop
            - beckn_key: message.intent.fulfillment.stops[1].location.descriptor.code
              value: data?.endStop
            - beckn_key: message.intent.fulfillment.vehicle.category
              value: data.vehicleCategaory || session.vehicleCategaory
            - beckn_key: message.intent.payment.tags
              value: data.paymentTags || session.paymentTagsSearch
              compute: buildTags(data.paymentTags || session.paymentTagsSearch)
        on_search_trip:
          mapping:
            - business_key: name
              extractionPath: message.catalog.descriptor.name
            - business_key: bpp_id
              extractionPath: context.bpp_id
            - business_key: bpp_uri
              extractionPath: context.bpp_uri
            - business_key: items
              extractionPath: >-
                message.catalog.providers[]{providerId: id}.items[]{id: id,
                name: descriptor.name}
      schema: *ref_443
      api:
        search:
          default:
            callback: on_search
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - search
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.message.intent.fulfillment.stops
                            - undefined
            service_url: http://localhost:5500/getallstationcode
            sync: false
          getonestationcodetrips:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - search
            service_url: http://localhost:5500/getonestationcodetrips
            sync: false
        select:
          default:
            callback: on_select
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - select
            service_url: http://localhost:5500/getfare
            sync: false
        init:
          default:
            callback: on_init
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - init
            service_url: http://localhost:5500/getfare
            sync: false
        confirm:
          default:
            callback: on_confirm
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - confirm
            service_url: http://localhost:5500/confirmticket
            sync: false
        status:
          default:
            callback: on_status
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - status
            service_url: http://localhost:5500/status
            sync: false
    - summary: Intercity - Code Based Flow
      id: intercity-flow-1
      domain: ONDC:TRV12
      sessionData:
        bpp_uri: http://localhost:81/ondc
        bpp_id: mobility-staging.ondc.org
        collectedBy: BAP
        bankAccountNumber: xxxxxxxxxxxxxx
        virtualPaymentAddress: 9988199772@okicic
        bankCode: XXXXXXXX
        provider_id: INTERCITY_PROVIDER_ID
        categories:
          - descriptor:
              name: Seater
              code: SEATER
            id: C1
          - descriptor:
              name: Sleeper
              code: SLEEPER
            id: C2
          - descriptor:
              name: Semi Sleeper
              code: SEMI_SLEEPER
            id: C3
        metro_starttime: '2023-09-14T05:30:00.000Z'
        metro_endtime: '2023-09-14T23:30:00.000Z'
        provider_image:
          - url: https://operator1.com/logos/logo.ico
        provider_name: ABC Operator 1 Bus Services
        currency: INR
        payment_tags:
          BUYER_FINDER_FEES:
            display: false
            BUYER_FINDER_FEES_PERCENTAGE: '1'
          SETTLEMENT_TERMS:
            display: false
            SETTLEMENT_WINDOW: PT30D
            SETTLEMENT_BASIS: INVOICE_RECEIPT
            MANDATORY_ARBITRATION: 'TRUE'
            COURT_JURISDICTION: New Delhi
            STATIC_TERMS: https://api.example-bpp.com/booking/term
          SETTLEMENT_DETAILS:
            display: false
            SETTLEMENT_TYPE: UPI
        tags:
          SCHEDULED_INFO:
            display: false
            GTFS: https://metro-transit/gtfs-realtime
        cancellation_terms:
          - cancel_by:
              duration: PT60M
            cancellation_fee:
              percentage: '0'
        payment_type: PRE-ORDER
      protocol:
        search:
          sessionData:
            - beckn_key: bap_id
              value: data.context.bap_id
            - beckn_key: bap_uri
              value: data.context.bap_uri
            - beckn_key: cityCode
              value: data.context.location.city.code || session.cityCode
            - beckn_key: countryCode
              value: data.context.location.country.code || session.countryCode
          mapping:
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.transaction_id
              value: session.transaction_id
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.action
              value: data.context.action
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.location.country.code
              value: session.countryCode
            - beckn_key: context.ttl
              value: data.context.ttl
            - beckn_key: message.intent.fulfillment
              value: data.message.intent.fulfillment
        on_search:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.catalog.descriptor.name
              value: data.name
            - beckn_key: message.catalog.descriptor.images
              value: data.images
            - beckn_key: message.catalog.providers[0].id
              value: data.provider_id            ||  session.provider_id
            - beckn_key: message.catalog.providers[0].descriptor.images
              value: data.provider_image        ||  session.provider_image
            - beckn_key: message.catalog.providers[0].descriptor.name
              value: data.provider_name          ||  session.provider_name
            - beckn_key: message.catalog.providers[0].categories
              value: data.categories
            - beckn_key: message.catalog.providers[0].items
              value: data.intercity_items
            - beckn_key: message.catalog.providers[0].fulfillments
              value: data.trips
        select:
          sessionData:
            - beckn_key: itemId
              value: data.message.order.items[0].id
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: data.message.order.items[0].id
        on_select:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items
              value: data.intercity_items
            - beckn_key: message.order.provider.id
              value: data.provider_id            ||session.provider_id
            - beckn_key: message.order.provider.descriptor.name
              value: data.provider_name          || session.provider_name
            - beckn_key: message.order.provider.descriptor.images
              value: data.provider_image        ||session.provider_image
            - beckn_key: message.order.fulfillments
              value: data.trips
            - beckn_key: message.order.quote.price.value
              value: data.price
            - beckn_key: message.order.quote.price.currency
              value: session.currency
            - beckn_key: message.order.quote.breakup
              value: data.breakup
        init:
          sessionData:
            - beckn_key: bankCode
              value: >-
                data.message.order.payments[0].collected_by === 'BAP' &&
                data.message.order.payments[0].params.bank_code ||
                session.bankCode
            - beckn_key: bankAccountNumber
              value: >-
                data.message.order.payments[0].collected_by === 'BAP' &&
                data.message.order.payments[0].params.bank_account_number ||
                session.bankAccountNumber
            - beckn_key: virtualPaymentAddress
              value: >-
                data.message.order.payments[0].collected_by === 'BAP' &&
                data.message.order.payments[0].params.virtual_payment_address ||
                session.virtualPaymentAddress
            - beckn_key: customer
              value: data.message.order.fulfillments[0].customer
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: data.message.order.items[0].id
        on_init:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items
              value: data.intercity_items
            - beckn_key: message.order.provider.id
              value: data.provider_id            ||session.provider_id
            - beckn_key: message.order.provider.descriptor.name
              value: data.provider_name          || session.provider_name
            - beckn_key: message.order.provider.descriptor.images
              value: data.provider_image        ||session.provider_image
            - beckn_key: message.order.fulfillments
              value: data.trips
            - beckn_key: message.order.fulfillments[0].customer
              value: session.customer
            - beckn_key: message.order.cancellation_terms
              value: session.cancellation_terms
            - beckn_key: message.order.quote.price.value
              value: data.price
            - beckn_key: message.order.quote.price.currency
              value: session.currency
            - beckn_key: message.order.quote.breakup
              value: data.breakup
            - beckn_key: message.order.payments[0].id
              value: data.payment_id
            - beckn_key: message.order.payments[0].status
              value: data.payment_status
            - beckn_key: message.order.payments[0].collected_by
              value: data.payment_collectedby || session.collectedBy
            - beckn_key: message.order.payments[0].type
              value: data.payment_type || session.payment_type
            - beckn_key: message.order.payments[0].params.bank_code
              value: data.bankCode || session.bankCode
            - beckn_key: message.order.payments[0].params.bank_account_number
              value: data.bankAccountNumber || session.bankAccountNumber
            - beckn_key: message.order.payments[0].params.virtual_payment_address
              value: data.virtualPaymentAddress || session.virtualPaymentAddress
            - beckn_key: message.order.payments[0].tags
              value: data.payments_tags || session.payment_tags
              compute: buildTags({ ...session.payment_tags,  ...data.payment_tags })
        confirm:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items[0].id
              value: data.message.order.items[0].id
        on_confirm:
          sessionData:
            - beckn_key: billing_name
              value: data.billing_name
            - beckn_key: billing_phone
              value: data.billing_phone
            - beckn_key: billing_email
              value: data.billing_email
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.items
              value: data.metro_items
            - beckn_key: message.order.id
              value: data.order_id
            - beckn_key: message.order.created_at
              value: data.order_created_at
            - beckn_key: message.order.updated_at
              value: data.order_updated_at
            - beckn_key: message.order.status
              value: data.order_status
            - beckn_key: message.order.provider.id
              value: data.metro_id            ||session.metro_id
            - beckn_key: message.order.provider.descriptor.name
              value: data.metro_name          || session.metro_name
            - beckn_key: message.order.provider.descriptor.images
              value: data.metro_images        ||session.metro_images
            - beckn_key: message.order.provider.time.range.start
              value: data.metro_starttime     || session.metro_starttime
            - beckn_key: message.order.provider.time.range.end
              value: data.metro_endtime       || session.metro_endtime
            - beckn_key: message.order.fulfillments
              value: data.trips
            - beckn_key: message.order.billing.name
              value: data.billing_name
            - beckn_key: message.order.billing.phone
              value: data.billing_phone
            - beckn_key: message.order.billing.email
              value: data.billing_email
            - beckn_key: message.order.quote.price.value
              value: data.price
            - beckn_key: message.order.quote.price.currency
              value: session.currency
            - beckn_key: message.order.quote.breakup
              value: data.breakup
            - beckn_key: message.order.payments[0].id
              value: data.payment_id
            - beckn_key: message.order.payments[0].status
              value: data.payment_status
            - beckn_key: message.order.payments[0].collected_by
              value: data.payment_collectedby || session.collectedBy
            - beckn_key: message.order.payments[0].type
              value: data.payment_type || session.payment_type
            - beckn_key: message.order.payments[0].params.bank_code
              value: data.bankCode || session.bankCode
            - beckn_key: message.order.payments[0].params.currency
              value: data.currency || session.currency
            - beckn_key: message.order.payments[0].params.amount
              value: data.amount
            - beckn_key: message.order.payments[0].params.transaction_id
              value: session.currentTransactionId
            - beckn_key: message.order.payments[0].params.bank_account_number
              value: data.bankAccountNumber || session.bankAccountNumber
            - beckn_key: message.order.payments[0].params.virtual_payment_address
              value: data.virtualPaymentAddress || session.virtualPaymentAddress
            - beckn_key: message.order.payments[0].tags
              value: data.payments_tags || session.payment_tags
              compute: buildTags({ ...session.payment_tags,  ...data.payment_tags })
            - beckn_key: message.order.tags
              value: data.tags || session.tags
              compute: buildTags(data.tags    || session.tags)
        status:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order_id
              value: data.message.order_id
        on_status:
          mapping:
            - beckn_key: context.bap_id
              value: session.bap_id
            - beckn_key: context.bap_uri
              value: session.bap_uri
            - beckn_key: context.bpp_id
              value: session.bpp_id
            - beckn_key: context.bpp_uri
              value: session.bpp_uri
            - beckn_key: context.location.country.code
              value: session.country
            - beckn_key: context.location.city.code
              value: session.cityCode
            - beckn_key: context.transaction_id
              value: session.currentTransactionId
            - beckn_key: context.message_id
              value: data.context.message_id
            - beckn_key: context.timestamp
              value: timestamp
            - beckn_key: context.domain
              value: session.domain
            - beckn_key: context.version
              value: session.version
            - beckn_key: context.ttl
              value: session.ttl
            - beckn_key: context.action
              value: action
            - beckn_key: message.order.id
              value: data.order_id
            - beckn_key: message.order.billing.name
              value: session.billing_name
            - beckn_key: message.order.billing.phone
              value: session.billing_phone
            - beckn_key: message.order.billing.email
              value: session.billing_email
            - beckn_key: message.order.cancellation_terms
              value: data.cancellation_terms || session.cancellation_terms
            - beckn_key: message.order.fulfillments
              value: data.trips
            - beckn_key: message.order.payments[0].id
              value: data.payment_id
            - beckn_key: message.order.payments[0].status
              value: data.payment_status
            - beckn_key: message.order.payments[0].collected_by
              value: data.payment_collectedby || session.collectedBy
            - beckn_key: message.order.payments[0].type
              value: data.payment_type || session.payment_type
            - beckn_key: message.order.payments[0].params.bank_code
              value: data.bankCode || session.bankCode
            - beckn_key: message.order.payments[0].params.currency
              value: data.currency || session.currency
            - beckn_key: message.order.payments[0].params.amount
              value: data.amount
            - beckn_key: message.order.payments[0].params.transaction_id
              value: session.currentTransactionId
            - beckn_key: message.order.payments[0].params.bank_account_number
              value: data.bankAccountNumber || session.bankAccountNumber
            - beckn_key: message.order.payments[0].params.virtual_payment_address
              value: data.virtualPaymentAddress || session.virtualPaymentAddress
            - beckn_key: message.order.payments[0].tags
              value: data.payments_tags || session.payment_tags
              compute: buildTags({ ...session.payment_tags,  ...data.payment_tags })
            - beckn_key: message.order.tags
              value: data.tags || session.tags
              compute: buildTags(data.tags    || session.tags)
            - beckn_key: message.order.updated_at
              value: data.order_updated_at
            - beckn_key: message.order.items
              value: data.metro_items
            - beckn_key: message.order.id
              value: data.order_id
            - beckn_key: message.order.quote.price.value
              value: data.price
            - beckn_key: message.order.quote.price.currency
              value: session.currency
            - beckn_key: message.order.quote.breakup
              value: data.breakup
            - beckn_key: message.order.provider.id
              value: data.metro_id            ||session.metro_id
            - beckn_key: message.order.provider.descriptor.name
              value: data.metro_name          || session.metro_name
            - beckn_key: message.order.provider.descriptor.images
              value: data.metro_images        ||session.metro_images
            - beckn_key: message.order.provider.time.range.start
              value: data.metro_starttime     || session.metro_starttime
            - beckn_key: message.order.provider.time.range.end
              value: data.metro_endtime       || session.metro_endtime
            - beckn_key: message.order.status
              value: data.order_status
      schema: *ref_443
      api:
        search:
          default:
            callback: on_search
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - search
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: >-
                                    req_body.message.intent.fulfillment.stops.0.type
                            - START
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: >-
                                    req_body.message.intent.fulfillment.stops.0.time
                            - undefined
            service_url: http://localhost:5500/getallstationcode
            sync: false
          getonestationcodetrips:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - search
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: >-
                                    req_body.message.intent.fulfillment.stops.0.time.label
                            - DATE_OF_JOURNEY
            service_url: http://localhost:5500/getonestationcodetrips
            sync: false
          get_bus_service:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - search
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.message.intent.provider.id
                            - INTERCITY_PROVIDER_ID
            service_url: http://localhost:5500/getbusservice
            sync: false
        select:
          default:
            callback: on_select
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - select
            service_url: http://localhost:5500/getfare
            sync: false
        init:
          default:
            callback: on_init
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - init
            service_url: http://localhost:5500/getfare
            sync: false
        confirm:
          default:
            callback: on_confirm
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - confirm
            service_url: http://localhost:5500/confirmticket
            sync: false
        status:
          default:
            callback: on_status
          get_all_station_codes:
            condition:
              operation:
                type: AND
                input:
                  value:
                    - operation:
                        type: EQUAL
                        title: Check search message code
                        input:
                          value:
                            - operation:
                                type: READ
                                input:
                                  value: req_body.context.action
                            - status
            service_url: http://localhost:5500/status
            sync: false
    - summary: Default -  Flow
      id: default-flow
      domain: ONDC:FIS12
      protocol:
        search: &ref_444
          mapping:
            - beckn_key: context
              value: data.context
            - beckn_key: message
              value: data.message
        on_search: *ref_444
        select: *ref_444
        on_select: *ref_444
        init: *ref_444
        on_init: *ref_444
        confirm: *ref_444
        on_confirm: *ref_444
        update: *ref_444
        on_update: *ref_444
        status: *ref_444
        on_status: *ref_444
      schema: *ref_443
      api:
        search:
          default:
            service_url: http://localhost:5501/search
            sync: false
        select:
          default:
            service_url: http://localhost:5501/select
            sync: false
        init:
          default:
            service_url: http://localhost:5501/init
            sync: false
        confirm:
          default:
            service_url: http://localhost:5501/confirm
            sync: false
        update:
          default:
            service_url: http://localhost:5501/update
            sync: false
        status:
          default:
            service_url: http://localhost:5501/status
            sync: false
  flow_selector:
    search:
      default:
        config_id: default-flow
      metro:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: >-
                                req_body.message.intent.fulfillment.vehicle.category
                        - METRO
        config_id: metro-flow-1
      intracity_bus:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: >-
                                req_body.message.intent.fulfillment.vehicle.category
                        - BUS
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.context.domain
                        - ONDC:TRV11
        config_id: intracity-flow-1
      intercity-flow-1:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: >-
                                req_body.message.intent.fulfillment.vehicle.category
                        - BUS
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.context.domain
                        - ONDC:TRV12
        config_id: intercity-flow-1
    select:
      default:
        config_id: default-flow
      metro:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - ITEM_ID_1_METRO
        config_id: metro-flow-1
      intracity_bus:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - ITEM_ID_1_INTERCITY_BUS
        config_id: intracity-flow-1
      intercity_bus:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - INTERCITY_BUS_ITEM_ID
        config_id: intercity-flow-1
    init:
      default:
        config_id: default-flow
      metro:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - ITEM_ID_1_METRO
        config_id: metro-flow-1
      intracity_bus:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - ITEM_ID_1_INTERCITY_BUS
        config_id: intracity-flow-1
      intercity_bus:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - INTERCITY_BUS_ITEM_ID
        config_id: intercity-flow-1
    confirm:
      default:
        config_id: default-flow
      metro:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - ITEM_ID_1_METRO
        config_id: metro-flow-1
      intracity_bus:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - ITEM_ID_1_INTERCITY_BUS
        config_id: intracity-flow-1
      intercity_bus:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - INTERCITY_BUS_ITEM_ID
        config_id: intercity-flow-1
    update:
      default:
        config_id: default-flow
      metro:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - ITEM_ID_1_METRO
        config_id: metro-flow-1
      intracity_bus:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - ITEM_ID_1_INTERCITY_BUS
        config_id: intracity-flow-1
      intercity_bus:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - INTERCITY_BUS_ITEM_ID
        config_id: intercity-flow-1
    status:
      default:
        config_id: default-flow
      metro:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - ITEM_ID_1_METRO
        config_id: metro-flow-1
      intracity_bus:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - ITEM_ID_1_INTERCITY_BUS
        config_id: intracity-flow-1
      intercity_bus:
        condition:
          operation:
            type: AND
            input:
              value:
                - operation:
                    type: EQUAL
                    title: Check search message code
                    input:
                      value:
                        - operation:
                            type: READ
                            input:
                              value: req_body.message.order.items.0.id
                        - INTERCITY_BUS_ITEM_ID
        config_id: intercity-flow-1
